__NUXT_JSONP__("/post/design-patterns-in-javascript", (function(a){return {data:[{post:{attributes:{title:"Design Patterns In Javascript",date:"2019-09-03",spoiler:"æ€»ç»“å¸¸ç”¨è®¾è®¡æ¨¡å¼åœ¨ Javascript ä¸­çš„å®ç°",link:a,min2read:"ğŸ±ğŸ± 31 min read",wordcount:"7.6k"},body:"\u003Cp\u003E\u003Cdiv class=\"cs-toc-dom\"\u003E\u003Cul\u003E\u003Cli\u003E\u003Ca href=\"#danlimoshi\"\u003Eå•ä¾‹æ¨¡å¼\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"#celvemoshi\"\u003Eç­–ç•¥æ¨¡å¼\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"#dailimoshi\"\u003Eä»£ç†æ¨¡å¼\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"#diedaiqimoshi\"\u003Eè¿­ä»£å™¨æ¨¡å¼\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"#fabudingyuemoshi\"\u003Eå‘å¸ƒè®¢é˜…æ¨¡å¼\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"#minglingmoshi\"\u003Eå‘½ä»¤æ¨¡å¼\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"#zuhemoshi\"\u003Eç»„åˆæ¨¡å¼\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"#mobanfangfamoshi\"\u003Eæ¨¡æ¿æ–¹æ³•æ¨¡å¼\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"#xiangyuanmoshi\"\u003Eäº«å…ƒæ¨¡å¼\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"#zhizelianmoshi\"\u003EèŒè´£é“¾æ¨¡å¼\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"#zhongjiezhemoshi\"\u003Eä¸­ä»‹è€…æ¨¡å¼\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"#zhuangshizhemoshi\"\u003Eè£…é¥°è€…æ¨¡å¼\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"#zhuangtaimoshi\"\u003EçŠ¶æ€æ¨¡å¼\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"#shipeiqimoshi\"\u003Eé€‚é…å™¨æ¨¡å¼\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"#jieyan\"\u003Eç»“è¨€\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003Eè®¾è®¡æ¨¡å¼ï¼šåœ¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡è¿‡ç¨‹ä¸­é’ˆå¯¹ç‰¹å®šé—®é¢˜çš„ç®€æ´è€Œä¼˜é›…çš„è§£å†³æ–¹æ¡ˆã€‚\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003Eè®¾è®¡æ¨¡å¼è¿™ä¸ªæœ¯è¯­æ˜¯ä¸Šä¸ªä¸–çºª 90 å¹´ä»£ç”± Erich Gammaã€Richard Helmã€Raplh Johnson å’Œ Jonhn Vlissides å››ä¸ªäººæ€»ç»“æç‚¼å‡ºæ¥çš„ï¼Œå¹¶ä¸”å†™äº†ä¸€æœ¬å« \u003Ca href=\"https:\u002F\u002Fbook.douban.com\u002Fsubject\u002F1052241\u002F\" target=\"_blank\"\u003Eã€ŠDesign Patternsã€‹\u003C\u002Fa\u003E çš„ä¹¦ã€‚è¿™å››äººä¹Ÿè¢«ç§°ä¸ºå››äººå¸®ï¼ˆGoFï¼‰ã€‚\u003C\u002Fp\u003E\n\u003Cp\u003Eä¸ºä»€ä¹ˆè¦ä½¿ç”¨è®¾è®¡æ¨¡å¼ï¼Ÿæ ¹æœ¬åŸå› è¿˜æ˜¯è½¯ä»¶å¼€å‘è¦å®ç°å¯ç»´æŠ¤ã€å¯æ‰©å±•ï¼Œå°±å¿…é¡»å°½é‡å¤ç”¨ä»£ç ï¼Œå¹¶ä¸”é™ä½ä»£ç çš„è€¦åˆåº¦ã€‚\u003C\u002Fp\u003E\n\u003Cp\u003Eåœ¨ JavaScript è¿™ç§ç±»å‹æ¨¡ç³Šçš„è¯­è¨€ä¸­ï¼Œå¯¹è±¡å¤šæ€æ€§æ˜¯å¤©ç”Ÿçš„ï¼Œä¸€ä¸ªå˜é‡æ—¢å¯ä»¥æŒ‡å‘ä¸€ä¸ªç±»ï¼Œåˆå¯ä»¥éšæ—¶æŒ‡å‘å¦ä¸€ä¸ªç±»ï¼Œå¹¶ä¸”å¯ä»¥å°†å‡½æ•°ä½œä¸ºå‚æ•°éšæ„ä¼ é€’ï¼Œæ‰€ä»¥åœ¨ JavaScript é‡Œå¾ˆå¤šè®¾è®¡æ¨¡å¼çš„å®ç°ä¸ä¼ ç»Ÿçš„é™æ€ç±»å‹è¯­è¨€ä¸å°½ç›¸åŒã€‚\u003C\u002Fp\u003E\n\u003Ch2 id=\"danlimoshi\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'danlimoshi')\"\u003EÂ¶\u003C\u002Fa\u003E å•ä¾‹æ¨¡å¼\u003C\u002Fh2\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003Eä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹ã€‚\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003Eå•ä¾‹æ¨¡å¼ï¼ˆSingletonï¼‰çš„ç›®çš„å¾ˆç®€å•ï¼Œå°±æ˜¯ä¸ºäº†ä¿è¯æŸä¸ªã€Œç±»ã€åœ¨å…¨å±€èŒƒå›´å†…æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå®ä¾‹ã€‚åœ¨ JavaScript å¼€å‘ä¸­ï¼Œå•ä¾‹æ¨¡å¼ç”¨é€”ä¹Ÿéå¸¸å¹¿æ³›ï¼Œæ¯”å¦‚ç”¨æˆ·ç•Œé¢ä¸­çš„ç™»å½•æµ®çª—ã€å…¨å±€çš„çŠ¶æ€ç®¡ç†å®ä¾‹ç­‰ã€‚\u003C\u002Fp\u003E\n\u003Cp\u003Eå•ä¾‹æ¨¡å¼åœ¨ JavaScript ä¸­çš„å®ç°æ–¹å¼å¾ˆç®€å•ï¼š\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003Eé€šè¿‡é™æ€å±æ€§\u003Ccode\u003Einstance\u003C\u002Fcode\u003Eå˜é‡æŒæœ‰å”¯ä¸€å±æ€§ï¼Œä¿è¯å…¨å±€å”¯ä¸€æ€§ï¼›\u003C\u002Fli\u003E\n\u003Cli\u003Eé€šè¿‡é™æ€æ–¹æ³•\u003Ccode\u003EgetInstance\u003C\u002Fcode\u003Eè¿”å›è¿™ä¸ªå”¯ä¸€å®ä¾‹ï¼Œä½¿å¤–éƒ¨è°ƒç”¨æ–¹æ³•èƒ½è·å–åˆ°å®ä¾‹ï¼›\u003C\u002Fli\u003E\n\u003Cli\u003Eé™åˆ¶æ„é€ å‡½æ•°çš„è¿”å›ç»“æœï¼Œä»¥ä¿è¯ä½¿ç”¨\u003Ccode\u003Enew SomeClass\u003C\u002Fcode\u003Eæ–¹å¼æ—¶ä»èƒ½è¿”å›å”¯ä¸€å®ä¾‹ã€‚\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003Eclass Singleton {\n  static instance = null; \u002F\u002F è®°å½•å•å®ä¾‹\n  \u002F\u002F è¿”å›å·²å­˜åœ¨çš„å®ä¾‹ï¼Œå¦åˆ™åˆ›å»ºä¸€ä¸ªå®ä¾‹\n  static getInstance(name) {\n    return Singleton.instance || new Singleton(name);\n  }\n  constructor(name) {\n    this.name = name;\n    return Singleton.instance || (Singleton.instance = this);\n  }\n  showName() {\n    return this.name;\n  }\n}\n\nconst s1 = Singleton.getInstance('s1');\nconst s2 = Singleton.getInstance('s2');\n\nconsole.log(s1 === s2); \u002F\u002F true\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eä»”ç»†è§‚å¯Ÿä¸Šé¢çš„ä»£ç ä¸éš¾å‘ç°ï¼Œå•ä¾‹é™åˆ¶éƒ¨åˆ†å…¶å®ä¸æ„é€ å‡½æ•°æœ¬èº«è¦å®ç°çš„è¡Œä¸ºæ²¡æœ‰å¤ªå¤§çš„å…³è”ï¼Œå› æ­¤å¯ä»¥å°†å•ä¾‹é™åˆ¶çš„éƒ¨åˆ†æŠ½å–å‡ºæ¥ä½œä¸ºå…¬å…±çš„å•ä¾‹åŒ–å‡½æ•°ã€‚æ­¤å‡½æ•°æ¥æ”¶ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªç»è¿‡åŒ…è£…åçš„\u003Cstrong\u003Eå•ä¾‹åŒ–æ„é€ å‡½æ•°\u003C\u002Fstrong\u003Eï¼Œå®ç°å¦‚ä¸‹ã€‚\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003Efunction getSingleton(ctor) {\n  return class Singleton extends ctor {\n    static instance = null; \u002F\u002F è®°å½•å•å®ä¾‹\n    \u002F\u002F è¿”å›å·²å­˜åœ¨çš„å®ä¾‹ï¼Œå¦åˆ™åˆ›å»ºä¸€ä¸ªå®ä¾‹\n    static getInstance(...args) {\n      return Singleton.instance || new Singleton(...args);\n    }\n    constructor(...args) {\n      super(...args);\n      return Singleton.instance || (Singleton.instance = this);\n    }\n  };\n}\n\nclass SomeClass {\n  constructor(name) {\n    this.name = name;\n  }\n}\n\nconst SingleSomeClass = getSingleton(SomeClass);\n\nconst s1 = SingleSomeClass.getInstance('s1');\nconst s2 = SingleSomeClass.getInstance('s2');\n\nconsole.log(s1 === s2); \u002F\u002F true\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eä¹Ÿå¯ä»¥ä½¿ç”¨ JavaScript é—­åŒ…å’Œé«˜é˜¶å‡½æ•°çš„ç‰¹æ€§æ¥è¾¾åˆ°ç›®çš„ï¼Œæ³¨æ„ä½¿ç”¨æ­¤æ–¹å¼æ—¶ï¼Œè¾“å…¥çš„æ„é€ å‡½æ•°åªèƒ½ä¸º\u003Cstrong\u003Eå‡½æ•°å£°æ˜\u003C\u002Fstrong\u003Eå½¢å¼ï¼Œå› ä¸º\u003Ccode\u003Eclass\u003C\u002Fcode\u003Eåªèƒ½ç”¨\u003Ccode\u003Enew SomeClass\u003C\u002Fcode\u003Eçš„æ–¹å¼è¿›è¡Œå®ä¾‹åŒ–ã€‚\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003Efunction getSingleton(ctor) {\n  function Singleton(...args) {\n    if (Singleton.instance) return Singleton.instance;\n    ctor.apply(this, args); \u002F\u002F å€Ÿç”¨æ„é€ å‡½æ•°é€»è¾‘\n    return (Singleton.instance = this);\n  }\n  Singleton.prototype = Object.create(ctor.prototype); \u002F\u002F ç»´æŒåŸå‹é“¾\n  Singleton.instance = null;\n  Singleton.getInstance = function(...args) {\n    return Singleton.instance || new Singleton(...args);\n  };\n  return Singleton;\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Chr\u003E\n\u003Ch2 id=\"celvemoshi\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'celvemoshi')\"\u003EÂ¶\u003C\u002Fa\u003E ç­–ç•¥æ¨¡å¼\u003C\u002Fh2\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003Eå®šä¹‰ä¸€ç³»åˆ—çš„ç®—æ³•ï¼ŒæŠŠå®ƒä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥ï¼Œå¹¶ä¸”ä½¿å®ƒä»¬å¯ç›¸äº’æ›¿æ¢ã€‚æ­¤æ¨¡å¼ä½¿å¾—ç®—æ³•å’Œé€»è¾‘å¯ç‹¬ç«‹äºä½¿ç”¨å®ƒçš„æ¶ˆè´¹è€…è€Œå˜åŒ–ã€‚\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003Eç­–ç•¥æ¨¡å¼åœ¨ JavaScript åº”ç”¨éå¸¸å¹¿æ³›ï¼Œæœ€å¸¸è§çš„å°±æ˜¯è¡¨å•æ ¡éªŒï¼Œå¸¸è§çš„æ•°ç»„çš„é«˜é˜¶å‡½æ•° api \u003Ccode\u003EArray.prototype.sort\u003C\u002Fcode\u003Eã€\u003Ccode\u003EArray.prototype.map\u003C\u002Fcode\u003Eç­‰ä¹Ÿæ˜¯å…¶ä¸­ä¸€ç§å…¸å‹çš„ä½“ç°ã€‚\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003Econst arr = [1, 3, 5, 7, 9, 2, 4, 6, 8, 10];\n\narr.sort((a, b) =&gt; a - b); \u002F\u002F [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\narr.sort((a, b) =&gt; b - a); \u002F\u002F [10, 9, 8, 7, 6, 5, 4, 3, 2, 1]\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eé€šè¿‡ä¸åŒçš„å›è°ƒå‡½æ•°ï¼Œå°†æ•°ç»„è¿›è¡Œæ­£å‘æ’åºå’Œåå‘æ’åºï¼Œè€Œä¸¤ä¸ªå›è°ƒå‡½æ•°å°±æ˜¯ç‹¬ç«‹çš„ç­–ç•¥ã€‚\u003C\u002Fp\u003E\n\u003Cp\u003Eä¸€ä¸ªåŸºäºç­–ç•¥æ¨¡å¼çš„ç¨‹åºè‡³å°‘ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003Eå®šä¹‰ä¸€ç»„ç­–ç•¥ç±»ï¼Œç­–ç•¥ç±»å°è£…äº†å…·ä½“çš„ç®—æ³•ï¼Œå¹¶è´Ÿè´£å…·ä½“çš„è®¡ç®—è¿‡ç¨‹ã€‚\u003C\u002Fli\u003E\n\u003Cli\u003Eå®šä¹‰ä¸€ä¸ªç¯å¢ƒç±» Contextï¼ŒContext æ¥å—å®¢æˆ·çš„è¯·æ±‚ï¼Œéšåå°†è¯·æ±‚å§”æ‰˜ç»™æŸä¸€ä¸ªç­–ç•¥ç±»ã€‚\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003Eç­–ç•¥æ¨¡å¼åœ¨ JavaScript ä¸­ç»å¸¸ç”¨äºè§£å†³å¤šé‡æ¡ä»¶é€‰æ‹©è¯­å¥å¸¦æ¥çš„å¼ºè€¦åˆé—®é¢˜ã€‚\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003E\u002F\u002F ä¼˜åŒ–å‰\nfunction func(condition) {\n  if (condition === 'A') {\n    \u002F\u002F do some stuff ...\n  } else if (condition === 'B') {\n    \u002F\u002F do some stuff ...\n  } else if (condition === 'C') {\n    \u002F\u002F do some stuff ...\n  } else if (condition === 'D') {\n    \u002F\u002F do some stuff ...\n  }\n}\n\n\u002F\u002F ä¼˜åŒ–å\nconst strategies = {\n  A() {\n    \u002F\u002F do some stuff ...\n  },\n  B() {\n    \u002F\u002F do some stuff ...\n  },\n  C() {\n    \u002F\u002F do some stuff ...\n  },\n  D() {\n    \u002F\u002F do some stuff ...\n  },\n};\n\nstrategies[condition]();\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch5 id=\"moshiyoudian\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'moshiyoudian')\"\u003EÂ¶\u003C\u002Fa\u003E æ¨¡å¼ä¼˜ç‚¹ï¼š\u003C\u002Fh5\u003E\n\u003Cul\u003E\n\u003Cli\u003Eåˆ©ç”¨ç»„åˆã€å§”æ‰˜å’Œå¤šæ€ç­‰æŠ€æœ¯å’Œæ€æƒ³ï¼Œå¯æœ‰æ•ˆé¿å…å¤šé‡æ¡ä»¶é€‰æ‹©è¯­å¥ã€‚\u003C\u002Fli\u003E\n\u003Cli\u003Eæä¾›äº†å¯¹å¼€æ”¾-å°é—­åŸåˆ™çš„å®Œç¾æ”¯æŒï¼Œå°†ç®—æ³•å°è£…åœ¨ç‹¬ç«‹çš„ strategy ä¸­ï¼Œä½¿å¾—ç­–ç•¥æ˜“äºåˆ‡æ¢ï¼Œæ˜“äºç†è§£ï¼Œæ˜“äºæ‰©å±•ã€‚\u003C\u002Fli\u003E\n\u003Cli\u003Eç®—æ³•å¯å¤ç”¨åœ¨å…¶å®ƒåœ°æ–¹ï¼Œä»è€Œé¿å…äº†è®¸å¤šé‡å¤çš„å¤åˆ¶é»è´´å·¥ä½œã€‚\u003C\u002Fli\u003E\n\u003Cli\u003Eåˆ©ç”¨ç»„åˆå’Œå§”æ‰˜æ¥è®© Context æ‹¥æœ‰æ‰§è¡Œç®—æ³•çš„èƒ½åŠ›ï¼Œç›¸å¯¹ä¼ ç»Ÿçš„ç»§æ‰¿æ¥è¯´æ›´åŠ è½»ä¾¿ã€‚\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch5 id=\"moshiquedian\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'moshiquedian')\"\u003EÂ¶\u003C\u002Fa\u003E æ¨¡å¼ç¼ºç‚¹ï¼š\u003C\u002Fh5\u003E\n\u003Cul\u003E\n\u003Cli\u003Eä¼šåœ¨ç¨‹åºä¸­å¢åŠ è®¸å¤šç­–ç•¥ç±»æˆ–è€…ç­–ç•¥å¯¹è±¡ï¼Œå­˜åœ¨é¢å¤–å¼€é”€ã€‚\u003C\u002Fli\u003E\n\u003Cli\u003Estrategy éœ€è¦å‘æ¶ˆè´¹è€…æš´éœ²æ‰€æœ‰å®ç°ï¼Œè¿åäº†æœ€å°‘çŸ¥è¯†åŸåˆ™ã€‚\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Chr\u003E\n\u003Ch2 id=\"dailimoshi\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'dailimoshi')\"\u003EÂ¶\u003C\u002Fa\u003E ä»£ç†æ¨¡å¼\u003C\u002Fh2\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003Eä¸ºä¸€ä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç”¨å“æˆ–å ä½ç¬¦ï¼Œä»¥ä¾¿æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003Eä½¿ç”¨ä»£ç†æ¨¡å¼çš„ä¸»è¦ç›®çš„æ˜¯ï¼Œå½“å®¢æˆ·ä¸æ–¹ä¾¿ç›´æ¥è®¿é—®ä¸€ä¸ªå¯¹è±¡æˆ–è€…ä¸æ»¡è¶³éœ€è¦çš„æ—¶å€™ï¼Œæä¾›ä¸€ä¸ªæ›¿èº«å¯¹è±¡æ¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ï¼Œå®¢æˆ·å®é™…ä¸Šè®¿é—®çš„æ˜¯æ›¿èº«å¯¹è±¡ã€‚æ›¿èº«å¯¹è±¡å¯¹è¯·æ±‚ä½œå‡ºä¸€äº›å¤„ç†ä¹‹åï¼Œå†æŠŠè¯·æ±‚è½¬äº¤ç»™æœ¬ä½“å¯¹è±¡ã€‚\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003Eå®¢æˆ· ====&gt; æœ¬ä½“ \u002F\u002F ä¸ä½¿ç”¨ä»£ç†æ¨¡å¼\nå®¢æˆ· ====&gt; ä»£ç† ====&gt; æœ¬ä½“ \u002F\u002F ä½¿ç”¨ä»£ç†æ¨¡å¼\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eä»£ç†æ¨¡å¼å¯ä»¥ç†è§£æˆï¼Œåœ¨ç›®æ ‡å¯¹è±¡ä¹‹å‰æ¶è®¾ä¸€å±‚ã€Œæ‹¦æˆªã€ï¼Œå¤–ç•Œå¯¹è¯¥å¯¹è±¡çš„è®¿é—®ï¼Œéƒ½å¿…é¡»å…ˆé€šè¿‡è¿™å±‚æ‹¦æˆªï¼Œå› æ­¤æä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥å¯¹å¤–ç•Œçš„è®¿é—®è¿›è¡Œè¿‡æ»¤å’Œæ”¹å†™ã€‚å› ä¸ºä»£ç†å¯¹è±¡å¯¹å®¢æˆ·æ˜¯é€æ˜çš„ï¼Œæ‰€ä»¥ä»£ç†å¯¹è±¡å¿…é¡»å®ç°ä¸æœ¬ä½“ä¸€è‡´çš„æ¥å£ã€‚åœ¨æœ€æ–°çš„ ES6 è¯­æ³•ä¸­ï¼Œå·²ç»å®ç°äº†åŸç”Ÿçš„\u003Ccode\u003EProxy\u003C\u002Fcode\u003Eï¼Œç›´æ¥åœ¨â€œå…ƒç¼–ç¨‹â€ï¼ˆmeta programmingï¼‰çš„å±‚é¢å¯¹æœ¬ä½“è¡Œä¸ºå¢åŠ æ‹¦æˆªã€‚\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003E\u002F\u002F ä½¿ç”¨getæ‹¦æˆªï¼Œå®ç°æ•°ç»„è¯»å–è´Ÿæ•°çš„ç´¢å¼•ã€‚\nconst arr = ['a', 'b', 'c'];\n\nfunction createArray(arr) {\n  const handler = {\n    get(target, propKey, receiver) {\n      const index = Number(propKey);\n      if (index &lt; 0) {\n        propKey = String(target.length + index);\n      }\n      return Reflect.get(target, propKey, receiver);\n    },\n  };\n\n  return new Proxy(arr, handler);\n}\n\nlet arrProxy = createArray(arr);\narrProxy[-1]; \u002F\u002F c\narr[-1]; \u002F\u002F undefined\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Chr\u003E\n\u003Ch2 id=\"diedaiqimoshi\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'diedaiqimoshi')\"\u003EÂ¶\u003C\u002Fa\u003E è¿­ä»£å™¨æ¨¡å¼\u003C\u002Fh2\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003Eæä¾›ä¸€ç§æ–¹æ³•é¡ºåºè®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡ä¸­çš„å„ä¸ªå…ƒç´ ï¼Œè€Œåˆä¸éœ€è¦æš´éœ²è¯¥å¯¹è±¡çš„å†…éƒ¨è¡¨ç¤ºã€‚\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003Eè¿­ä»£å™¨æ¨¡å¼å¯ä»¥æŠŠè¿­ä»£çš„è¿‡ç¨‹ä»ä¸šåŠ¡é€»è¾‘ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œåœ¨ä½¿ç”¨è¿­ä»£å™¨æ¨¡å¼åï¼Œå³ä½¿ä¸å…³å¿ƒå¯¹è±¡çš„å†…éƒ¨æ„é€ ï¼Œä¹Ÿå¯ä»¥æŒ‰é¡ºåºè®¿é—®å…¶ä¸­çš„æ¯ä¸ªå…ƒç´ ã€‚\u003C\u002Fp\u003E\n\u003Cp\u003Eè¿­ä»£å™¨å¯ä»¥åˆ†ä¸ºå¤–éƒ¨è¿­ä»£å™¨å’Œå†…éƒ¨è¿­ä»£å™¨ã€‚\u003C\u002Fp\u003E\n\u003Ch5 id=\"neibudiedaiqi\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'neibudiedaiqi')\"\u003EÂ¶\u003C\u002Fa\u003E å†…éƒ¨è¿­ä»£å™¨\u003C\u002Fh5\u003E\n\u003Cp\u003Eå†…éƒ¨è¿­ä»£å™¨çš„ç‰¹ç‚¹æ˜¯å¤–ç•Œè·Ÿè¿­ä»£å™¨çš„äº¤äº’ä»…ä»…åªæ˜¯ä¸€æ¬¡åˆå§‹è°ƒç”¨ã€‚\u003C\u002Fp\u003E\n\u003Cp\u003Eå¸¸è§çš„æ•°ç»„çš„é«˜é˜¶å‡½æ•° api \u003Ccode\u003EArray.prototype.forEach\u003C\u002Fcode\u003Eã€\u003Ccode\u003EArray.prototype.map\u003C\u002Fcode\u003Eç­‰å°±å·²ç»å¾ˆå¥½åœ°å®ç°äº†è¿­ä»£å™¨æ¨¡å¼ã€‚\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003Econst arr = [1, 2, 3];\n\narr.forEach((item, index) =&gt; {\n  \u002F\u002F do some stuff ...\n});\n\n\u002F\u002F æ‰‹åŠ¨å®ç°å†…éƒ¨è¿­ä»£å™¨\nfunction each(arr, callback) {\n  for (let i = 0; i &lt; arr.length; i++) {\n    callback(arr[i], i, arr);\n  }\n}\n\neach(arr, (item, index) =&gt; {\n  \u002F\u002F do some stuff ...\n});\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch5 id=\"waibudiedaiqi\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'waibudiedaiqi')\"\u003EÂ¶\u003C\u002Fa\u003E å¤–éƒ¨è¿­ä»£å™¨\u003C\u002Fh5\u003E\n\u003Cp\u003Eå¤–éƒ¨è¿­ä»£å™¨çš„ç‰¹ç‚¹æ˜¯å¿…é¡»æ˜¾å¼åœ°è¯·æ±‚è¿­ä»£ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚å®ƒçš„è¿­ä»£è¿‡ç¨‹ä¸€èˆ¬éµå¾ªä¸‹é¢å››ä¸ªæ­¥éª¤ï¼š\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003Eåˆ›å»ºä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡ï¼ŒæŒ‡å‘å½“å‰æ•°æ®ç»“æ„çš„èµ·å§‹ä½ç½®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿­ä»£å™¨å¯¹è±¡æœ¬è´¨ä¸Šï¼Œå°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡ã€‚\u003C\u002Fli\u003E\n\u003Cli\u003Eç¬¬ä¸€æ¬¡è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„ next æ–¹æ³•ï¼Œå¯ä»¥å°†æŒ‡é’ˆæŒ‡å‘æ•°æ®ç»“æ„çš„ç¬¬ä¸€ä¸ªæˆå‘˜ã€‚\u003C\u002Fli\u003E\n\u003Cli\u003Eç¬¬äºŒæ¬¡è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„ next æ–¹æ³•ï¼ŒæŒ‡é’ˆå°±æŒ‡å‘æ•°æ®ç»“æ„çš„ç¬¬äºŒä¸ªæˆå‘˜ã€‚\u003C\u002Fli\u003E\n\u003Cli\u003Eä¸æ–­è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„ next æ–¹æ³•ï¼Œç›´åˆ°å®ƒæŒ‡å‘æ•°æ®ç»“æ„çš„ç»“æŸä½ç½®ã€‚\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003Econst it = makeIterator(['hello', 'world', 'ending']);\n\nit.next(); \u002F\u002F { value: &quot;hello&quot;, done: false }\nit.next(); \u002F\u002F { value: &quot;world&quot;, done: false }\nit.next(); \u002F\u002F { value: &quot;ending&quot;, done: false }\nit.next(); \u002F\u002F { value: undefined, done: true }\n\nfunction makeIterator(array) {\n  let nextIndex = 0;\n  return {\n    next: function() {\n      return nextIndex &lt; array.length ? { value: array[nextIndex++], done: false } : { value: undefined, done: true };\n    },\n  };\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EES6 å·²ç»å¯¹å¤–éƒ¨è¿­ä»£å™¨è¿›è¡Œäº†åŸç”Ÿå®ç°ï¼Œå®ƒå°±æ˜¯\u003Ccode\u003EGenerator\u003C\u002Fcode\u003Eã€‚\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003Efunction* itGenerator() {\n  yield 'hello';\n  yield 'world';\n  return 'ending';\n}\n\nconst it = itGenerator();\nit.next(); \u002F\u002F { value: 'hello', done: false }\nit.next(); \u002F\u002F { value: 'world', done: false }\nit.next(); \u002F\u002F { value: 'ending', done: true }\nit.next(); \u002F\u002F { value: undefined, done: true }\n\n\u002F\u002F å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ä½¿ç”¨ for...of è¿›è¡Œè¿­ä»£\nfor (let l of it) {\n  console.log(l);\n}\n\u002F\u002F hello world ending\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Chr\u003E\n\u003Ch2 id=\"fabudingyuemoshi\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'fabudingyuemoshi')\"\u003EÂ¶\u003C\u002Fa\u003E å‘å¸ƒè®¢é˜…æ¨¡å¼\u003C\u002Fh2\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003Eå®šä¹‰å¯¹è±¡é—´çš„ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–å®ƒçš„å¯¹è±¡éƒ½å°†å¾—åˆ°é€šçŸ¥ã€‚\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003Eå‘å¸ƒ-è®¢é˜…æ¨¡å¼ï¼ˆPublish-Subscribeï¼šPub\u002FSubï¼‰ï¼Œå®ƒæ˜¯ä¸€ç§é€šçŸ¥æœºåˆ¶ï¼Œè®©å‘é€é€šçŸ¥çš„ä¸€æ–¹ï¼ˆè¢«è§‚å¯Ÿæ–¹ï¼‰å’Œæ¥æ”¶é€šçŸ¥çš„ä¸€æ–¹ï¼ˆè§‚å¯Ÿè€…ï¼‰èƒ½å½¼æ­¤åˆ†ç¦»ï¼Œäº’ä¸å½±å“ã€‚åˆç§°ä¸ºã€Œè§‚å¯Ÿè€…æ¨¡å¼ã€ã€‚\u003C\u002Fp\u003E\n\u003Cp\u003Eå®ƒçš„ç‰¹ç‚¹æ˜¯ï¼š\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003Eå¯å¹¿æ³›åº”ç”¨äºå¼‚æ­¥ç¼–ç¨‹ä¸­ï¼Œæ˜¯ä¸€ç§æ›¿ä»£ä¼ é€’å›è°ƒå‡½æ•°çš„è§£å†³æ–¹æ¡ˆã€‚\u003C\u002Fli\u003E\n\u003Cli\u003Eå¯å–ä»£å¯¹è±¡ä¹‹é—´ç¡¬ç¼–ç çš„é€šçŸ¥æœºåˆ¶ï¼Œä¸€ä¸ªå¯¹è±¡ä¸ç”¨å†æ˜¾å¼åœ°è°ƒç”¨å¦å¤–ä¸€ä¸ªå¯¹è±¡çš„æŸä¸ªæ¥å£ã€‚\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003Eåœ¨ JavaScript å¼€å‘ä¸­ï¼Œä¸€èˆ¬ä½¿ç”¨äº‹ä»¶æ¨¡å‹æ¥æ›¿ä»£ä¼ ç»Ÿçš„å‘å¸ƒè®¢é˜…æ¨¡å¼ã€‚\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003Elet i = 0;\ndocument.body.addEventListener('click', () =&gt; {\n  i++;\n  console.log(`ç‚¹å‡»äº† ${i} æ¬¡ã€‚`);\n});\n\ndocument.body.click(); \u002F\u002F ç‚¹å‡»äº† 1 æ¬¡ã€‚\ndocument.body.click(); \u002F\u002F ç‚¹å‡»äº† 2 æ¬¡ã€‚\ndocument.body.click(); \u002F\u002F ç‚¹å‡»äº† 3 æ¬¡ã€‚\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eåœ¨ JavaScript ä¸­å®ç°ä¸€ä¸ªè‡ªå®šä¹‰çš„å‘å¸ƒè®¢é˜…æ¨¡å¼ä¸€èˆ¬éœ€è¦ä¸‹é¢ä¸‰ä¸ªæ­¥éª¤ï¼š\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003Eåˆ›å»ºä¸€ä¸ªå‘å¸ƒè€…ï¼›\u003C\u002Fli\u003E\n\u003Cli\u003Eåœ¨å‘å¸ƒè€…å†…éƒ¨åˆ›å»ºä¸€ä¸ªç¼“å­˜åˆ—è¡¨ï¼Œç”¨äºå­˜æ”¾å›è°ƒå‡½æ•°ä»¥ä¾¿é€šçŸ¥è®¢é˜…è€…ï¼›\u003C\u002Fli\u003E\n\u003Cli\u003Eåœ¨å‘å¸ƒè€…å†…éƒ¨åˆ›å»ºä¸€ä¸ªéå†æ‰§è¡Œå™¨å‡½æ•°ï¼Œåœ¨å‘å¸ƒæ¶ˆæ¯ï¼ˆå‘ç”Ÿäº†æŒ‡å®šçš„å˜åŒ–ï¼‰æ—¶ï¼Œä¾æ¬¡è§¦å‘ç¼“å­˜åˆ—è¡¨å†…è®¢é˜…è€…çš„å›è°ƒå‡½æ•°ã€‚\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003Econst event = {\n  clientList: [], \u002F\u002F æ”¶é›†è®¢é˜…å›è°ƒ\n  \u002F\u002F è®¢é˜…å›è°ƒ\n  listen(key, fn) {\n    if (!this.clientList[key]) {\n      this.clientList[key] = [];\n    }\n  },\n  \u002F\u002F å–æ¶ˆè®¢é˜…\n  remove(key, fn) {\n    const fns = this.clientList[key];\n    if (!fns || fns.length === 0) {\n      return false;\n    }\n    if (!fn) {\n      fns &amp;&amp; (fns.length = 0);\n      return;\n    }\n    const targetIndex = fns.findIndex(fnI =&gt; fnI === fn);\n    ~targetIndex &amp;&amp; fns.splice(targetIndex, 1);\n  },\n  \u002F\u002F è§¦å‘å›è°ƒ\n  trigger(...args) {\n    const key = args.shift();\n    const fns = this.clientList[key];\n    if (!fns || fns.length === 0) {\n      return false;\n    }\n    fns.forEach(fn =&gt; fn.apply(null, args));\n  },\n};\n\n\u002F\u002F åŠ¨æ€å®‰è£…å‘å¸ƒè®¢é˜…åŠŸèƒ½\nconst installEvent = function(obj) {\n  for (let key in event) {\n    obj[key] = event[key];\n  }\n};\n\n\u002F\u002F ä½¿ç”¨\nconst source = {};\ninstallEvent(source);\n\nconst typeACb = arg =&gt; console.log('typeA', arg);\nconst typeBCb = arg =&gt; console.log('typeB', arg);\n\nsource.listen('typeA', typeACb);\nsource.listen('typeB', typeBCb);\n\nsource.trigger('typeA', ' is trigger'); \u002F\u002F typeA is trigger\nsource.trigger('typeB', ' is trigger'); \u002F\u002F typeB is trigger\nsource.trigger('typeC', 'may cause error'); \u002F\u002F false\n\nsource.remove('typeA', typeACb);\nsource.remove('typeB');\nsource.trigger('typeA', ' is trigger'); \u002F\u002F false\nsource.trigger('typeB', ' is trigger'); \u002F\u002F false\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003ENodes.js ä¸­çš„ EventEmitter å°±æ˜¯ä¸€ä¸ªç»å…¸çš„å‘å¸ƒè®¢é˜…æ¨¡å¼çš„å®ç°ï¼Œå®ƒå®è´¨ä¸Šæ˜¯å°†å‘å¸ƒè®¢é˜…çš„é€»è¾‘æŠ½ç¦»å‡ºæ¥ä½œä¸ºå¤ç”¨çš„é€šç”¨å‡½æ•°ï¼Œä½¿å‘å¸ƒè€…å’Œè®¢é˜…è€…å‘ˆæ¾æ•£è€¦åˆã€‚\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003Eclass EventBus {\n  constructor(evtMap = new Map()) {\n    this.evtMap = evtMap;\n  }\n  \u002F\u002F æ·»åŠ è®¢é˜…\n  on(type, handler) {\n    const handlers = this.evtMap.get(type);\n    const added = handlers &amp;&amp; handlers.push(handler);\n    !added &amp;&amp; this.evtMap.set(type, [handler]);\n  }\n  \u002F\u002F å–æ¶ˆè®¢é˜…\n  off(type, handler) {\n    const handlers = this.evtMap.get(type);\n    if (!handlers) return false;\n    if (!handler) {\n      handlers.length = 0;\n      return;\n    }\n    handlers.splice(handlers.indexOf(handler) &gt;&gt;&gt; 0, 1);\n  }\n  \u002F\u002F è§¦å‘å›è°ƒ\n  emit(type, evt) {\n    (this.evtMap || []).forEach(handler =&gt; handler(evt));\n  }\n}\n\n\u002F\u002F ä½¿ç”¨\nconst eventBus = EventBus();\n\neventBus.on('foo', e =&gt; console.log('foo', e)); \u002F\u002F è®¢é˜…äº‹ä»¶\neventBus.emit('foo', { a: 'b' }); \u002F\u002F è§¦å‘äº‹ä»¶\neventBus.evtMap.clear(); \u002F\u002F æ¸…é™¤æ‰€æœ‰è®¢é˜…\n\nfunction onFoo() {}\neventBus.on('foo', onFoo); \u002F\u002F è®¢é˜…\neventBus.off('foo', onFoo); \u002F\u002F å–æ¶ˆè®¢é˜…\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch5 id=\"moshiyoudian-2\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'moshiyoudian-2')\"\u003EÂ¶\u003C\u002Fa\u003E æ¨¡å¼ä¼˜ç‚¹\u003C\u002Fh5\u003E\n\u003Cul\u003E\n\u003Cli\u003Eæ—¶é—´ä¸Šè¿›è¡Œäº†è§£è€¦ã€‚\u003C\u002Fli\u003E\n\u003Cli\u003Eå¯¹è±¡ä¹‹é—´è¿›è¡Œäº†è§£è€¦ã€‚\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch5 id=\"moshiquedian-2\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'moshiquedian-2')\"\u003EÂ¶\u003C\u002Fa\u003E æ¨¡å¼ç¼ºç‚¹\u003C\u002Fh5\u003E\n\u003Cul\u003E\n\u003Cli\u003Eéœ€è¦é¢å¤–æ¶ˆè€—ä¸€å®šçš„æ—¶é—´å’Œå†…å­˜ã€‚\u003C\u002Fli\u003E\n\u003Cli\u003Eå½“è®¢é˜…ä¸€ä¸ªæ¶ˆæ¯åï¼Œå¦‚æœè¿™ä¸ªæ¶ˆæ¯æœ€åéƒ½æœªå‘ç”Ÿï¼Œè¿™ä¸ªè®¢é˜…è€…å´ä¼šä¸€ç›´å­˜åœ¨äºå†…å­˜å½“ä¸­ã€‚\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Chr\u003E\n\u003Ch2 id=\"minglingmoshi\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'minglingmoshi')\"\u003EÂ¶\u003C\u002Fa\u003E å‘½ä»¤æ¨¡å¼\u003C\u002Fh2\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003Eå°†ä¸€ä¸ªè¯·æ±‚å°è£…ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œä»è€Œä½¿ä½ å¯ç”¨ä¸åŒçš„è¯·æ±‚å¯¹å®¢æˆ·è¿›è¡Œå‚æ•°åŒ–ï¼Œå¯¹è¯·æ±‚æ’é˜Ÿæˆ–è®°å½•è¯·æ±‚æ—¥å¿—ï¼Œä»¥åŠæ”¯æŒå¯æ’¤é”€çš„æ“ä½œã€‚\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003Eä»ä»£ç ç»“æ„åˆ†æå‘½ä»¤æ¨¡å¼ï¼Œå…¶å®å®ƒä¸ç­–ç•¥æ¨¡å¼å¾ˆç±»ä¼¼ï¼Œéƒ½å®šä¹‰ä¸€ç³»åˆ—çš„ç®—æ³•ï¼ŒæŠŠå®ƒä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥ï¼Œå†æ ¹æ®å®é™…çš„ç±»å‹å»è°ƒç”¨å®ƒä»¬ã€‚ä½†æ˜¯ä»è¡Œä¸ºåˆ†æä¼šå‘ç°å®ƒä»¬å¤§å¤§ä¸åŒï¼Œå‘½ä»¤æ¨¡å¼ä¼šå°†æ‰€æœ‰å‘å‡ºçš„å‘½ä»¤æ”¶é›†åˆ°ä¸€ä¸ªå‘½ä»¤é˜Ÿåˆ—ï¼Œè®°å½•äº†è¿™äº›å‘½ä»¤çš„æ‰§è¡Œç±»å‹å’Œé¡ºåºï¼Œå¿…è¦æ—¶å¯å¯¹æŒ‡å®šå‘½ä»¤æ‰§è¡Œæ’¤é”€æ“ä½œæˆ–è€…å¯¹æ•´ä¸ªå‘½ä»¤é˜Ÿåˆ—è¿›è¡Œé‡æ”¾ç­‰ã€‚\u003C\u002Fp\u003E\n\u003Cp\u003Eä¸‹é¢æ˜¯ä¸€ä¸ªå…¸å‹çš„ç¼–è¾‘å™¨ä¾‹å­ï¼š\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003Eclass TextEditor {\n  constructor() {}\n  copy() {\n    console.log('editor copy!');\n    \u002F\u002F do some stuff...\n  }\n  paste() {\n    console.log('editor paste!');\n    \u002F\u002F do some stuff...\n  }\n  delete() {\n    console.log('editor delete!');\n    \u002F\u002F do some stuff...\n  }\n  insert() {\n    console.log('editor insert!');\n    \u002F\u002F do some stuff...\n  }\n}\n\nclass CommandCollector {\n  constructor(commandList = []) {\n    this.commandList = commandList;\n  }\n  add(command) {\n    this.commandList.push(command);\n  }\n  execute() {\n    this.commandList.forEach(command =&gt; command.execute());\n  }\n}\n\nfunction noop() {}\n\nclass Command {\n  constructor(receiver = {}, commandType) {\n    this.receiver = receiver;\n    this.callback = receiver[commandType] || noop;\n  }\n  execute(...args) {\n    this.callback(...args);\n  }\n}\n\nconst editor = new TextEditor();\nconst commandCollector = new CommandCollector();\nconst commands = ['copy', 'paste', 'delete', 'insert'];\n\ncommands.forEach(commandType =&gt; {\n  const command = new Command(editor, commandType);\n  command.execute(); \u002F\u002F editor copy!\n  \u002F\u002F editor paste!\n  \u002F\u002F editor delete!\n  \u002F\u002F editor insert!\n  commandCollector.add(command);\n});\n\n\u002F\u002F é‡æ’­å‘½ä»¤\ncommandCollector.execute(); \u002F\u002F editor copy!\n\u002F\u002F editor paste!\n\u002F\u002F editor delete!\n\u002F\u002F editor insert!\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Chr\u003E\n\u003Ch2 id=\"zuhemoshi\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'zuhemoshi')\"\u003EÂ¶\u003C\u002Fa\u003E ç»„åˆæ¨¡å¼\u003C\u002Fh2\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003Eå°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤ºã€Œéƒ¨åˆ†-æ•´ä½“ã€çš„å±‚æ¬¡ç»“æ„ï¼Œä½¿å¾—ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§ã€‚\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003Eä»ä¸Šé¢çš„å®šä¹‰å¯ä»¥çŸ¥é“ç»„åˆæ¨¡å¼çš„ä¸¤ä¸ªç‰¹ç‚¹ï¼š\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E\u003Cstrong\u003Eè¡¨ç¤ºæ ‘å½¢ç»“æ„\u003C\u002Fstrong\u003Eã€‚ç»„åˆæ¨¡å¼çš„ã€Œç»„åˆå¯¹è±¡ã€ç”±ã€Œå¶å¯¹è±¡ã€ç»„æˆï¼Œå½¢æˆä¸€ç§ç‰¹æ®Šçš„æ ‘å½¢ç»“æ„ï¼Œå¹¶æä¾›äº†ä¸€ç§éå†æ ‘å½¢ç»“æ„çš„æ–¹æ¡ˆï¼Œé€šè¿‡è°ƒç”¨ç»„åˆå¯¹è±¡çš„æŒ‡å®šæ–¹æ³•ï¼Œé€’å½’è°ƒç”¨ä¸‹æ¸¸ã€Œå¶å¯¹è±¡ã€åŒåæ–¹æ³•ã€‚\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cstrong\u003Eåˆ©ç”¨å¯¹è±¡å¤šæ€ç»Ÿä¸€å¯¹å¾…ç»„åˆå¯¹è±¡å’Œå•ä¸€å¯¹è±¡\u003C\u002Fstrong\u003Eã€‚åˆ©ç”¨å¯¹è±¡çš„å¤šæ€è¡¨ç°ï¼Œå¯ä»¥ä½¿å®¢æˆ·ç«¯å¿½ç•¥ç»„åˆå¯¹è±¡å’Œå¶å¯¹è±¡çš„ä¸åŒã€‚åœ¨ç»„åˆæ¨¡å¼ä¸­ï¼Œå®¢æˆ·å°†ç»Ÿä¸€åœ°ä½¿ç”¨ç»„åˆç»“æ„ä¸­çš„æ‰€æœ‰å¯¹è±¡ï¼Œè€Œä¸éœ€è¦å…³å¿ƒå®ƒæ˜¯ç»„åˆå¯¹è±¡è¿˜æ˜¯å¶å¯¹è±¡ã€‚\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cpre  class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n             â”‚ Composite â”‚ \u002F\u002F ç»„åˆå¯¹è±¡\n             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                   â–²\n      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n      â”‚            â”‚            â”‚\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚   leaf    â”‚â”‚   leaf    â”‚â”‚ Composite â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                â–²\n                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                   â”‚            â”‚            â”‚\n             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n             â”‚   leaf    â”‚â”‚   leaf    â”‚â”‚   leaf    â”‚ \u002F\u002F å¶å¯¹è±¡\n             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eå…³é”®çš„ä¸€ç‚¹å°±æ˜¯ã€Œç»„åˆå¯¹è±¡ã€å’Œã€Œå¶å¯¹è±¡ã€å…·æœ‰ç»Ÿä¸€çš„æ¥å£ï¼Œå¹¶ä¸”ã€Œç»„åˆå¯¹è±¡ã€ç”±ã€Œå¶å¯¹è±¡ã€ç»„æˆï¼Œä¸‹é¢æ˜¯å®ç°æ–¹å¼ã€‚\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003Eclass Composite {\n  constructor(leavesMap = []) {\n    if (new.target === Composite) {\n      this.leavesMap = leavesMap;\n    }\n  }\n  add(leaf) {\n    this.leavesMap.push(leaf);\n  }\n  execute() {\n    this.leavesMap.forEach(leaf =&gt; leaf.execute());\n  }\n}\n\nfunction noop() {}\n\nclass Leaf extends Composite {\n  constructor(callback = noop) {\n    super();\n    this.callback = callback;\n  }\n  add() {\n    throw new Error('å¶å¯¹è±¡ä¸èƒ½æ·»åŠ å­ç»“ç‚¹'); \u002F\u002F ç»Ÿä¸€æ¥å£ï¼Œä½†éœ€è¦é™åˆ¶å¶ç»“ç‚¹ä¸èƒ½è°ƒç”¨ add æ–¹æ³•\n  }\n  execute() {\n    this.callback();\n  }\n}\n\n\u002F\u002F ä½¿ç”¨ç»„åˆæ¨¡å¼è¡¨ç¤ºä¸Šå›¾çš„æ ‘å½¢ç»“æ„\nconst com1 = new Composite();\nconst leaf1 = new Leaf(() =&gt; {\n  console.log('leaf1 execute!');\n});\nconst leaf2 = new Leaf(() =&gt; {\n  console.log('leaf2 execute!');\n});\nconst com2 = new Composite();\nconst leaf3 = new Leaf(() =&gt; {\n  console.log('leaf3 execute!');\n});\nconst leaf4 = new Leaf(() =&gt; {\n  console.log('leaf4 execute!');\n});\nconst leaf5 = new Leaf(() =&gt; {\n  console.log('leaf5 execute!');\n});\n\ncom1.add(leaf1);\ncom1.add(leaf2);\ncom1.add(com2);\ncom2.add(leaf3);\ncom2.add(leaf4);\ncom2.add(leaf5);\n\ncom1.execute(); \u002F\u002F leaf1 execute!\n\u002F\u002F leaf2 execute!\n\u002F\u002F leaf3 execute!\n\u002F\u002F leaf4 execute!\n\u002F\u002F leaf5 execute!\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Chr\u003E\n\u003Ch2 id=\"mobanfangfamoshi\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'mobanfangfamoshi')\"\u003EÂ¶\u003C\u002Fa\u003E æ¨¡æ¿æ–¹æ³•æ¨¡å¼\u003C\u002Fh2\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003Eå®šä¹‰ä¸€ä¸ªæ“ä½œä¸­çš„ç®—æ³•çš„éª¨æ¶ï¼Œè€Œå°†ä¸€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­ï¼Œä½¿å¾—å­ç±»å¯ä»¥ä¸æ”¹å˜ä¸€ä¸ªç®—æ³•çš„ç»“æ„å³å¯é‡æ–°å®šä¹‰è¯¥ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤ã€‚\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003Eæ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„ä¸»è¦æ€æƒ³æ˜¯ï¼Œå®šä¹‰ä¸€ä¸ªæ“ä½œçš„ä¸€ç³»åˆ—æ­¥éª¤ï¼Œå¯¹äºæŸäº›æš‚æ—¶ç¡®å®šä¸ä¸‹æ¥çš„æ­¥éª¤ï¼Œå°±ç•™ç»™å­ç±»å»å®ç°ï¼Œä¹Ÿå³ï¼š\u003Cstrong\u003Eçˆ¶ç±»å®šä¹‰éª¨æ¶ï¼Œå­ç±»å®ç°æŸäº›ç»†èŠ‚\u003C\u002Fstrong\u003Eã€‚ç”±æ­¤å¯çŸ¥æ­¤æ¨¡å¼ä¸»è¦ç”±ä¸¤éƒ¨åˆ†ç»“æ„æ„æˆï¼š\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E\u003Cstrong\u003EæŠ½è±¡çˆ¶ç±»\u003C\u002Fstrong\u003Eã€‚é€šå¸¸åœ¨æŠ½è±¡çˆ¶ç±»ä¸­å°è£…äº†å­ç±»çš„ç®—æ³•æ¡†æ¶ï¼ŒåŒ…æ‹¬å®ç°äº†ä¸€äº›å…¬å…±æ–¹æ³•ä»¥åŠå°è£…å­ç±»ä¸­æ‰€æœ‰æ–¹æ³•çš„æ‰§è¡Œé¡ºåºã€‚\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cstrong\u003Eå…·ä½“çš„å®ç°å­ç±»\u003C\u002Fstrong\u003Eã€‚å­ç±»é€šè¿‡ç»§æ‰¿æŠ½è±¡çˆ¶ç±»çš„æ–¹å¼ç»§æ‰¿æ•´ä¸ªç®—æ³•æ¡†æ¶ï¼Œå¹¶ä¸”å¯é‡å†™é™¤å…¬å…±æ–¹æ³•ä»¥å¤–çš„çˆ¶ç±»æ–¹æ³•ã€‚\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003Eä¼ ç»Ÿ OOP æŠ½è±¡ç±»çš„ä¸»è¦ä½œç”¨æ˜¯ä¸ºå®ƒçš„å­ç±»å®šä¹‰å…¬å…±æ¥å£ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ JavaScript ä¸å­˜åœ¨æŠ½è±¡ç±»çš„æ¦‚å¿µï¼ˆTypescript å®ç°äº†ï¼‰ï¼Œæ‰€ä»¥æ²¡æœ‰åŠæ³•ä»è¯­è¨€å±‚é¢å»å¼ºåˆ¶å­ç±»é‡å†™ä¸€äº›ç»†èŠ‚æ–¹æ³•ã€‚å› æ­¤ï¼Œå¿…é¡»ä½¿ç”¨åœ¨çˆ¶ç±»çš„ç»†èŠ‚æ–¹æ³•å®šä¹‰é‡Œä»¥æŠ›å‡ºå¼‚å¸¸çš„æ–¹å¼å»å¼ºåˆ¶å­ç±»é‡å†™ç»†èŠ‚æ–¹æ³•ã€‚\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003Eclass SuperClass {\n  \u002F\u002F å…¬å…±æ–¹æ³•\n  stepStart() {\n    console.log('start');\n  }\n  \u002F\u002F ç»†èŠ‚æ–¹æ³•\n  stepSecond() {\n    throw new Error('å­ç±»å¿…é¡»é‡å†™ stepSecond æ–¹æ³•');\n  }\n  \u002F\u002F ç»†èŠ‚æ–¹æ³•\n  stepThird() {\n    throw new Error('å­ç±»å¿…é¡»é‡å†™ stepThird æ–¹æ³•');\n  }\n  \u002F\u002F å…¬å…±æ–¹æ³•\n  stepEnd() {\n    console.log('end');\n  }\n  \u002F\u002F å®šä¹‰ç®—æ³•\n  run() {\n    this.stepStart();\n    this.stepSecond();\n    this.stepThird();\n    this.stepEnd();\n  }\n}\n\nclass SubClassA extends SuperClass {\n  constructor() {\n    super();\n  }\n  \u002F\u002F é‡å†™ç»†èŠ‚æ–¹æ³•\n  stepSecond() {\n    console.log('subClassA step second');\n  }\n  \u002F\u002F é‡å†™ç»†èŠ‚æ–¹æ³•\n  stepThird() {\n    console.log('subClassA step third');\n  }\n}\n\nclass SubClassB extends SuperClass {\n  constructor() {\n    super();\n  }\n  \u002F\u002F é‡å†™ç»†èŠ‚æ–¹æ³•\n  stepSecond() {\n    console.log('subClassB step second');\n  }\n  \u002F\u002F é‡å†™ç»†èŠ‚æ–¹æ³•\n  stepThird() {\n    console.log('subClassB step third');\n  }\n}\n\nconst subA = new SubClassA();\nsubA.run(); \u002F\u002F start\n\u002F\u002F subClassA step second\n\u002F\u002F subClassA step third\n\u002F\u002F end\n\nconst subB = new SubClassB();\nsubB.run(); \u002F\u002F start\n\u002F\u002F subClassA step second\n\u002F\u002F subClassA step third\n\u002F\u002F end\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Chr\u003E\n\u003Ch2 id=\"xiangyuanmoshi\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'xiangyuanmoshi')\"\u003EÂ¶\u003C\u002Fa\u003E äº«å…ƒæ¨¡å¼\u003C\u002Fh2\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003Eè¿ç”¨å…±äº«æŠ€æœ¯æœ‰æ•ˆåœ°æ”¯æŒå¤§é‡ç»†ç²’åº¦çš„å¯¹è±¡ã€‚\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003Eäº«å…ƒæ¨¡å¼ï¼ˆFlyweightï¼‰æ˜¯ä¸€ç§æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆï¼Œå½“ç¨‹åºä¸­éœ€è¦ç”¨åˆ°å¤§é‡ç›¸ä¼¼çš„å¯¹è±¡ï¼Œè€Œè¿™äº›å¯¹è±¡åˆå¯ä»¥åŒºåˆ†å‡ºã€Œå†…éƒ¨çŠ¶æ€ã€å’Œã€Œå¤–éƒ¨çŠ¶æ€ã€çš„æ—¶å€™ï¼Œå°±å¯ä»¥ä½¿ç”¨äº«å…ƒæ¨¡å¼æ¥å…±äº«å•ä¸€å®ä¾‹ã€‚åœ¨å®é™…ä½¿ç”¨å…·ä½“å¯¹è±¡çš„æ—¶å€™ï¼Œé€šè¿‡å°†ã€Œå¤–éƒ¨çŠ¶æ€ã€ä¸å•ä¸€å®ä¾‹è¿›è¡Œå®æ—¶ç»„è£…ï¼Œä»è€Œè·å¾—çŸ­æš‚å¯ç”¨çš„ç›®æ ‡å¯¹è±¡ï¼Œåœ¨ä½¿ç”¨å®Œç›®æ ‡å¯¹è±¡åå†è¿˜åŸæˆåŸæ¥çš„å•ä¸€å®ä¾‹ï¼ˆè§†å®é™…æƒ…å†µï¼‰ã€‚\u003C\u002Fp\u003E\n\u003Cp\u003Eå…·ä½“æ¥è¯´ï¼Œåˆ¤æ–­ä¸€ä¸ªä¸šåŠ¡åœºæ™¯æ—¶å€™é€‚åˆä½¿ç”¨äº«å…ƒæ¨¡å¼æ¥è¿›è¡Œä¼˜åŒ–ï¼Œä¸€èˆ¬éœ€è¦æ»¡è¶³ä»¥ä¸‹å‡ ç‚¹ï¼š\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003Eä¸€ä¸ªç¨‹åºä¸­ä½¿ç”¨äº†å¤§é‡ç›¸ä¼¼çš„å¯¹è±¡ã€‚\u003C\u002Fli\u003E\n\u003Cli\u003Eç”±äºä½¿ç”¨äº†å¤§é‡å¯¹è±¡ï¼Œé€ æˆå¾ˆå¤§çš„å†…å­˜å¼€é”€ã€‚\u003C\u002Fli\u003E\n\u003Cli\u003Eå¯¹è±¡çš„å¤§å¤šæ•°çŠ¶æ€å¯ä»¥å˜ä¸ºå¤–éƒ¨çŠ¶æ€ã€‚\u003C\u002Fli\u003E\n\u003Cli\u003Eå‰¥ç¦»å‡ºå¯¹è±¡çš„å¤–éƒ¨çŠ¶æ€ä¹‹åï¼Œå¯ä»¥ç”¨ç›¸å¯¹è¾ƒå°‘çš„å…±äº«å¯¹è±¡å–ä»£å¤§é‡å¯¹è±¡ã€‚\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003Eä¸‹é¢æ˜¯ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ åŠŸèƒ½çš„ä¾‹å­ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸Šä¼ åŠŸèƒ½å…·æœ‰å¤šä¸ªä¸Šä¼ ç±»å‹ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©ä¸åŒçš„ä¸Šä¼ ç±»å‹ã€‚\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003Eclass Upload {\n  constructor(uploadType) {\n    this.uploadType = uploadType;\n  }\n  delFile(id) {\n    uploadManager.setExternalState(id, this);\n    if (this.fileSize &lt; 3000) {\n      return this.dom.parentNode.removeChild(this.dom);\n    }\n    if (window.confirm(`Are sure to delete this file: ${this.dom}?`)) {\n      return this.dom.parentNode.removeChild(this.dom);\n    }\n  }\n}\n\nconst UploadFactory = {\n  createdFlyweightObjs: {},\n  create(uploadType) {\n    if (this.createdFlyweightObjs[uploadType]) {\n      return this.createdFlyweightObjs[uploadType];\n    }\n    return (this.createdFlyweightObjs[uploadType] = new Upload(uploadType));\n  },\n};\n\nconst UploadManager = {\n  uploadDatabase: {},\n  add(id, uploadType, filename, fileSize) {\n    const flyweightObj = UploadFactory.create(uploadType);\n    const dom = document.createElement('div');\n    dom.innerHTML = `&lt;span&gt;File name: ${filename},File size: ${fileSize}&lt;\u002Fspan&gt;\n    &lt;button class=&quot;delFile&quot;&gt;Delete&lt;\u002Fbutton&gt;`;\n    document.querySelector('.delFile').onclick = () =&gt; flyweightObj.delFile(id);\n    document.body.appendChild(dom);\n    uploadDatabase[id] = { filename, fileSize, dom };\n    return flyweightObj;\n  },\n  setExternalState(id, flyweightObj) {\n    const uploadData = this.database[id];\n    for (let key in uploadData) {\n      flyweightObj[key] = uploadData[key];\n    }\n  }\n};\n\n\u002F\u002F ä½¿ç”¨\nlet id = 0;\nconst startUpload = (uploadType, files) =&gt; {\n  for(let i = 0, file; file = files[i++]) {\n    uploadManager.add(++id, uploadType, file.filename, file.fileSize);\n  }\n}\n\nstartUpload('plugin', [{\n  filename: '1.txt',\n  fileSize: 1000,\n},{\n  filename: '2.txt',\n  fileSize: 3000,\n},{\n  filename: '3.txt',\n  fileSize: 5000,\n}]);\n\nstartUpload('flash', [{\n  filename: '4.txt',\n  fileSize: 1000,\n},{\n  filename: '5.txt',\n  fileSize: 3000,\n},{\n  filename: '6.txt',\n  fileSize: 5000,\n}]);\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eå¯¹äºä½¿ç”¨å¤§é‡ç›¸ä¼¼å¯¹è±¡è¿˜æœ‰ä¸€ç§ä¸äº«å…ƒæ¨¡å¼ç±»ä¼¼çš„ä¼˜åŒ–æ–¹æ¡ˆï¼Œå®ƒå°±æ˜¯ã€Œå¯¹è±¡æ± ã€ã€‚å¯¹è±¡æ± ç»´æŠ¤äº†ä¸€ä¸ªè£…è½½ç©ºé—²å¯¹è±¡çš„æ± å­ï¼Œå¦‚æœéœ€è¦å¯¹è±¡çš„æ—¶å€™ï¼Œä¸æ˜¯ç›´æ¥åˆ›å»ºæ–°å¯¹è±¡ï¼Œè€Œæ˜¯å…ˆä»å¯¹è±¡æ± é‡Œè·å–ï¼Œå¦‚æœå¯¹è±¡æ± é‡Œæ²¡æœ‰ç©ºé—²å¯¹è±¡ï¼Œå†å»åˆ›å»ºæ–°å¯¹è±¡ï¼Œå½“åˆ›å»ºçš„æ–°å¯¹è±¡å®Œæˆäº†å®ƒçš„èŒè´£ä¹‹åï¼Œå†æ”¾å…¥å¯¹è±¡æ± ç­‰å¾…è¢«ä¸‹æ¬¡è·å–ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹è±¡æ± æ²¡æœ‰åˆ†ç¦»å†…éƒ¨çŠ¶æ€å’Œå¤–éƒ¨çŠ¶æ€ã€‚\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003Efunction noop() {\n  return {};\n}\n\nclass ObjectPool {\n  constructor(creator = noop, pool = []) {\n    this.pool = pool;\n    this.creator = creator;\n  }\n  getObject(...args) {\n    return this.pool.shift() || this.creator(...args);\n  }\n  recoverObject(poolItem) {\n    this.pool.push(poolItem);\n  }\n}\n\nfunction createIframe() {\n  const iframe = document.createElement('iframe');\n  document.body.appendChild(iframe);\n\n  iframe.onload = () =&gt; {\n    iframe.onload = null;\n    iframePool.recoverObject(iframe); \u002F\u002F åŠ è½½å®Œæˆåå›æ”¶\n  };\n\n  return iframe;\n}\n\nconst iframePool = new ObjectPool(createIframe);\n\nconst iframe1 = iframePool.getObject();\niframe1.src = 'https:\u002F\u002Flkangd.com\u002F';\n\nconst iframe2 = iframePool.getObject();\niframe2.src = 'https:\u002F\u002Fgithub.com\u002F';\n\nsetTimeout(() =&gt; {\n  const iframe3 = iframePool.getObject();\n  iframe3.src = 'https:\u002F\u002Fgoogle.com\u002F';\n}, 3000);\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Chr\u003E\n\u003Ch2 id=\"zhizelianmoshi\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'zhizelianmoshi')\"\u003EÂ¶\u003C\u002Fa\u003E èŒè´£é“¾æ¨¡å¼\u003C\u002Fh2\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003Eä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œä»è€Œé¿å…è¯·æ±‚çš„å‘é€è€…å’Œæ¥å—è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ã€‚å°†è¿™äº›å¯¹è±¡ç‚¼æˆä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾ä¼ é€’æ”¹è¯·æ±‚ï¼ŒçŸ¥é“æœ‰ä¸€ä¸ªå¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ã€‚\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003Eè´£ä»»é“¾æ¨¡å¼ï¼ˆChain of Responsibilityï¼‰æ˜¯ä¸€ç§å¤„ç†è¯·æ±‚çš„æ¨¡å¼ï¼Œå®ƒè®©å¤šä¸ªå¤„ç†å™¨éƒ½æœ‰æœºä¼šå¤„ç†è¯¥è¯·æ±‚ï¼Œç›´åˆ°å…¶ä¸­æŸä¸ªå¤„ç†æˆåŠŸä¸ºæ­¢ã€‚è´£ä»»é“¾æ¨¡å¼æŠŠå¤šä¸ªå¤„ç†å™¨ä¸²æˆé“¾ï¼Œç„¶åè®©è¯·æ±‚åœ¨é“¾ä¸Šä¼ é€’ã€‚\u003C\u002Fp\u003E\n\u003Cp\u003EèŒè´£é“¾æ¨¡å¼çš„æœ€å¤§ä¼˜ç‚¹ï¼šè¯·æ±‚å‘é€è€…åªéœ€è¦çŸ¥é“é“¾ä¸­çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä»è€Œå¼±åŒ–äº†å‘é€è€…å’Œä¸€ç»„æ¥å—è€…ä¹‹é—´çš„å¼ºè”ç³»ã€‚\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n     â”‚ Request â”‚\n     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n          â”‚\nâ”Œ â”€ â”€ â”€ â”€ â”¼ â”€ â”€ â”€ â”€ â” â”€ â”€ â”€ â”€â”\n          â–¼\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚        â”‚\n   â”‚ ProcessorA  â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚        â”‚\n          â”‚\nâ”‚         â–¼         â”‚        â”‚\n   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  â”‚ ProcessorB  â”‚  â”‚   HandlerChain\n   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\nâ”‚         â”‚         â”‚        â”‚\n          â–¼\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚        â”‚\n   â”‚ ProcessorC  â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚        â”‚\n          â”‚\nâ”” â”€ â”€ â”€ â”€ â”¼ â”€ â”€ â”€ â”€ â”˜ â”€ â”€ â”€ â”€â”˜\n          â”‚\n          â–¼\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eä½¿ç”¨ä»£ç ç°å®ä¸Šå›¾ã€‚\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003Eclass Request {\n  constructor(amount = 0) {\n    this.amount = amount;\n  }\n  getAmount() {\n    return this.amount;\n  }\n}\n\nclass HandlerChain {\n  constructor(handlers = []) {\n    this.handlers = [];\n  }\n  addHandler(handler) {\n    this.handlers.push(handler);\n  }\n  process(...args) {\n    for (let i = 0, handler; (handler = this.handlers[i++]); ) {\n      const result = handler.process(...args);\n      if (result !== null) {\n        return result;\n      }\n    }\n    throw new Error(`Could not handle request: ${args}`);\n  }\n}\n\nclass ProcessorA {\n  constructor() {}\n  process(request) {\n    if (request.getAmount() &gt; 1000) return null; \u002F\u002F è®¾ç½®èŒè´£é—¨æ§›\n    console.log('ProcessorA success!');\n  }\n}\nclass ProcessorB {\n  constructor() {}\n  process(request) {\n    if (request.getAmount() &gt; 2000) return null; \u002F\u002F è®¾ç½®èŒè´£é—¨æ§›\n    console.log('ProcessorB success!');\n  }\n}\nclass ProcessorC {\n  constructor() {}\n  process(request) {\n    if (request.getAmount() &gt; 3000) return null; \u002F\u002F è®¾ç½®èŒè´£é—¨æ§›\n    console.log('ProcessorC success!');\n  }\n}\n\n\u002F\u002F ä½¿ç”¨\nconst chain = new HandlerChain();\n\u002F\u002F è®¾ç½®èŒè´£é“¾ï¼Œæ³¨æ„é¡ºåº\nchain.addHandler(new ProcessorA());\nchain.addHandler(new ProcessorB());\nchain.addHandler(new ProcessorC());\n\nconst req1 = new Request(999);\nconst req2 = new Request(1999);\nconst req3 = new Request(2999);\nconst req4 = new Request(3001); \u002F\u002F è¶…å‡ºèŒè´£èŒƒå›´\n\nchain.process(req1); \u002F\u002F ProcessorA success!\nchain.process(req2); \u002F\u002F ProcessorB success!\nchain.process(req3); \u002F\u002F ProcessorC success!\nchain.process(req4); \u002F\u002F Uncaught Error: Could not handle request: [object Object]\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Chr\u003E\n\u003Ch2 id=\"zhongjiezhemoshi\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'zhongjiezhemoshi')\"\u003EÂ¶\u003C\u002Fa\u003E ä¸­ä»‹è€…æ¨¡å¼\u003C\u002Fh2\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003Eç”¨ä¸€ä¸ªä¸­ä»‹å¯¹è±¡æ¥å°è£…ä¸€ç³»åˆ—çš„å¯¹è±¡äº¤äº’ã€‚ä¸­ä»‹è€…ä½¿å„ä¸ªå¯¹è±¡ä¸éœ€è¦æ˜¾å¼åœ°ç›¸äº’ä½œç”¨ï¼Œä»è€Œä½¿å…¶è€¦åˆæ¾æ•£ï¼Œè€Œä¸”å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜ä»–ä»¬ä¹‹é—´çš„äº¤äº’ã€‚\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003Eä¸­ä»‹è€…æ¨¡å¼ï¼ˆMediatorï¼‰çš„ä½œç”¨æ˜¯è§£é™¤å¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´çš„ç´§è€¦åˆå…³ç³»ã€‚å¢åŠ ä¸€ä¸ªä¸­ä»‹è€…å¯¹è±¡åï¼Œæ‰€æœ‰çš„ç›¸å…³å¯¹è±¡éƒ½é€šè¿‡ä¸­ä»‹è€…å¯¹è±¡æ¥é€šä¿¡ï¼Œè€Œä¸æ˜¯ç›¸äº’ä½œç”¨ï¼Œæ‰€ä»¥å½“ä¸€ä¸ªå¯¹è±¡å‘ç”Ÿæ”¹å˜æ—¶ï¼Œåªéœ€è¦é€šçŸ¥ä¸­ä»‹è€…å³å¯ã€‚\u003C\u002Fp\u003E\n\u003Cp\u003Eä½¿ç”¨ä¸­ä»‹è€…ä¹‹å‰å¯¹è±¡é—´ç›¸äº’å½±å“ã€‚\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003Eâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚        A        â”‚&lt;â”€â”€â”€&gt;â”‚        B        â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â–² â–²                     â–²\n         â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\n         â–¼                       â”‚\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚        C        â”‚&lt;â”€â”€â”€â”€â”‚        D        â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eä½¿ç”¨ä¸­ä»‹è€…åå¯¹è±¡åªä¸ä¸­ä»‹è€…äº¤äº’ï¼Œä»è€Œè§£é™¤äº†å¯¹è±¡é—´çš„å¼ºè€¦åˆå…³ç³»ã€‚\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n     â”Œâ”€â”€â”€â”€â”€&gt;â”‚        A        â”‚\n     â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n     â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n     â”‚ â”Œâ”€â”€â”€&gt;â”‚        B        â”‚\n     â–¼ â–¼    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  ä¸­ä»‹è€…  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n     â–² â–²    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n     â”‚ â””â”€â”€â”€&gt;â”‚        C        â”‚\n     â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n     â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n     â””â”€â”€â”€â”€â”€&gt;â”‚        D        â”‚\n            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eä½¿ç”¨ä»£ç ç°å®ä¸Šå›¾ã€‚\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003E\u002F\u002F ä½¿ç”¨ä¸­ä»‹è€…æ¨¡å¼å‰\nclass Node {\n  constructor(status = true, influenceNodes = []) {\n    this.status = status;\n    this.influenceNodes = influenceNodes;\n  }\n  addInfluence(node) {\n    this.influenceNodes.push(node);\n  }\n  change(status) {\n    const newStatus = status === undefined ? !this.status : status;\n    this.status = newStatus;\n    this.influenceNodes.forEach(node =&gt; (node.status = !newStatus));\n  }\n}\n\nconst A = new Node(false);\nconst B = new Node();\nconst C = new Node();\nconst D = new Node();\n\n\u002F\u002F A å½±å“ B, C\nA.addInfluence(B);\nA.addInfluence(C);\n\u002F\u002F B å½±å“ A\nB.addInfluence(A);\n\u002F\u002F C å½±å“ A\nC.addInfluence(A);\n\u002F\u002F D å½±å“ A, B, C\nD.addInfluence(A);\nD.addInfluence(B);\nD.addInfluence(C);\n\nA.change();\nconsole.log(A.status, B.status, C.status, D.status); \u002F\u002F true, false, false, true\n\nD.change();\nconsole.log(A.status, B.status, C.status, D.status); \u002F\u002F true, true, true, false\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003E\u002F\u002F å¼•å…¥ä¸­ä»‹è€…\nclass Node {\n  constructor(type, status = true) {\n    this.status = status;\n    this.type = type;\n  }\n  change(status) {\n    const newStatus = status === undefined ? !this.status : status;\n    this.status = newStatus;\n  }\n}\n\nconst A = new Node('A', false);\nconst B = new Node('B');\nconst C = new Node('C');\nconst D = new Node('D');\n\n\u002F\u002F å°†å¯¹è±¡é—´å½±å“çš„é€»è¾‘å°è£…åˆ°ä¸­ä»‹è€…\nconst mediator = function(node) {\n  const newStatus = !node.status;\n  switch (node.type) {\n    case 'A': \u002F\u002F A å½±å“ B, C\n      B.change(newStatus);\n      C.change(newStatus);\n      break;\n    case 'B': \u002F\u002F B å½±å“ A\n      A.change(newStatus);\n      break;\n    case 'C': \u002F\u002F C å½±å“ A\n      A.change(newStatus);\n      break;\n    case 'D': \u002F\u002F D å½±å“ A, B, C\n      A.change(newStatus);\n      B.change(newStatus);\n      C.change(newStatus);\n      break;\n    default:\n      console.log('unsupported type!', node.type);\n  }\n};\n\nA.change();\nmediator(A);\nconsole.log(A.status, B.status, C.status, D.status); \u002F\u002F true, false, false, true\n\nD.change();\nmediator(D);\nconsole.log(A.status, B.status, C.status, D.status); \u002F\u002F true, true, true, false\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Chr\u003E\n\u003Ch2 id=\"zhuangshizhemoshi\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'zhuangshizhemoshi')\"\u003EÂ¶\u003C\u002Fa\u003E è£…é¥°è€…æ¨¡å¼\u003C\u002Fh2\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003Eåœ¨ä¸æ”¹å˜å¯¹è±¡çš„åŸºç¡€ä¸Šï¼ŒåŠ¨æ€åœ°ç»™å¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ã€‚å°±å¢åŠ åŠŸèƒ½è€Œè¨€ï¼Œç›¸æ¯”ç”Ÿæˆå­ç±»æ›´åŠ çµæ´»ã€‚\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003Eè£…é¥°å™¨ï¼ˆDecoratorï¼‰æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³ä¸æµè¡Œçš„ AOPï¼ˆé¢å‘åˆ‡é¢ï¼‰ç¼–ç¨‹æ–¹æ³•è®ºæ˜¯ä¸€è‡´çš„ï¼Œç›®çš„éƒ½æ˜¯ä¸ºäº†åœ¨ä¸æ”¹å˜å¯¹è±¡æœ¬èº«çš„å‰æä¸Šï¼Œåœ¨å¯¹è±¡æ–¹æ³•çš„å‡ºå…¥å£å»æ”¹å˜æ–¹æ³•çš„è¡Œä¸ºã€‚\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003E\u002F\u002F å…¥å£åˆ‡é¢\nFunction.prototype.before = function(beforeFn) {\n  const originFn = this;\n  return function(...args) {\n    beforeFn.apply(this, args);\n    return originFn.apply(this, args);\n  };\n};\n\n\u002F\u002F å‡ºå£åˆ‡é¢\nFunction.prototype.after = function(afterFn) {\n  const originFn = this;\n  return function(...args) {\n    const ret = originFn.apply(this, args);\n    afterFn.call(this, ret);\n    return ret;\n  };\n};\n\nfunction execute(number) {\n  console.log('execute!');\n  return number * number;\n}\n\nexecute(10); \u002F\u002F execute! 100\n\nfunction logBefore(number) {\n  console.log('before fn log, number is:', number);\n}\nfunction logAfter(result) {\n  console.log('after fn log, result is:', result);\n}\n\nexecute.before(logBefore)(10); \u002F\u002F before fn log, number is: 10\n\u002F\u002F execute!\n\nexecute.after(logAfter)(10); \u002F\u002F execute!\n\u002F\u002F after fn log, result is: 100\n\nexecute.before(logBefore).after(logAfter)(10); \u002F\u002F before fn log, number is: 10\n\u002F\u002F execute!\n\u002F\u002F after fn log, result is: 100\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eæœ€æ–°çš„ ES \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Ftc39\u002Fproposal-decorators\" target=\"_blank\"\u003Eææ¡ˆ\u003C\u002Fa\u003E é‡Œå·²ç»å®ç°äº†åŸç”Ÿçš„è£…é¥°å™¨è¯­æ³•ï¼ŒES çš„è£…é¥°å™¨å¯ä»¥å¾ˆä¾¿æ·åœ°ä¿®æ”¹ç±»å’Œç±»æ–¹æ³•çš„è¡Œä¸ºã€‚\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003Efunction log(target, name, descriptor) {\n  const oldValue = descriptor.value;\n\n  descriptor.value = function() {\n    console.log(`Calling ${name} with`, arguments);\n    return oldValue.apply(this, arguments);\n  };\n\n  return descriptor;\n}\n\nclass Math {\n  @log\n  add(a, b) {\n    return a + b;\n  }\n}\n\nconst math = new Math();\n\nmath.add(2, 4); \u002F\u002F Calling add with 2, 4\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Chr\u003E\n\u003Ch2 id=\"zhuangtaimoshi\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'zhuangtaimoshi')\"\u003EÂ¶\u003C\u002Fa\u003E çŠ¶æ€æ¨¡å¼\u003C\u002Fh2\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003Eå…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å®ƒçš„è¡Œä¸ºï¼Œå¯¹è±¡çœ‹èµ·æ¥ä¼¼ä¹ä¿®æ”¹äº†å®ƒçš„ç±»ã€‚\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003EçŠ¶æ€æ¨¡å¼ï¼ˆStateï¼‰ç»å¸¸ç”¨åœ¨å¸¦æœ‰çŠ¶æ€çš„å¯¹è±¡ä¸­ï¼Œå¯ä»¥æŒ‰ä¸¤ä¸ªéƒ¨åˆ†æ¥ç†è§£ä¸Šé¢çš„å®šä¹‰ï¼š\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003Eå°†çŠ¶æ€å°è£…æˆç‹¬ç«‹çš„ç±»ï¼Œå¹¶å°†è¯·æ±‚å§”æ‰˜ç»™å½“å‰çš„çŠ¶æ€å¯¹è±¡ï¼Œå½“å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶ï¼Œä¼šå¸¦æ¥ä¸åŒçš„è¡Œä¸ºå˜åŒ–ã€‚\u003C\u002Fli\u003E\n\u003Cli\u003Eä»å®¢æˆ·çš„è§’åº¦æ¥çœ‹ï¼Œä½¿ç”¨å¯¹è±¡æ—¶ï¼Œåœ¨ä¸åŒçŠ¶æ€ä¸‹å…·æœ‰æˆªç„¶ä¸åŒçš„è¡Œä¸ºï¼Œè¿™ä¸ªå¯¹è±¡çœ‹èµ·æ¥æ˜¯ä»ä¸åŒçš„ç±»ä¸­å®ä¾‹åŒ–è€Œæ¥çš„ï¼Œå®é™…ä¸Šè¿™æ˜¯ä½¿ç”¨äº†å§”æ‰˜çš„æ•ˆæœã€‚\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003Eä¼ ç»Ÿçš„é¢å‘å¯¹è±¡è¯­è¨€çš„çŠ¶æ€æ¨¡å¼å®ç°ä¼šä¸ºæ¯ç§çŠ¶æ€å®šä¹‰ä¸€ä¸ªçŠ¶æ€å­ç±»ï¼Œç„¶ååœ¨ Context ä¸­æŒæœ‰è¿™äº›çŠ¶æ€å¯¹è±¡çš„å¼•ç”¨ï¼Œä»¥ä¾¿æŠŠå½“å‰çŠ¶æ€åˆ‡æ¢ä¸ºå½“å‰çš„çŠ¶æ€å¯¹è±¡ã€‚ä½†åœ¨ JavaScript è¿™ç§â€œæ— ç±»â€è¯­è¨€ä¸­ï¼Œæ²¡æœ‰è§„å®šè®©çŠ¶æ€å¯¹è±¡ä¸€å®šè¦ä»ç±»ä¸­åˆ›å»ºå‡ºæ¥ã€‚å¦å¤–ä¸€ç‚¹ï¼ŒJavaScript å¯ä»¥éå¸¸æ–¹ä¾¿åœ°ä½¿ç”¨å§”æ‰˜æŠ€æœ¯ï¼Œå¹¶ä¸éœ€è¦äº‹å…ˆè®©ä¸€ä¸ªå¯¹è±¡åªæœ‰å¦ä¸€ä¸ªå¯¹è±¡ã€‚ä¸‹é¢æ˜¯ JavaScript å¯¹çŠ¶æ€æ¨¡å¼çš„å®ç°ã€‚\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003E\u002F\u002F ä¸€ä¸ªä½¿ç”¨çŠ¶æ€æ¨¡å¼çš„å¼€å…³ç¯ç¨‹åº\nconst delegate = function(client, delegation) {\n  return {\n    \u002F\u002F å°†å®¢æˆ·çš„æ“ä½œå§”æ‰˜ç»™ delegation å¯¹è±¡\n    buttonWasPressed() {\n      return delegation.buttonWasPressed.apply(client, arguments);\n    },\n  };\n};\n\n\u002F\u002F çŠ¶æ€ç±»å°è£…\nconst FSM = {\n  off: {\n    buttonWasPressed() {\n      console.log('å…³ç¯');\n      this.button.innerHTML = 'ä¸‹ä¸€æ¬¡æŒ‰æˆ‘å°±æ˜¯å¼€ç¯ã€‚';\n      this.currentState = this.onState;\n    },\n  },\n  on: {\n    buttonWasPressed() {\n      console.log('å¼€ç¯');\n      this.button.innerHTML = 'ä¸‹ä¸€æ¬¡æŒ‰æˆ‘å°±æ˜¯å…³ç¯ã€‚';\n      this.currentState = this.offState;\n    },\n  },\n};\n\nclass Light {\n  constructor() {\n    this.offState = delegate(this, FSM.off);\n    this.onState = delegate(this, FSM.on);\n    this.currentState = this.offState; \u002F\u002F è®¾ç½®åˆå§‹çŠ¶æ€ä¸ºå…³é—­çŠ¶æ€\n    this.button = null;\n  }\n  init() {\n    const button = document.createElement('button');\n    button.innerHTML = 'å·²å…³ç¯';\n    this.button = document.body.appendChild(button);\n    this.button.onclick = function() {\n      this.currentState.buttonWasPressed();\n    }.bind(this);\n  }\n}\n\nconst light = new Light();\nlight.init();\n\nlight.button.click(); \u002F\u002F å¼€ç¯\nlight.button.click(); \u002F\u002F å…³ç¯\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch5 id=\"moshiyoudian-3\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'moshiyoudian-3')\"\u003EÂ¶\u003C\u002Fa\u003E æ¨¡å¼ä¼˜ç‚¹\u003C\u002Fh5\u003E\n\u003Cul\u003E\n\u003Cli\u003EçŠ¶æ€æ¨¡å¼å®šä¹‰äº†çŠ¶æ€ä¸è¡Œä¸ºä¹‹é—´çš„å…³ç³»ï¼Œå¹¶å°†å®ƒä»¬å°è£…åœ¨ä¸€ä¸ªç±»é‡Œã€‚é€šè¿‡å¢åŠ æ–°çš„çŠ¶æ€ç±»ï¼Œå¾ˆå®¹æ˜“å¢åŠ æ–°çš„çŠ¶æ€å’Œè½¬æ¢ã€‚\u003C\u002Fli\u003E\n\u003Cli\u003Eé¿å… Context æ— é™è†¨èƒ€ï¼ŒçŠ¶æ€åˆ‡æ¢çš„é€»è¾‘è¢«åˆ†å¸ƒåœ¨çŠ¶æ€ç±»ä¸­ï¼Œä¹Ÿå»æ‰äº† Context ä¸­åŸæœ¬è¿‡äºå¤šçš„æ¡ä»¶åˆ†æ”¯ã€‚\u003C\u002Fli\u003E\n\u003Cli\u003Eç”¨å¯¹è±¡ä»£æ›¿å­—ç¬¦ä¸²è®°å½•å½“å‰çŠ¶æ€ï¼Œæ˜¯çš„çŠ¶æ€çš„åˆ‡æ¢æ›´åŠ ä¸€ç›®äº†ç„¶ã€‚\u003C\u002Fli\u003E\n\u003Cli\u003EContext ä¸­çš„è¯·æ±‚åŠ¨ä½œå’ŒçŠ¶æ€ç±»ä¸­å°è£…çš„è¡Œä¸ºå¯ä»¥éå¸¸å®¹æ˜“åœ°ç‹¬ç«‹å˜åŒ–è€Œä¸å—å½±å“ã€‚\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch5 id=\"moshiquedian-3\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'moshiquedian-3')\"\u003EÂ¶\u003C\u002Fa\u003E æ¨¡å¼ç¼ºç‚¹\u003C\u002Fh5\u003E\n\u003Cul\u003E\n\u003Cli\u003Eå®šä¹‰äº†è®¸å¤šçŠ¶æ€ç±»ï¼Œå› æ­¤ç³»ç»Ÿä¸­ä¼šå¢åŠ ä¸å°‘å¯¹è±¡ã€‚\u003C\u002Fli\u003E\n\u003Cli\u003Eè™½ç„¶é¿å¼€äº†ä¸å—æ¬¢è¿çš„æ¡ä»¶åˆ†æ”¯ï¼Œä½†ä¹Ÿé€ æˆäº†é€»è¾‘æ¾æ•£çš„é—®é¢˜ï¼Œæ— æ³•åœ¨ä¸€ä¸ªåœ°æ–¹å°±çœ‹å‡ºè¿™ä¸ªçŠ¶æ€æœºçš„é€»è¾‘ã€‚\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Chr\u003E\n\u003Ch2 id=\"shipeiqimoshi\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'shipeiqimoshi')\"\u003EÂ¶\u003C\u002Fa\u003E é€‚é…å™¨æ¨¡å¼\u003C\u002Fh2\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003Eå°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦å¤–ä¸€ä¸ªæ¥å£ï¼Œä½¿å¾—åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„é‚£äº›ç±»å¯ä»¥ä¸€èµ·å·¥ä½œã€‚\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003Eé€‚é…å™¨ï¼ˆAdapterï¼‰æ¨¡å¼çš„åˆ«åæ˜¯åŒ…è£…å™¨ï¼ˆwrapperï¼‰ï¼Œæ˜¯ä¸€ä¸ªç›¸å¯¹ç®€å•çš„æ¨¡å¼ï¼Œå®ƒä½œç”¨æ˜¯è§£å†³ä¸¤ä¸ªè½¯ä»¶ä¹‹é—´æ¥å£ä¸å…¼å®¹çš„é—®é¢˜ï¼Œä½¿ç”¨é€‚é…å™¨æ¨¡å¼ä¹‹åï¼ŒåŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½å·¥ä½œçš„ä¸¤ä¸ªè½¯ä»¶å®ä½“å¯ä»¥ä¸€èµ·å·¥ä½œã€‚é€‚é…å™¨æ¨¡å¼æ˜¯ä¸€ç§â€œäº¡ç¾Šè¡¥ç‰¢â€çš„æ¨¡å¼ï¼Œä¸€èˆ¬ä¸ä¼šåœ¨ç¨‹åºè®¾è®¡ä¹‹åˆå°±æ˜¯ç”¨å®ƒã€‚\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003Eclass NormalProcessor {\n  constructor(action) {\n    this.action = action;\n  }\n  show() {\n    console.log('start doing ', this.action);\n  }\n}\n\nconst makeAction = processor =&gt; processor.show(); \u002F\u002F åŸæœ‰é€»è¾‘\nconst processors = [new NormalProcessor('stand'), new NormalProcessor('walk')];\n\nprocessors.forEach(p =&gt; makeAction(p)); \u002F\u002F stand walk\n\n\u002F\u002F éå…¼å®¹æ¥å£\nclass IncompatibleProcessor {\n  constructor(action) {\n    this.action = action;\n  }\n  display() {\n    console.log('start doing ', this.action);\n  }\n}\n\nconst runProcessor = new IncompatibleProcessor('run');\n\nprocessors.push(runProcessor);\nprocessors.forEach(p =&gt; makeAction(p)); \u002F\u002F stand walk Uncaught TypeError: processor.show is not a function\n\n\u002F\u002F ç”Ÿæˆä¸€ä¸ªé€‚é…å™¨å¯¹è±¡\nconst makeAdapter = (originObj, originFnName, adapterFnName) =&gt; {\n  return {\n    [adapterFnName](...args) {\n      return originObj[originFnName](...args);\n    },\n  };\n};\n\nconst runProcessorAdapter = makeAdapter(runProcessor, 'display', 'show');\nprocessors.splice(processors.length - 1, 1, runProcessorAdapter);\nprocessors.forEach(p =&gt; makeAction(p)); \u002F\u002F stand walk run\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Chr\u003E\n\u003Ch2 id=\"jieyan\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'jieyan')\"\u003EÂ¶\u003C\u002Fa\u003E ç»“è¨€\u003C\u002Fh2\u003E\n\u003Cp\u003Eæ‰€æœ‰è®¾è®¡æ¨¡å¼çš„å®ç°éƒ½éµå¾ªä¸€æ¡åŸåˆ™ï¼Œå³â€œæ‰¾å‡ºç¨‹åºä¸­å˜åŒ–çš„åœ°æ–¹ï¼Œå¹¶å°†å˜åŒ–å°è£…èµ·æ¥â€ã€‚ä¸€ä¸ªç¨‹åºçš„è®¾è®¡æ€»æ˜¯å¯ä»¥åˆ†ä¸ºå¯å˜çš„éƒ¨åˆ†å’Œä¸å˜çš„éƒ¨åˆ†ã€‚å½“æˆ‘ä»¬æ‰¾å‡ºå¯å˜çš„éƒ¨åˆ†ï¼Œå¹¶ä¸”æŠŠè¿™äº›éƒ¨åˆ†å°è£…èµ·æ¥ï¼Œé‚£ä¹ˆå‰©ä¸‹çš„å°±æ˜¯ä¸å˜å’Œç¨³å®šçš„éƒ¨åˆ†ã€‚è¿™äº›ä¸å˜å’Œç¨³å®šçš„éƒ¨åˆ†æ˜¯éå¸¸å®¹æ˜“å¤ç”¨çš„ã€‚è¿™ä¹Ÿæ˜¯è®¾è®¡æ¨¡å¼ä¸ºä»€ä¹ˆæå†™çš„æ˜¯å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶åŸºç¡€çš„åŸå› ã€‚\u003C\u002Fp\u003E\n\u003Cp\u003Eå­¦ä¹ è®¾è®¡æ¨¡å¼æ—¶ä¸åº”è¯¥æ ¹æ®æ¨¡å¼çš„åå­—å»è‡†æµ‹è¯¥æ¨¡å¼çš„ä¸€åˆ‡ï¼Œè€Œæ˜¯è¦ç†è§£æ¨¡å¼å…·ä½“èƒ½è§£å†³çš„é—®é¢˜å’Œæ”¹æ¨¡å¼çš„é€‚ç”¨åœºæ™¯ï¼Œæ‰èƒ½é¿å…å¯¹æ¨¡å¼çš„æ»¥ç”¨å’Œè¯¯ç”¨ï¼Œè®©æ¨¡å¼ä¸ºå¼€å‘èµ‹èƒ½ã€‚\u003C\u002Fp\u003E\n\u003Ch4 id=\"cankao\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'cankao')\"\u003EÂ¶\u003C\u002Fa\u003E å‚è€ƒ\u003C\u002Fh4\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fbook.douban.com\u002Fsubject\u002F26382780\u002F\" target=\"_blank\"\u003EJavaScript è®¾è®¡æ¨¡å¼ä¸å¼€å‘å®è·µ\u003C\u002Fa\u003E\u003Cbr\u003E\n\u003Ca href=\"https:\u002F\u002Fbook.douban.com\u002Fsubject\u002F1436745\u002F\" target=\"_blank\"\u003EDesign Patterns\u003C\u002Fa\u003E\u003Cbr\u003E\n\u003Ca href=\"https:\u002F\u002Fwww.liaoxuefeng.com\u002Fwiki\u002F1252599548343744\u002F1264742167474528\" target=\"_blank\"\u003Eè®¾è®¡æ¨¡å¼-å»–é›ªå³°\u003C\u002Fa\u003E\u003Cbr\u003E\n\u003Ca href=\"https:\u002F\u002Fes6.ruanyifeng.com\u002F\" target=\"_blank\"\u003EES6å…¥é—¨æ•™ç¨‹-é˜®ä¸€å³°\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n",bodyBegin:7,frontmatter:"title: Design Patterns In Javascript\ndate: '2019-09-03'\nspoiler: æ€»ç»“å¸¸ç”¨è®¾è®¡æ¨¡å¼åœ¨ Javascript ä¸­çš„å®ç°",link:a,next:{title:"ä½•ä¸ºã€ŒGit Commitã€æœ€ä½³å§¿åŠ¿ï¼Ÿ",date:"2020-05-15",spoiler:"è®©ä½ çš„æ¯ä¸€ä¸ªã€ŒGit Commitã€æ›´æœ‰ä»·å€¼ï¼Œè€Œä¸æ˜¯å½¢å¼ä¸»ä¹‰ä¸‹çš„æµæ°´è´¦",featured:true,link:"\u002Fpost\u002Fdevelop-good-git-commit-habits\u002F",min2read:"â˜•ï¸â˜•ï¸â˜•ï¸â˜•ï¸â˜•ï¸ 26 min read",wordcount:"6k"},prev:{title:"æ ‘æ•°æ®ç»“æ„çš„åŸç†åŠJSå®ç°",date:"2019-06-29",spoiler:"JavaScriptè¯­è¨€ç¯å¢ƒä¸‹çš„æ ‘å­¦ä¹ ",featured:false,link:"\u002Fpost\u002Fdata-structure-tree\u002F",min2read:"â˜•ï¸â˜•ï¸â˜•ï¸ 17 min read",wordcount:"3.8k"}}}],fetch:[],mutations:void 0}}("\u002Fpost\u002Fdesign-patterns-in-javascript\u002F")));