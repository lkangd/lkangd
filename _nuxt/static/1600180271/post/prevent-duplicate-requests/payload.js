__NUXT_JSONP__("/post/prevent-duplicate-requests", (function(a){return {data:[{post:{attributes:{title:"æ§åˆ¶å‰ç«¯ä¸šåŠ¡é‡å¤è¯·æ±‚çš„ä¸€ä¸ªæ–°æ€è·¯",date:"2020-09-13",spoiler:"å°‘ä¸€ä¸ªè¯·æ±‚ï¼Œå°‘ä¸€åˆ†è´Ÿæ‹…",link:a,min2read:"â˜•ï¸â˜•ï¸â˜•ï¸ 13 min read",wordcount:"3.3k"},body:"\u003Cp\u003E\u003Cdiv class=\"cs-toc-dom\"\u003E\u003Cul\u003E\u003Cli\u003E\u003Ca href=\"#xuqiubeijing\"\u003Eéœ€æ±‚èƒŒæ™¯\u003C\u002Fa\u003E\u003Cul\u003E\u003Cli\u003E\u003Ca href=\"#zhongfuqingqiudehuaichu\"\u003Eé‡å¤è¯·æ±‚çš„åå¤„\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"#zhongfuqingqiuchulifenxi\"\u003Eé‡å¤è¯·æ±‚å¤„ç†åˆ†æ\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"#zailanjieqiliguanlizhongfuqingqiu\"\u003Eåœ¨æ‹¦æˆªå™¨é‡Œç®¡ç†é‡å¤è¯·æ±‚\u003C\u002Fa\u003E\u003Cul\u003E\u003Cli\u003E\u003Ca href=\"#lanjieqideshixianyuanli\"\u003Eæ‹¦æˆªå™¨çš„å®ç°åŸç†\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"#shixianzhongfuqingqiuguanliqi\"\u003Eå®ç°é‡å¤è¯·æ±‚ç®¡ç†å™¨\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"#weishimoshiflybushiaxios\"\u003Eä¸ºä»€ä¹ˆæ˜¯ fly ä¸æ˜¯ axiosï¼Ÿ\u003C\u002Fa\u003E\u003Cul\u003E\u003Cli\u003E\u003Ca href=\"#axiosguanjianyuanmafenxi\"\u003Eaxios å…³é”®æºç åˆ†æ\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"#flyguanjianyuanmafenxi\"\u003Efly å…³é”®æºç åˆ†æ\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"#nengfoushiyongaxiosdadaomude\"\u003Eèƒ½å¦ä½¿ç”¨ axios è¾¾åˆ°ç›®çš„ï¼Ÿ\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"#jieyan\"\u003Eç»“è¨€\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Fp\u003E\n\u003Ch2 id=\"xuqiubeijing\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'xuqiubeijing')\"\u003EÂ¶\u003C\u002Fa\u003E éœ€æ±‚èƒŒæ™¯\u003C\u002Fh2\u003E\n\u003Cp\u003Eåœ¨ä¸Šä¸€å®¶å…¬å¸çš„æ—¶å€™ï¼Œå› ä¸ºä¸šåŠ¡é‡ç»„ï¼Œç¬”è€…è¢«åˆ†é…åˆ°ä¸€ä¸ªç”µå•†é¡¹ç›®ç»„ï¼Œè´Ÿè´£é¡¹ç›®ä¸­ hybrid app çš„å‰ç«¯æ¨¡å—åŠŸèƒ½è¿­ä»£ã€‚è¯¥é¡¹ç›®ä»£ç å·²ç»å…·æœ‰ä¸€å®šè§„æ¨¡ï¼Œé•¿æœŸçš„å¿«é€Ÿä¸šåŠ¡éœ€æ±‚è¿­ä»£ï¼Œå¯¼è‡´å‰ç«¯æ¨¡å—è€¦åˆçš„ç¨‹åº¦ä¹Ÿåˆ°äº†ä¸å®¹å¿½è§†çš„æ—¶å€™ï¼Œè€Œä¸”è¿˜å­˜åœ¨ä¸€äº›å° bugã€‚æ¯”å¦‚ï¼Œæ²¡æœ‰å¯¹å¯èƒ½å¯¼è‡´é‡å¤è¯·æ±‚çš„åœºæ™¯è¿›è¡Œå¤„ç†ã€‚\u003C\u002Fp\u003E\n\u003Ch3 id=\"zhongfuqingqiudehuaichu\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'zhongfuqingqiudehuaichu')\"\u003EÂ¶\u003C\u002Fa\u003E é‡å¤è¯·æ±‚çš„åå¤„\u003C\u002Fh3\u003E\n\u003Cp\u003Eå‰ç«¯é‡å¤è¯·æ±‚å¦‚æœä¸åŠæ—¶å¤„ç†å¯èƒ½ä¼šå¸¦æ¥ä»¥ä¸‹å‡ ä¸ªåå¤„ï¼š\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003Eæ¶ˆè€—é¢å¤–çš„ \u003Cstrong\u003EæœåŠ¡å™¨\u002Få®¢æˆ·ç«¯\u003C\u002Fstrong\u003E èµ„æºï¼›\u003C\u002Fli\u003E\n\u003Cli\u003Eåç«¯è‹¥æœªå¯¹è¯·æ±‚åšå¹‚ç­‰å¤„ç†ï¼Œé€ æˆåç«¯è„æ•°æ®ï¼›\u003C\u002Fli\u003E\n\u003Cli\u003Eå¤šä¸ªé‡å¤è¯·æ±‚å æ®è¯·æ±‚é˜Ÿåˆ—ï¼Œè¾¾åˆ°æµè§ˆå™¨å¹¶å‘è¯·æ±‚ä¸Šé™ï¼Œå¯¼è‡´æ­£å¸¸è¯·æ±‚é˜»å¡ï¼›\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch3 id=\"zhongfuqingqiuchulifenxi\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'zhongfuqingqiuchulifenxi')\"\u003EÂ¶\u003C\u002Fa\u003E é‡å¤è¯·æ±‚å¤„ç†åˆ†æ\u003C\u002Fh3\u003E\n\u003Cp\u003Eå› æ­¤ï¼Œåœ¨æ–°çš„éœ€æ±‚æ²¡æ¥ä¹‹å‰ï¼Œç¬¬ä¸€ä»¶äº‹å°±æ˜¯ç€æ‰‹å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼Œæ‹¦æˆªé‡å¤è¯·æ±‚çš„å¸¸è§„æ‰‹æ®µä¸å¤–ä¹ä»¥ä¸‹å‡ ç§ï¼š\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E\u003Cstrong\u003Eè¯·æ±‚å‘èµ·åï¼Œå‰ç«¯æ·»åŠ  é®ç½©å±‚+loading æç¤ºã€‚\u003C\u002Fstrong\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cstrong\u003Eå¯¹è¯·æ±‚æ–¹æ³•è¿›è¡Œé˜²æŠ–å’ŒèŠ‚æµã€‚\u003C\u002Fstrong\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cstrong\u003Eåˆ©ç”¨æµè¡Œå‰ç«¯ ajax åº“ä¸­çš„æ‹¦æˆªå™¨è¿›è¡Œæ‹¦æˆªå–æ¶ˆï¼Œå¦‚ \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Faxios\u002Faxios\" target=\"_blank\"\u003Eaxios\u003C\u002Fa\u003E çš„ cancelTokenã€‚\u003C\u002Fstrong\u003E\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003Eå› ä¸ºæ˜¯æ–°æ¥æ‰‹çš„å…·æœ‰ä¸€å®šè§„æ¨¡çš„é¡¹ç›®ï¼Œä½¿ç”¨ä¸€ã€äºŒç§æ–¹æ³•å»å¤„ç†çš„è¯éœ€è¦çŸ­æ—¶é—´å†…æŠ•å…¥å¤§é‡çš„å·¥ä½œé‡ï¼Œè€Œä¸”è¿˜ä¸èƒ½ä¿è¯åšåˆ°ç™¾åˆ†ç™¾çš„è¦†ç›–ã€‚ç¬¬ä¸‰ç§æ–¹æ³•çœ‹æ¥å¾ˆé€‚åˆï¼Œåœ¨ç»Ÿä¸€çš„è¿›å‡ºå£è¿›è¡Œå¤„ç†ï¼Œå°±ä¸ä¼šæœ‰å‰ä¸¤ç§æ–¹æ³•çš„é—®é¢˜ï¼Œä½†æ˜¯è¿™ç§æ•æ‰åˆ°é‡å¤è¯·æ±‚å°±ç«‹é©¬å–æ¶ˆï¼Œä¸€åˆ€åˆ‡å¼çš„æ–¹å¼çœŸçš„é€‚åˆå—ï¼Ÿ\u003C\u002Fp\u003E\n\u003Cp\u003Eè¯•æƒ³ä¸€ä¸‹æ˜¯ä¸æ˜¯ä¼šæœ‰è¿™æ ·çš„ä¸šåŠ¡åœºæ™¯å­˜åœ¨ï¼Ÿ\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003EA é¡µé¢ä½œä¸ºæ€»çš„é¡µé¢å…¥å£ï¼Œå…·æœ‰ BCDEF ç­‰å­é¡µé¢ã€‚A é¡µé¢ä¾èµ–è¯·æ±‚ X çš„æ•°æ®ï¼›\u003C\u002Fli\u003E\n\u003Cli\u003EB é¡µé¢ä¹Ÿä¾èµ–è¯·æ±‚ X çš„æ•°æ®ï¼Œä½† CDEF ä¸ä¾èµ–è¯·æ±‚ X çš„æ•°æ®ï¼›\u003C\u002Fli\u003E\n\u003Cli\u003Eè¿›å…¥ A é¡µé¢æ—¶æœ‰å¯èƒ½åœ¨ X è¯·æ±‚å‰æœªè¿”å›å‰ç›´æ¥è·³è½¬åˆ° B é¡µé¢ï¼›\u003C\u002Fli\u003E\n\u003Cli\u003EB é¡µé¢å¯èƒ½ä¼šä½œä¸ºç‹¬ç«‹çš„è¥é”€é¡µå¯¹å¤–å…¬å¼€ï¼›\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003Eå¦‚æœè¿›è¡Œäº†ä¸€åˆ€åˆ‡å¤„ç†ï¼Œåœ¨é‡åˆ°ã€Œè¿›å…¥ A é¡µé¢æ—¶æœ‰å¯èƒ½åœ¨ X è¯·æ±‚å‰æœªè¿”å›å‰ç›´æ¥è·³è½¬åˆ° B é¡µé¢ã€è¿™ç§æƒ…å†µæ—¶ï¼ŒB é¡µé¢æ‰€ä¾èµ–çš„ X æ•°æ®å°±å†ä¹Ÿæ‹¿ä¸åˆ°äº†ã€‚å¦‚æœåœ¨ B é¡µé¢æ·»åŠ é¢å¤–å¤„ç†é€»è¾‘ï¼Œå°±ä¼šé‡åˆ°ç¬¬ä¸€äºŒç§æ–¹æ³•åŒæ ·çš„é—®é¢˜ã€‚\u003C\u002Fp\u003E\n\u003Cp\u003Eè™½ç„¶æ–¹æ³•ä¸‰ä¹Ÿä¸å¯è¡Œï¼Œä½†åœ¨ç»Ÿä¸€çš„å‡ºå…¥å£è¿›è¡Œå¤„ç†è¿™ä¸ªæ€è·¯æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚æˆ‘ä»¬éœ€è¦æ”¹è¿›ä¸€ä¸‹è¿™ä¸ªä¸€åˆ€åˆ‡çš„æ“ä½œï¼Œåœ¨é¿å…é‡å¤è¯·æ±‚çš„åŒæ—¶ä¿è¯åŸæ¥çš„ä¸šåŠ¡é€»è¾‘ä¸èƒ½å—åˆ°å½±å“ã€‚\u003C\u002Fp\u003E\n\u003Cp\u003Eå¦‚ä½•æ”¹è¿›ï¼Ÿé¦–å…ˆå…ˆæ¥çœ‹çœ‹æ‹¦æˆªå™¨çš„å®ç°åŸç†æ˜¯æ€æ ·çš„ã€‚\u003C\u002Fp\u003E\n\u003Ch2 id=\"zailanjieqiliguanlizhongfuqingqiu\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'zailanjieqiliguanlizhongfuqingqiu')\"\u003EÂ¶\u003C\u002Fa\u003E åœ¨æ‹¦æˆªå™¨é‡Œç®¡ç†é‡å¤è¯·æ±‚\u003C\u002Fh2\u003E\n\u003Ch3 id=\"lanjieqideshixianyuanli\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'lanjieqideshixianyuanli')\"\u003EÂ¶\u003C\u002Fa\u003E æ‹¦æˆªå™¨çš„å®ç°åŸç†\u003C\u002Fh3\u003E\n\u003Cp\u003Eåœ¨ä½¿ç”¨äº†å¦‚ axios çš„å‰ç«¯è¯·æ±‚åº“çš„è¯·æ±‚è¿‡ç¨‹ä¸€èˆ¬å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨è°ƒç”¨è¯·æ±‚æ–¹æ³•æ—¶ï¼Œä¼ å…¥\u003Ccode\u003EOptions\u003C\u002Fcode\u003Eï¼Œç„¶åè¿™ä¸ªè¯·æ±‚é…ç½®ä¼šç»è¿‡è¯·æ±‚æ‹¦æˆªå™¨\u003Ccode\u003ERequestInterceptor\u003C\u002Fcode\u003Eå¤„ç†ï¼Œè¿‡åé…ç½®ä¼ åˆ°\u003Ccode\u003ERequest\u003C\u002Fcode\u003Eæ–¹æ³•ä¸­è¿›è¡Œæ­£å¼è¯·æ±‚ï¼Œå¾…è¯·æ±‚ä»æœåŠ¡ç«¯è¿”å›åå°†è¯·æ±‚äº¤ç»™å“åº”æ‹¦æˆªå™¨\u003Ccode\u003EResponseInterceptor\u003C\u002Fcode\u003Eè¿›è¡Œå¤„ç†ï¼Œå¤„ç†å®Œæˆåå°†æ•°æ®äº¤ç»™ä¸šåŠ¡é€»è¾‘ï¼š\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n         â”‚ Options â”‚\n         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n              â”‚\nâ”Œ â”€ â”€ â”€ â”€ â”€ â”€ â”¼ â”€ â”€ â”€ â”€ â”€ â”€â” â”€ â”€ â”€ â”€â”\n              â–¼\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚        â”‚\n   â”‚ RequestInterceptor â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚        â”‚\n              â”‚\nâ”‚             â–¼            â”‚        â”‚\n   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  â”‚  Request(Options)  â”‚  â”‚     è¯·æ±‚è¿‡ç¨‹\n   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\nâ”‚             â”‚            â”‚        â”‚\n              â–¼\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚        â”‚\n   â”‚ ResponseInterceptorâ”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚        â”‚\n              â”‚\nâ”” â”€ â”€ â”€ â”€ â”€ â”€ â”¼ â”€ â”€ â”€ â”€ â”€ â”€â”˜ â”€ â”€ â”€ â”€â”˜\n              â”‚\n              â–¼\n         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n         â”‚ bsLogic â”‚\n         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eé‚£ä¹ˆ axios ç­‰ç±»åº“æ˜¯å¦‚ä½•å°†è¿™ä¸ªè¿‡ç¨‹ä¸²æˆä¸€æ¡é“¾çš„å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯ promiseã€‚ä¸‹æ¥å°±ç”¨ç®€å•çš„ä»£ç ç¤ºä¾‹è®²è§£æ‹¦æˆªå™¨çš„å®ç°åŸç†ã€‚\u003C\u002Fp\u003E\n\u003Cp\u003Eé¦–å…ˆåˆ›å»ºä¸€äº›è¯·æ±‚æ‹¦æˆªå™¨å’Œå“åº”æ‹¦æˆªå™¨ï¼Œåœ¨æ¯ä¸ªæ‹¦æˆªå™¨é‡Œé¢æ‰“å°è‡ªèº«åç§°ï¼Œæ–¹ä¾¿è¯·æ±‚æ—¶è§‚å¯Ÿè§¦å‘é¡ºåºï¼š\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003E\u002F\u002F æ¨¡æ‹Ÿé…ç½®\nconst config = { url: 'https:\u002F\u002Flkangd.com\u002F', count: 0 };\n\n\u002F\u002F æ¨¡æ‹Ÿè¯·æ±‚æ‹¦æˆªå™¨s\nconst reqInterceptor1 = config =&gt; {\n  config.count++;\n  console.log('reqInterceptor1');\n  return config;\n};\nconst reqInterceptor2 = config =&gt; {\n  config.count++;\n  console.log('reqInterceptor2');\n  return config;\n};\nconst reqInterceptor3 = config =&gt; {\n  config.count++;\n  console.log('reqInterceptor3');\n  return config;\n};\n\u002F\u002F æŒ‰å€’åºæ’å…¥\nconst reqInterceptors = [reqInterceptor3, reqInterceptor2, reqInterceptor1];\n\n\u002F\u002F æ¨¡æ‹Ÿå“åº”æ‹¦æˆªå™¨s\nconst resInterceptor1 = config =&gt; {\n  config.count++;\n  console.log('resInterceptor1');\n  return config;\n};\nconst resInterceptor2 = config =&gt; {\n  console.log('resInterceptor2');\n  config.count++;\n  return config;\n};\nconst resInterceptor3 = config =&gt; {\n  console.log('resInterceptor3');\n  config.count++;\n  return config;\n};\n\u002F\u002F æŒ‰æ­£åºæ’å…¥\nconst resInterceptors = [resInterceptor1, resInterceptor2, resInterceptor3];\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Epromise çš„ then æ–¹æ³•ä¼šé»˜è®¤è¿”å›ä¸€ä¸ªæ–°çš„ promiseï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œå°†æ‰€æœ‰æ‹¦æˆªå™¨åŒ…è£…èµ·æ¥ï¼Œç„¶åä¸²æˆä¸€æ¡é“¾ï¼š\u003C\u002Fp\u003E\n\u003Cpre  data-line=\"19-22\" class=\"language-js\"\u003E\u003Ccode data-line=\"19-22\" class=\"language-js\"\u003Econst request = (config, reqInterceptors, resInterceptors) =&gt; {\n  const makeRequest = config =&gt; {\n    console.log('makeRequest!');\n    return new Promise((resolve, reject) =&gt; {\n      \u002F\u002F æ¨¡æ‹Ÿè¯·æ±‚å»¶æ—¶\n      setTimeout(() =&gt; {\n        resolve({ data: 'response', ...config });\n      }, 3000);\n    });\n  };\n  const chain = [makeRequest];\n  let promise = Promise.resolve(config);\n\n  \u002F\u002F å°†è¯·æ±‚æ‹¦æˆªå™¨æ”¾åœ¨è¯·æ±‚å‰\n  reqInterceptors.forEach(ri =&gt; chain.unshift(ri));\n  \u002F\u002F å°†å“åº”æ‹¦æˆªå™¨æ”¾åœ¨è¯·æ±‚å\n  resInterceptors.forEach(ri =&gt; chain.push(ri));\n\n  \u002F\u002F å°† chain ä¸²æˆä¸€æ¡ promise é“¾\n  while (chain.length) {\n    promise = promise.then(chain.shift()); \u002F\u002F then çš„é»˜è®¤è¡Œä¸ºæ˜¯è¿”å›ä¸€ä¸ªæ–°çš„ promise\n  }\n  \u002F\u002F å°† promise é“¾è¿”å›\n  return promise;\n};\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eè°ƒç”¨\u003Ccode\u003Erequest\u003C\u002Fcode\u003Eæ–¹æ³•ï¼ŒæŒ‰å‚æ•°é¡ºåºä¼ å…¥ï¼Œé…ç½®ã€è¯·æ±‚æ‹¦æˆªå™¨ï¼Œå“åº”æ‹¦æˆªå™¨ï¼Œçœ‹æ‰“å°ç»“æœï¼š\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003Erequest(config, reqInterceptors, resInterceptors).then(data =&gt; {\n  console.log(data);\n});\n\u002F\u002F ç•™æ„è§¦å‘é¡ºåº\n\u002F\u002F reqInterceptor1\n\u002F\u002F reqInterceptor2\n\u002F\u002F reqInterceptor3\n\u002F\u002F makeRequest!\n\u002F\u002F PromiseÂ {&lt;pending&gt;} 3 ç§’åæ‰“å°ä¸‹é¢çš„å†…å®¹\n\u002F\u002F resInterceptor1\n\u002F\u002F resInterceptor2\n\u002F\u002F resInterceptor3\n\u002F\u002F {data: &quot;response&quot;, url: &quot;https:\u002F\u002Flkangd.com\u002F&quot;, count: 6}ï¼Œcount è¢«å¤„ç†äº† 6 æ¬¡\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 id=\"shixianzhongfuqingqiuguanliqi\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'shixianzhongfuqingqiuguanliqi')\"\u003EÂ¶\u003C\u002Fa\u003E å®ç°é‡å¤è¯·æ±‚ç®¡ç†å™¨\u003C\u002Fh3\u003E\n\u003Cp\u003EçŸ¥é“äº†æ‹¦æˆªå™¨çš„å®ç°åŸç†ä¹‹åï¼Œç­”æ¡ˆå°±å‘¼ä¹‹æ¬²å‡ºäº†ï¼Œæˆ‘ä»¬ä¸æ˜¯ç›´æ¥å–æ¶ˆæ‰åç»­çš„é‡å¤è¯·æ±‚ï¼Œè€Œæ˜¯å°†è¿™äº›é‡å¤è¯·æ±‚æŒ‚èµ·ï¼Œç­‰åˆ°ç¬¬ä¸€ä¸ªå…ƒå­è¯·æ±‚çš„ç»“æœè¿”å›åï¼Œå°†è¿™ä¸ªç»“æœä¼ é€’ç»™æŒ‚èµ·çš„é‡å¤è¯·æ±‚ã€‚è¿™æ ·å°±åšåˆ°äº†é‡å¤è¯·æ±‚åªå‘å‡ºä¸€æ¬¡ï¼Œä½†æ˜¯ä¸šåŠ¡é€»è¾‘ä¸ç”¨åšé¢å¤–çš„å¤„ç†ï¼Œæ•´ä¸ªå¤„ç†æµç¨‹å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n         â”‚ Options â”‚\n         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n              â”‚\nâ”Œ â”€ â”€ â”€ â”€ â”€ â”€ â”¼ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€â”€â” â”€ â”€ â”€ â”€â”\n              â–¼\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Yes    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚        â”‚\n   â”‚   hasRequesting?   â”‚ â”€â”€â”€â”€â”€â”€â”€&gt; â”‚ waitForRequesting â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â–²     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚        â”‚\n           No â”‚              â”‚ resolve        â”‚\nâ”‚             â–¼              â”‚                â”‚           â”‚        â”‚\n   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                â”‚\nâ”‚  â”‚   addRequesting    â”‚    â”‚                â”‚           â”‚        â”‚\n   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                â”‚\nâ”‚             â”‚              â”‚                â”‚           â”‚        â”‚\n              â–¼              â”‚                â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                â”‚           â”‚        â”‚\n   â”‚ requestInterceptor â”‚    â”‚                â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                â”‚           â”‚        â”‚\n              â”‚              â”‚                â”‚\nâ”‚             â–¼              â”‚                â”‚           â”‚     è¯·æ±‚è¿‡ç¨‹\n   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                â”‚\nâ”‚  â”‚  request(Options)  â”‚    â”‚                â”‚           â”‚        â”‚\n   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                â”‚\nâ”‚             â”‚              â”‚                â”‚           â”‚        â”‚\n              â–¼              â”‚                â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                â”‚           â”‚        â”‚\n   â”‚ ResponseInterceptorâ”‚    â”‚                â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                â”‚           â”‚        â”‚\n              â”‚              â”‚                â”‚\nâ”‚             â–¼              â”‚                â”‚           â”‚        â”‚\n   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                â”‚\nâ”‚  â”‚  resolveRequesting â”‚ â”€â”€â”€â”˜                â”‚           â”‚        â”‚\n   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚\nâ”‚             â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚        â”‚\n              â”‚\nâ”” â”€ â”€ â”€ â”€ â”€ â”€ â”¼ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”˜ â”€ â”€ â”€ â”€â”˜\n              â”‚\n              â–¼\n         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n         â”‚ bsLogic â”‚\n         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eç¬¬ä¸€æ­¥ï¼Œå¦‚ä½•è¯†åˆ«å¤šä¸ªè¯·æ±‚æ˜¯å¦é‡å¤è¯·æ±‚ï¼Ÿå¾ˆç®€å•ï¼Œåªè¦å°†æ¯ä¸ªæ–°è¯·æ±‚ä¸­çš„\u003Ccode\u003Emethod(è¯·æ±‚æ–¹æ³•)\u003C\u002Fcode\u003Eã€\u003Ccode\u003Eparams(è¯·æ±‚å‚æ•°)\u003C\u002Fcode\u003Eã€\u003Ccode\u003Ebody(è¯·æ±‚ä½“)\u003C\u002Fcode\u003Eå’Œ\u003Ccode\u003Eurl(è¯·æ±‚åœ°å€)\u003C\u002Fcode\u003Eç»„è£…æˆä¸€ä¸ªæ–°å¯¹è±¡ï¼Œç„¶åå¯¹è¿™ä¸ªæ–°å¯¹è±¡è¿›è¡Œ JSON åºåˆ—åŒ–ï¼Œè·å¾—çš„å­—ç¬¦ä¸²å°±æ˜¯è¿™ä¸ªè¯·æ±‚çš„å”¯ä¸€æ ‡è¯†ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003Econst { method, params, body, url } = request;\nconst _serialization = JSON.stringify({ method, params, body, url });\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eæœ‰äº†å”¯ä¸€æ ‡è¯†åï¼Œç¬¬äºŒæ­¥å°±æ˜¯å°†\u003Cstrong\u003Eå·²ç»å‘å‡ºä½†æ˜¯è¿˜æœªè¿”å›\u003C\u002Fstrong\u003Eçš„è¯·æ±‚å­˜å‚¨èµ·æ¥ï¼Œåœ¨è¿™ä¸ªè¯·æ±‚æœªè¿”å›æœŸé—´ï¼Œå¦‚æœè¯†åˆ«åˆ°å…·æœ‰åŒä¸€æ ‡è¯†çš„è¯·æ±‚å‘ç”Ÿï¼Œå°±åˆ†é…ä¸€ä¸ªå¤„äº\u003Ccode\u003Epending\u003C\u002Fcode\u003EçŠ¶æ€çš„ promise ï¼Œå¾…è¯·æ±‚ç»“æŸåå°†è¯·æ±‚ç»“æœå»\u003Ccode\u003Eresolve\u003C\u002Fcode\u003Eæ‰€æœ‰\u003Ccode\u003Epending\u003C\u002Fcode\u003EçŠ¶æ€ä¸­çš„ promiseï¼š\u003C\u002Fp\u003E\n\u003Cpre  data-line=\"9,14,20,21\" class=\"language-js\"\u003E\u003Ccode data-line=\"9,14,20,21\" class=\"language-js\"\u003E\u002F\u002F æœ€ç®€å®ç°åŸç†\nconst repeatRecord = {};\nlet count = 0;\n\nfunction requestInterceptor(request) {\n  const { method, params, body, url } = request;\n  const _serialization = JSON.stringify({ method, params, body, url });\n\n  if (repeatRecord[_serialization]) return repeatRecord[_serialization]; \u002F\u002F å­˜åœ¨åˆ™ç«‹å³è¿”å›\n\n  return new Promise(resolve =&gt; {\n    let resolveRepeat;\n    repeatRecord[_serialization] = new Promise(resolve =&gt; {\n      resolveRepeat = resolve; \u002F\u002F å°†æ–° promise çš„ resolver å­˜å‚¨èµ·æ¥\n    });\n\n    setTimeout(() =&gt; {\n      const result = `done! ${++count}`;\n      \u002F\u002F ä½¿ç”¨ç»“æœåŒæ—¶ resolve ä¸¤ä¸ª promise\n      resolve(result);\n      resolveRepeat(result);\n      delete repeatRecord[_serialization]; \u002F\u002F è¯·æ±‚ç»“æŸååˆ é™¤çŠ¶æ€\n    }, 3000);\n  });\n}\n\n\u002F\u002F è¿›è¡Œ 4 æ¬¡é‡å¤è¯·æ±‚ï¼Œcount åªç´¯åŠ äº†ä¸€æ¬¡\nconst request = { method: 'GET', params: { p1: 'p1' }, body: { b1: 'b1' }, url: 'https:\u002F\u002Flkangd.com\u002F' };\nrequestInterceptor(request).then(res =&gt; {\n  console.log(res); \u002F\u002F done! 1\n});\nrequestInterceptor(request).then(res =&gt; {\n  console.log(res); \u002F\u002F done! 1\n});\nrequestInterceptor(request).then(res =&gt; {\n  console.log(res); \u002F\u002F done! 1\n});\nrequestInterceptor(request).then(res =&gt; {\n  console.log(res); \u002F\u002F done! 1\n});\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eå…³é”®ä»£ç å’Œæ€è·¯å·²ç»å…·å¤‡ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å®Œå–„æ•´ä¸ªç®¡ç†å™¨çš„å®ç°äº†ï¼Œé™¤äº†è¯·æ±‚æˆåŠŸçš„çŠ¶æ€å½“ç„¶è¿˜ä¼šæœ‰è¯·æ±‚å¤±è´¥çš„çŠ¶æ€ï¼š\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003Econst requestManager = {\n  data: {}, \u002F\u002F å­˜å‚¨è¯·æ±‚\n  resolvers: {}, \u002F\u002F å­˜å‚¨æ¯ä¸€ä¸ªè¯·æ±‚çš„ promise çš„ resolve å›è°ƒ\n  rejecters: {}, \u002F\u002F å­˜å‚¨æ¯ä¸€ä¸ªè¯·æ±‚çš„ promise çš„ reject å›è°ƒ\n  \u002F\u002F å°†æ–°è¯·æ±‚å­˜å…¥ data\n  add(request) {\n    const serialized = this._serialization(request);\n    return (this.data[serialized] = new Promise((resolve, reject) =&gt; {\n      this.resolvers[serialized] = resolve;\n      this.rejecters[serialized] = reject;\n    }));\n  },\n  \u002F\u002F è·å–è¯·æ±‚ä¸­çš„è¯·æ±‚\n  get(request) {\n    const serialized = this._serialization(request);\n    return this.data[serialized];\n  },\n  \u002F\u002F è¯·æ±‚æˆåŠŸæ—¶è°ƒç”¨\n  success(request, response) {\n    const serialized = this._serialization(request);\n    this.resolvers[serialized] &amp;&amp; this.resolvers[serialized](response);\n    this._clean(request);\n  },\n  \u002F\u002F è¯·æ±‚å¤±è´¥æ—¶è°ƒç”¨\n  fail(request, error) {\n    const serialized = this._serialization(request);\n    this.rejecters[serialized] &amp;&amp; this.rejecters[serialized](error);\n    this._clean(request);\n  },\n  \u002F\u002F æ¸…é™¤å­˜å‚¨çš„è¯·æ±‚\n  _clean(request) {\n    const serialized = this._serialization(request);\n    delete this.resolvers[serialized];\n    delete this.rejecters[serialized];\n    delete this.data[serialized];\n  },\n  \u002F\u002F å¯¹è¯·æ±‚çš„é…ç½®è¿›è¡Œåºåˆ—åŒ–ï¼Œè·å¾—è¯·æ±‚çš„å”¯ä¸€åºåˆ—\n  _serialization(request) {\n    const { method, params, body, url } = request;\n    return JSON.stringify({ method, params, body, url });\n  },\n};\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eæœ€åå°±æ˜¯åœ¨æ‹¦æˆªå™¨é‡Œé¢åŠ å…¥é‡å¤è¯·æ±‚ç®¡ç†å™¨çš„é€»è¾‘ï¼Œæœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼Œè¿™é‡Œç¬”è€…é€‰æ‹©ä½¿ç”¨çš„æ˜¯ \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fwendux\u002Ffly\" target=\"_blank\"\u003Efly\u003C\u002Fa\u003E è€Œä¸æ˜¯ axiosï¼ˆåŸå› åé¢å†è¯´ï¼‰ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003Eimport Flyio from 'flyio\u002Fdist\u002Fnpm\u002Ffly';\nconst flyInstance = new Flyio();\n\nconst requestInterceptor = request =&gt; {\n  const repeatedRequest = requestManager.get(request);\n  if (repeatedRequest) return repeatedRequest; \u002F\u002F åˆ¤æ–­æ˜¯å¦æœ‰ç›¸åŒè¯·æ±‚æ­£åœ¨è¿›è¡Œä¸­ï¼Œæœ‰çš„è¯ç›´æ¥è¿”å›\n\n  requestManager.add(request); \u002F\u002F æ·»åŠ æ–°è¯·æ±‚\n\n  \u002F\u002F do some stuff...\n\n  return request;\n};\n\nconst responseInterceptor = [\n  response =&gt; {\n    requesting.success(response.request, response.data); \u002F\u002F è¯·æ±‚æˆåŠŸï¼Œå“åº”å…¶å®ƒé‡å¤è¯·æ±‚çš„æˆåŠŸå›è°ƒ\n\n    \u002F\u002F do some stuff...\n\n    return response.data;\n  },\n  error =&gt; {\n    requesting.fail(error.request, error); \u002F\u002F è¯·æ±‚å¤±è´¥ï¼Œå“åº”å…¶å®ƒé‡å¤è¯·æ±‚çš„å¤±è´¥å›è°ƒ\n\n    \u002F\u002F do some stuff...\n\n    return Promise.reject(error);\n  },\n];\n\nflyInstance.interceptors.request.use(requestInterceptor);\nflyInstance.interceptors.response.use(...responseInterceptor);\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch2 id=\"weishimoshiflybushiaxios\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'weishimoshiflybushiaxios')\"\u003EÂ¶\u003C\u002Fa\u003E ä¸ºä»€ä¹ˆæ˜¯ fly ä¸æ˜¯ axiosï¼Ÿ\u003C\u002Fh2\u003E\n\u003Ch3 id=\"axiosguanjianyuanmafenxi\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'axiosguanjianyuanmafenxi')\"\u003EÂ¶\u003C\u002Fa\u003E axios å…³é”®æºç åˆ†æ\u003C\u002Fh3\u003E\n\u003Cp\u003Eæˆ‘ä»¬æ‰“å¼€ axios çš„æºç ä¸­çš„ \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Faxios\u002Faxios\u002Fblob\u002Fmaster\u002Flib\u002Fcore\u002FAxios.js#L49\" target=\"_blank\"\u003Erequest\u003C\u002Fa\u003Eéƒ¨åˆ†ï¼Œå¯ä»¥çœ‹åˆ°åœ¨ promise é“¾çš„æ­£ä¸­æ˜¯\u003Ccode\u003EdispatchRequest\u003C\u002Fcode\u003Eè¿›è¡Œè¯·æ±‚ï¼š\u003C\u002Fp\u003E\n\u003Cpre  data-line=\"3\" class=\"language-js\"\u003E\u003Ccode data-line=\"3\" class=\"language-js\"\u003EAxios.prototype.request = function request(config) {\n  \u002F\u002F ...\n  var chain = [dispatchRequest, undefined]; \u002F\u002F é»˜è®¤è°ƒç”¨æ–¹æ³•æ˜¯ dispatchRequest\n  var promise = Promise.resolve(config);\n\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    chain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    chain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  while (chain.length) {\n    promise = promise.then(chain.shift(), chain.shift());\n  }\n\n  return promise;\n};\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Faxios\u002Faxios\u002Fblob\u002Fmaster\u002Flib\u002Fcore\u002FdispatchRequest.js#L52\" target=\"_blank\"\u003E\u003Ccode\u003EdispatchRequest\u003C\u002Fcode\u003E\u003C\u002Fa\u003E è¿”å› adapter å¯¹ä¼ å…¥ config è¿›è¡Œå¤„ç†åçš„ç»“æœï¼š\u003C\u002Fp\u003E\n\u003Cpre  data-line=\"3\" class=\"language-js\"\u003E\u003Ccode data-line=\"3\" class=\"language-js\"\u003Emodule.exports = function dispatchRequest(config) {\n  \u002F\u002F ...\n  return adapter(config); \u002F\u002F ...\n};\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eaxios é»˜è®¤çš„ adapter æ˜¯ xhrï¼Œæœ€åå»çœ‹çœ‹ adapter çš„å®ç°ï¼Œå‘ç°æœ€ç»ˆ\u003Ccode\u003Enew XMLHttpRequest()\u003C\u002Fcode\u003Eä½¿ç”¨ config ä¸­çš„ \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Faxios\u002Faxios\u002Fblob\u002Fmaster\u002Flib\u002Fadapters\u002Fxhr.js#L14\" target=\"_blank\"\u003Edata\u003C\u002Fa\u003E ä½œä¸ºæ•°æ®è¿›è¡Œå‘é€ï¼Œå¦‚æœä¼ å…¥çš„æ˜¯ promiseï¼Œè‚¯å®šæ˜¯ä¸å­˜åœ¨ data å±æ€§çš„ï¼Œæœ€ååªèƒ½äº§ç”Ÿé”™è¯¯ã€‚\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003Emodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n\n    \u002F\u002F ...\n\n    var request = new XMLHttpRequest();\n\n    \u002F\u002F ...\n\n    request.send(requestData);\n  });\n};\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 id=\"flyguanjianyuanmafenxi\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'flyguanjianyuanmafenxi')\"\u003EÂ¶\u003C\u002Fa\u003E fly å…³é”®æºç åˆ†æ\u003C\u002Fh3\u003E\n\u003Cp\u003Eè€Œ fly åœ¨è¯·æ±‚æ–¹æ³•ä¼šå¯¹ä¼ å…¥çš„ options è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœç»è¿‡è¯·æ±‚æ‹¦æˆªå™¨å¤„ç†åè¿”å›çš„ç»“æœä¸æ˜¯ optionsï¼Œåˆ™å°†è¿™ä¸ªç»“æœç›´æ¥è¿”å›ï¼Œæ‰€ä»¥å°±èƒ½è¾¾åˆ°æˆ‘ä»¬ä¸Šé¢æµç¨‹å›¾æƒ³è¦çš„ç»“æœï¼š\u003C\u002Fp\u003E\n\u003Cpre  data-line=\"18,26-30\" class=\"language-js\"\u003E\u003Ccode data-line=\"18,26-30\" class=\"language-js\"\u003E\u002F\u002F ...\nclass Fly {\n  \u002F\u002F ...\n  request(url, data, options) {\n    \u002F\u002F ...\n    enqueueIfLocked(requestInterceptor.p, () =&gt; {\n      utils.merge(options, JSON.parse(JSON.stringify(this.config)));\n      let headers = options.headers;\n      headers[contentType] = headers[contentType] || headers[contentTypeLowerCase] || '';\n      delete headers[contentTypeLowerCase];\n      options.body = data || options.body;\n      url = utils.trim(url || '');\n      options.method = options.method.toUpperCase();\n      options.url = url;\n      let ret = options;\n      if (requestInterceptorHandler) {\n        \u002F\u002F å¤„ç†è¯·æ±‚æ‹¦æˆªå™¨é€»è¾‘\n        ret = requestInterceptorHandler.call(requestInterceptor, options, Promise) || options;\n      }\n      if (!isPromise(ret)) {\n        ret = Promise.resolve(ret);\n      }\n      ret.then(\n        d =&gt; {\n          \u002F\u002Fif options continue\n          if (d === options) {\n            makeRequest(d);\n          } else {\n            resolve(d); \u002F\u002F å¦‚æœè¯·æ±‚æ‹¦æˆªå™¨è¿”å›äº†é options ç»“æœï¼Œåˆ™è·³è¿‡äº†è¯·æ±‚é˜¶æ®µ\n          }\n        },\n        err =&gt; {\n          reject(err);\n        },\n      );\n    });\n    \u002F\u002F ...\n  }\n  \u002F\u002F ...\n}\n\u002F\u002F ...\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 id=\"nengfoushiyongaxiosdadaomude\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'nengfoushiyongaxiosdadaomude')\"\u003EÂ¶\u003C\u002Fa\u003E èƒ½å¦ä½¿ç”¨ axios è¾¾åˆ°ç›®çš„ï¼Ÿ\u003C\u002Fh3\u003E\n\u003Cp\u003Eæˆ‘ä»¬çŸ¥é“ï¼Œaxios å’Œ fly éƒ½æ”¯æŒä½¿ç”¨è‡ªå®šä¹‰çš„ adapter æ¥ä½œä¸ºè¯·æ±‚å‘é€å™¨çš„ï¼Œç†è®ºä¸Šï¼Œåœ¨ axios ç”Ÿæˆå®ä¾‹çš„æ—¶å€™å°†åŸæ¥é»˜è®¤çš„ adapter åŒ…è£…ä¸€ä¸‹ï¼Œåˆ¤æ–­ä¸€ä¸‹ä¼ å…¥ config æ˜¯å¦ä¸º promiseï¼Œç„¶åç›´æ¥è¿”å›ï¼Œåº”è¯¥æ˜¯å¯ä»¥å¾—åˆ°æ”¯æŒçš„ã€‚\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003Eimport Axios from 'axios';\nconst wrappedAdapter = config =&gt; {\n  if ('function' == typeof config.then) return config;\n  return Axios.defaults.adapter(config);\n};\n\nconst instance = Axios.createInstance({ adapter: wrappedAdapter });\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eç„¶åï¼Œç†æƒ³å¾ˆä¸°æ»¡ï¼Œç°å®å´æ˜¯éª¨æ„Ÿçš„ã€‚å› ä¸º axios åœ¨çœŸæ­£å‘é€è¯·æ±‚å‰ï¼Œä¼šåœ¨ dispatchRequest æ–¹æ³•å†…å¯¹ä¼ å…¥çš„ config è¿›è¡Œå¤šä¸ªç‰¹æ®Šå¤„ç†ï¼Œè€Œ dispatchRequest çš„å®ç°æ˜¯ä¸å¯¹å¤–æš´éœ²çš„ï¼Œæ‰€ä»¥å¦‚æœæ­¤æ—¶ config çš„ç±»å‹ä¸º promiseï¼Œå¯èƒ½ä¼šäº§ç”Ÿå¾ˆå¤šæ„æƒ³ä¸åˆ°çš„é”™è¯¯ã€‚å› æ­¤ï¼Œä¸å»ºè®®å¯¹ axios è¿›è¡Œç±»ä¼¼çš„åŒ…è£…æ“ä½œã€‚\u003C\u002Fp\u003E\n\u003Cpre  data-line=\"2-25\" class=\"language-js\"\u003E\u003Ccode data-line=\"2-25\" class=\"language-js\"\u003Emodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  \u002F\u002F Support baseURL config\n  if (config.baseURL &amp;&amp; !isAbsoluteURL(config.url)) {\n    config.url = combineURLs(config.baseURL, config.url);\n  }\n\n  \u002F\u002F Ensure headers exist\n  config.headers = config.headers || {};\n\n  \u002F\u002F Transform request data\n  config.data = transformData(config.data, config.headers, config.transformRequest);\n\n  \u002F\u002F Flatten headers\n  config.headers = utils.merge(config.headers.common || {}, config.headers[config.method] || {}, config.headers || {});\n\n  utils.forEach(['delete', 'get', 'head', 'post', 'put', 'patch', 'common'], function cleanHeaderConfig(method) {\n    delete config.headers[method];\n  });\n\n  var adapter = config.adapter || defaults.adapter;\n\n  \u002F\u002F ä¸Šé¢çš„ä»£ç éƒ½æ˜¯å¯¹ä¼ å…¥ config çš„å¤„ç†\n  return adapter(config).then(\n    function onAdapterResolution(response) {\n      throwIfCancellationRequested(config);\n\n      \u002F\u002F Transform response data\n      response.data = transformData(response.data, response.headers, config.transformResponse);\n\n      return response;\n    },\n    function onAdapterRejection(reason) {\n      if (!isCancel(reason)) {\n        throwIfCancellationRequested(config);\n\n        \u002F\u002F Transform response data\n        if (reason &amp;&amp; reason.response) {\n          reason.response.data = transformData(reason.response.data, reason.response.headers, config.transformResponse);\n        }\n      }\n\n      return Promise.reject(reason);\n    },\n  );\n};\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch2 id=\"jieyan\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'jieyan')\"\u003EÂ¶\u003C\u002Fa\u003E ç»“è¨€\u003C\u002Fh2\u003E\n\u003Cp\u003Eæœ¬æ–‡é“ºå«äº†ä¸€ä¸ªç‰¹å®šçš„ä¸šåŠ¡åœºæ™¯ï¼Œè®²è¿°äº†å‰ç«¯é‡å¤è¯·æ±‚ä¼šå¸¦æ¥çš„å‡ ç§å±å®³ï¼Œå¹¶ä¸”é™ˆåˆ—äº†å‡ ç§å¸¸è§„çš„å‰ç«¯æ§åˆ¶é‡å¤è¯·æ±‚çš„æ–¹æ³•ï¼Œç„¶åé’ˆå¯¹æ¯ç§æ–¹æ³•è¿›è¡Œç®€å•åˆ†æï¼Œåœ¨ä¸è¿åå¼€æ”¾-å°é—­åŸåˆ™çš„å‰æä¸‹ï¼Œå¯¹å…¶ä¸­ä¸€ç§æ–¹æ³•è¿›è¡Œæ”¹è¿›åè¾¾åˆ°äº†æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚\u003C\u002Fp\u003E\n\u003Cp\u003Eè¿™æ¬¡ä¼˜åŒ–ç»™ç¬”è€…å¸¦æ¥çš„æœ€å¤§å¯å‘å°±æ˜¯ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨æµè¡Œæ¡†æ¶ã€åº“çš„æ—¶å€™ï¼Œä¸åº”å½“ä»…ä»…å­¦ä¹ å…¶ apiï¼Œæ›´åº”è¯¥å¯¹å…¶å®ç°è¿›è¡Œåˆ†æç ”ç©¶ï¼Œè¿™æ ·åœ¨æˆ‘ä»¬é‡åˆ°ç‰¹æ®Šéš¾é¢˜çš„æ—¶å€™å¯ä»¥è·å¾—æ›´å¹¿é˜”çš„è§†é‡ï¼Œä»è€Œè·å¾—æ›´å¥½çš„è§£å†³æ–¹æ¡ˆã€‚\u003C\u002Fp\u003E\n",bodyBegin:7,frontmatter:"title: æ§åˆ¶å‰ç«¯ä¸šåŠ¡é‡å¤è¯·æ±‚çš„ä¸€ä¸ªæ–°æ€è·¯\ndate: '2020-09-13'\nspoiler: å°‘ä¸€ä¸ªè¯·æ±‚ï¼Œå°‘ä¸€åˆ†è´Ÿæ‹…",link:a,next:{title:"å‰–ææ— é™æ»šåŠ¨è™šæ‹Ÿåˆ—è¡¨çš„å®ç°åŸç†",date:"2020-08-26",spoiler:"é•¿åˆ—è¡¨æ¸²æŸ“çš„ç»ˆæä¼˜åŒ–æ‰‹æ®µ",featured:true,link:"\u002Fpost\u002Fvirtual-infinite-scroll\u002F",min2read:"ğŸ±ğŸ± 28 min read",wordcount:"7k"},prev:{title:"ä¸€æ–‡çœ‹å…¨ Vue 3.X å¸¦æ¥çš„æ–°å˜åŒ–",date:"2020-07-19",spoiler:"åªå…³æ³¨åŒºåˆ«äº Vue 2.x å®ç°ï¼ŒåŠ©åŠ›å¿«é€Ÿè¿‡æ¸¡åˆ° Vue 3.x",link:"\u002Fpost\u002Fnew-for-vue-3\u002F",min2read:"ğŸ±ğŸ±ğŸ± 39 min read",wordcount:"8.4k"}}}],fetch:[],mutations:void 0}}("\u002Fpost\u002Fprevent-duplicate-requests\u002F")));