__NUXT_JSONP__("/post/virtual-infinite-scroll", (function(a,b){return {data:[{post:{attributes:{title:"å‰–ææ— é™æ»šåŠ¨è™šæ‹Ÿåˆ—è¡¨çš„å®ç°åŸç†",date:"2020-08-26",spoiler:"é•¿åˆ—è¡¨æ¸²æŸ“çš„ç»ˆæä¼˜åŒ–æ‰‹æ®µ",featured:true,link:a,min2read:"ğŸ±ğŸ± 28 min read",wordcount:"7k"},body:"\u003Cp\u003E\u003Cdiv class=\"cs-toc-dom\"\u003E\u003Cul\u003E\u003Cli\u003E\u003Ca href=\"#shimoshixuniliebiao\"\u003Eä»€ä¹ˆæ˜¯è™šæ‹Ÿåˆ—è¡¨ï¼Ÿ\u003C\u002Fa\u003E\u003Cul\u003E\u003Cli\u003E\u003Ca href=\"#xiangguangainian\"\u003Eç›¸å…³æ¦‚å¿µ\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"#shixianluojibuzhou\"\u003Eå®ç°é€»è¾‘æ­¥éª¤\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"#gudinggaodudexuniliebiao\"\u003Eå›ºå®šé«˜åº¦çš„è™šæ‹Ÿåˆ—è¡¨\u003C\u002Fa\u003E\u003Cul\u003E\u003Cli\u003E\u003Ca href=\"#zhunbeigongzuogudinggaodu\"\u003Eå‡†å¤‡å·¥ä½œ|å›ºå®šé«˜åº¦\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"#jisuankegundonggaodu\"\u003Eè®¡ç®—ã€Œå¯æ»šåŠ¨é«˜åº¦ã€\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"#jisuanchushikeshiyuansu\"\u003Eè®¡ç®—åˆå§‹ã€Œå¯è§†å…ƒç´ ã€\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"#gundonggengxinkeshiyuansugudinggaodu\"\u003Eæ»šåŠ¨æ›´æ–°ã€Œå¯è§†å…ƒç´ ã€|å›ºå®šé«˜åº¦\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"#dongtaigaodudexuniliebiao\"\u003EåŠ¨æ€é«˜åº¦çš„è™šæ‹Ÿåˆ—è¡¨\u003C\u002Fa\u003E\u003Cul\u003E\u003Cli\u003E\u003Ca href=\"#guanjiandianyiruhehuodeyuansudedongtaigaodu\"\u003Eå…³é”®ç‚¹ä¸€ï¼šå¦‚ä½•è·å¾—å…ƒç´ çš„åŠ¨æ€é«˜åº¦ï¼Ÿ\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"#guanjiandianerruhemonikegundonggaodu\"\u003Eå…³é”®ç‚¹äºŒï¼šå¦‚ä½•æ¨¡æ‹Ÿã€Œå¯æ»šåŠ¨é«˜åº¦ã€ï¼Ÿ\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"#guanjiandiansanruhejisuanmeiyigeyuansudescrollY\"\u003Eå…³é”®ç‚¹ä¸‰ï¼šå¦‚ä½•è®¡ç®—æ¯ä¸€ä¸ªå…ƒç´ çš„ã€ŒscrollYã€ï¼Ÿ\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"#zhunbeigongzuodongtaigaodu\"\u003Eå‡†å¤‡å·¥ä½œ|åŠ¨æ€é«˜åº¦\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"#jiantingyuansugaodubianhua\"\u003Eç›‘å¬å…ƒç´ é«˜åº¦å˜åŒ–\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"#gundonggengxinkeshiyuansudongtaigaodu\"\u003Eæ»šåŠ¨æ›´æ–°ã€Œå¯è§†å…ƒç´ ã€|åŠ¨æ€é«˜åº¦\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"#xiuzhenggundongtiao\"\u003Eä¿®æ­£æ»šåŠ¨æ¡\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"#zongjie\"\u003Eæ€»ç»“\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003E\u003Cstrong\u003ETL;DRï¼š\u003C\u002Fstrong\u003Eã€Œè™šæ‹Ÿåˆ—è¡¨ã€çš„æœ¬è´¨å°±æ˜¯ä»…å°†\u003Cstrong\u003Eéœ€è¦æ˜¾ç¤ºåœ¨è§†çª—ä¸­\u003C\u002Fstrong\u003Eçš„åˆ—è¡¨èŠ‚ç‚¹æŒ‚è½½åˆ° DOMï¼Œæ˜¯ä¸€ç§ä¼˜åŒ–é•¿åˆ—è¡¨åŠ è½½çš„æŠ€æœ¯æ‰‹æ®µã€‚å…¶ä¸­æŒ‰ç…§èŠ‚ç‚¹çš„é«˜åº¦æ˜¯å¦å›ºå®šåˆåˆ†ä¸ºã€Œå›ºå®šé«˜åº¦çš„è™šæ‹Ÿåˆ—è¡¨ã€å’Œã€ŒåŠ¨æ€é«˜åº¦çš„è™šæ‹Ÿåˆ—è¡¨ã€ã€‚è¿™æ˜¯æœ¬æ–‡å¯¹ä¸¤ç§è™šæ‹Ÿåˆ—è¡¨åœºæ™¯å®ç°çš„ \u003Ca href=\"https:\u002F\u002Flkangd.github.io\u002Finfinite-scroll-sample\u002F#\u002F\" target=\"_blank\"\u003Edemo\u003C\u002Fa\u003E(é¡µé¢æ‰˜ç®¡åœ¨ github pages å¯èƒ½éœ€è¦çˆ¬æ¢¯å­) å’Œ \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flkangd\u002Finfinite-scroll-sample\" target=\"_blank\"\u003Eä»£ç åº“\u003C\u002Fa\u003E(åŸºäº Vue 2.x)ã€‚\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003Eåœ¨è¿›è¡Œå‰ç«¯ä¸šåŠ¡å¼€å‘æ—¶ï¼Œå¾ˆå®¹æ˜“é‡åˆ°éœ€è¦åŠ è½½å·¨å¤§åˆ—è¡¨çš„åœºæ™¯ã€‚æ¯”å¦‚å¾®åšçš„ä¿¡æ¯æµã€å¾®ä¿¡çš„æœ‹å‹åœˆå’Œç›´æ’­å¹³å°çš„èŠå¤©æ¡†ç­‰ï¼Œè¿™äº›åˆ—è¡¨é€šå¸¸å…·æœ‰ä¸¤ä¸ªæ˜¾è‘—çš„ç‰¹ç‚¹ï¼š\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003Eä¸èƒ½åˆ†é¡µï¼›\u003C\u002Fli\u003E\n\u003Cli\u003Eåªè¦ç”¨æˆ·æ„¿æ„å°±å¯ä»¥æ— é™åœ°æ»šåŠ¨ä¸‹å»ã€‚\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003Eåœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œå¦‚æœç›´æ¥åŠ è½½ä¸€ä¸ªæ•°é‡çº§å¾ˆå¤§çš„åˆ—è¡¨ï¼Œä¼šé€ æˆé¡µé¢å‡æ­»ï¼Œä½¿ç”¨ä¼ ç»Ÿçš„ä¸Šæ‹‰åˆ†é¡µåŠ è½½æ¨¡å¼æˆ–è€… \u003Ca href=\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fzh-CN\u002Fdocs\u002FWeb\u002FAPI\u002FWindow\u002FrequestAnimationFrame\" target=\"_blank\"\u003Ewindow.requestAnimationFrame\u003C\u002Fa\u003Eç©ºé—²åŠ è½½æ¨¡å¼å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šç¼“è§£è¿™ç§æƒ…å†µï¼Œä½†æ˜¯åœ¨åŠ è½½åˆ°ä¸€å®šé‡çº§çš„é¡µé¢æ—¶ï¼Œä¼šå› ä¸ºé¡µé¢åŒæ—¶å­˜åœ¨å¤§é‡çš„ DOM å…ƒç´ è€Œå‡ºç°è¿‡æ¸¡å ç”¨å†…å­˜ã€é¡µé¢å¡é¡¿ç­‰æ€§èƒ½é—®é¢˜ï¼Œå¸¦æ¥ç³Ÿç³•çš„ç”¨æˆ·ä½“éªŒã€‚å› æ­¤å¿…é¡»å¯¹è¿™ç§ä¸šåŠ¡åœºæ™¯åšç›¸åº”çš„åŠ è½½ä¼˜åŒ–ï¼Œ\u003Cstrong\u003EåªåŠ è½½éœ€è¦æ˜¾ç¤ºçš„å…ƒç´ \u003C\u002Fstrong\u003Eæ˜¯è¿™ç§æƒ…å†µçš„å”¯ä¸€è§£ï¼Œã€Œè™šæ‹Ÿåˆ—è¡¨ã€çš„æ¦‚å¿µåº”è¿è€Œç”Ÿã€‚\u003C\u002Fp\u003E\n\u003Ch2 id=\"shimoshixuniliebiao\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'shimoshixuniliebiao')\"\u003EÂ¶\u003C\u002Fa\u003E ä»€ä¹ˆæ˜¯è™šæ‹Ÿåˆ—è¡¨ï¼Ÿ\u003C\u002Fh2\u003E\n\u003Cp\u003Eé¦–å…ˆï¼Œæ¥è¯´è¯´ã€Œè™šæ‹Ÿåˆ—è¡¨ã€çš„å®šä¹‰ï¼Œå®ƒçš„æœ¬è´¨å°±æ˜¯ä»…å°†\u003Cstrong\u003Eéœ€è¦æ˜¾ç¤ºåœ¨è§†çª—ä¸­\u003C\u002Fstrong\u003Eçš„åˆ—è¡¨èŠ‚ç‚¹æŒ‚è½½åˆ° DOMï¼Œä»¥è¾¾åˆ°ã€Œå‡å°‘\u003Cstrong\u003Eä¸€æ¬¡æ€§åŠ è½½èŠ‚ç‚¹æ•°é‡\u003C\u002Fstrong\u003Eã€å’Œã€Œå‡å°‘\u003Cstrong\u003Eæ»šåŠ¨å®¹å™¨å†…æ€»æŒ‚è½½èŠ‚ç‚¹æ•°é‡\u003C\u002Fstrong\u003Eã€çš„ç›®çš„ï¼Œä¹Ÿå³ï¼š\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003Eé€šè¿‡ã€Œ\u003Cstrong\u003Eå•ä¸ªå…ƒç´ é«˜åº¦\u003C\u002Fstrong\u003Eã€è®¡ç®—å½“å‰åˆ—è¡¨å…¨éƒ¨åŠ è½½æ—¶çš„é«˜åº¦ä½œä¸ºã€Œ\u003Cstrong\u003Eæ»šåŠ¨å®¹å™¨\u003C\u002Fstrong\u003Eã€çš„ã€Œ\u003Cstrong\u003Eå¯æ»šåŠ¨é«˜åº¦\u003C\u002Fstrong\u003Eã€ï¼ŒæŒ‰è¯¥ã€Œ\u003Cstrong\u003Eå¯æ»šåŠ¨é«˜åº¦\u003C\u002Fstrong\u003Eã€æ’‘å¼€ã€Œ\u003Cstrong\u003Eæ»šåŠ¨å®¹å™¨\u003C\u002Fstrong\u003Eã€ã€‚å¹¶æ ¹æ®ã€Œ\u003Cstrong\u003Eå½“å‰æ»šåŠ¨é«˜åº¦\u003C\u002Fstrong\u003Eã€ï¼Œåœ¨ã€Œ\u003Cstrong\u003Eå¯è§†åŒºåŸŸ\u003C\u002Fstrong\u003Eã€å†…æŒ‰éœ€åŠ è½½åˆ—è¡¨å…ƒç´ ã€‚\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Ch3 id=\"xiangguangainian\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'xiangguangainian')\"\u003EÂ¶\u003C\u002Fa\u003E ç›¸å…³æ¦‚å¿µ\u003C\u002Fh3\u003E\n\u003Cp\u003Eä¸Šé¢çš„æè¿°æåˆ°äº†å‡ ä¸ªå…³é”®çš„æ¦‚å¿µï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ï¼š\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Cp\u003E\u003Cstrong\u003Eå•ä¸ªå…ƒç´ é«˜åº¦\u003C\u002Fstrong\u003Eï¼šåˆ—è¡¨å†…æ¯ä¸ªç‹¬ç«‹å…ƒç´ çš„é«˜åº¦ï¼Œå®ƒå¯ä»¥æ˜¯å›ºå®šçš„æˆ–è€…æ˜¯åŠ¨æ€çš„ã€‚\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E\u003Cstrong\u003Eæ»šåŠ¨å®¹å™¨\u003C\u002Fstrong\u003Eï¼šæ„æŒ‡æŒ‚è½½åˆ—è¡¨å…ƒç´ çš„ DOM å¯¹è±¡ï¼Œå®ƒå¯ä»¥æ˜¯è‡ªå®šä¹‰çš„å…ƒç´ æˆ–è€…\u003Ccode\u003Ewindow\u003C\u002Fcode\u003Eå¯¹è±¡(é»˜è®¤)ã€‚\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E\u003Cstrong\u003Eå¯æ»šåŠ¨é«˜åº¦\u003C\u002Fstrong\u003Eï¼šæ»šåŠ¨å®¹å™¨å¯æ»šåŠ¨çš„çºµå‘é«˜åº¦ã€‚å½“æ»šåŠ¨å®¹å™¨çš„é«˜åº¦ï¼ˆå®½åº¦ï¼‰ï¼Œå°äºå®ƒçš„å­å…ƒç´ æ‰€å çš„æ€»é«˜åº¦ï¼ˆå®½åº¦ï¼‰ä¸”è¯¥æ»šåŠ¨å®¹å™¨çš„\u003Ccode\u003Eoverflow\u003C\u002Fcode\u003Eä¸ä¸º\u003Ccode\u003Ehidden\u003C\u002Fcode\u003Eæ—¶ï¼Œæ­¤æ—¶æ»šåŠ¨å®¹å™¨çš„\u003Ccode\u003EscrollHeight\u003C\u002Fcode\u003Eä¸º\u003Cstrong\u003Eå¯æ»šåŠ¨é«˜åº¦\u003C\u002Fstrong\u003Eã€‚\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E\u003Cstrong\u003Eå¯è§†åŒºåŸŸ\u003C\u002Fstrong\u003Eï¼šæ»šåŠ¨å®¹å™¨çš„è§†è§‰å¯è§åŒºåŸŸã€‚å¦‚æœå®¹å™¨å…ƒç´ æ˜¯\u003Ccode\u003Ewindow\u003C\u002Fcode\u003Eå¯¹è±¡ï¼Œå¯è§†åŒºåŸŸå°±æ˜¯æµè§ˆå™¨çš„è§†å£å¤§å°ï¼ˆå³è§†è§‰è§†å£ï¼‰ï¼›å¦‚æœå®¹å™¨å…ƒç´ æ˜¯æŸä¸ª ul å…ƒç´ ï¼Œå…¶é«˜åº¦æ˜¯ 300ï¼Œå³ä¾§æœ‰çºµå‘æ»šåŠ¨æ¡å¯ä»¥æ»šåŠ¨ï¼Œé‚£ä¹ˆè§†è§‰å¯è§çš„åŒºåŸŸå°±æ˜¯å¯è§†åŒºåŸŸï¼Œä¹Ÿå³æ˜¯è¯¥æ»šåŠ¨å®¹å™¨çš„\u003Ccode\u003EoffsetHeight\u003C\u002Fcode\u003Eã€‚\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E\u003Cstrong\u003Eå½“å‰æ»šåŠ¨é«˜åº¦\u003C\u002Fstrong\u003Eï¼šä¸å¹³å¸¸çš„æ»šåŠ¨é«˜åº¦æ¦‚å¿µä¸€è‡´ã€‚è™½ç„¶è™šæ‹Ÿåˆ—è¡¨ä»…åŠ è½½éœ€è¦æ˜¾ç¤ºåœ¨å¯è§†åŒºåŸŸå†…çš„å…ƒç´ ï¼Œä½†æ˜¯ä¸ºäº†ç»´æŒä¸å¸¸è§„åˆ—è¡¨ä¸€è‡´çš„æ»šåŠ¨ä½“éªŒï¼Œå¿…é¡»é€šè¿‡ç›‘å¬å½“å‰æ»šåŠ¨é«˜åº¦æ¥åŠ¨æ€æ›´æ–°éœ€è¦æ˜¾ç¤ºçš„å…ƒç´ ã€‚\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003Eå‚è€ƒä¸‹å›¾åŠ æ·±ç†è§£ï¼š\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"_nuxt\u002Fimg\u002Fpic-0.8c610f9.png\" alt=\"\"\u003E\u003C\u002Fp\u003E\n\u003Ch3 id=\"shixianluojibuzhou\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'shixianluojibuzhou')\"\u003EÂ¶\u003C\u002Fa\u003E å®ç°é€»è¾‘æ­¥éª¤\u003C\u002Fh3\u003E\n\u003Cp\u003Eå› æ­¤ï¼Œå®ç°ã€Œè™šæ‹Ÿåˆ—è¡¨ã€å¯ä»¥ç®€å•ç†è§£ä¸ºå°±æ˜¯åœ¨åˆ—è¡¨å‘ç”Ÿæ»šåŠ¨æ—¶ï¼Œæ”¹å˜ã€Œå¯è§†åŒºåŸŸã€å†…çš„æ¸²æŸ“å…ƒç´ ã€‚å¤§æ¦‚çš„æ–‡å­—é€»è¾‘æ­¥éª¤å¦‚ä¸‹ï¼š\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003Eæ ¹æ®å•ä¸ªå…ƒç´ é«˜åº¦è®¡ç®—å‡ºæ»šåŠ¨å®¹å™¨çš„å¯æ»šåŠ¨é«˜åº¦ï¼Œå¹¶æ’‘å¼€æ»šåŠ¨å®¹å™¨ï¼›\u003C\u002Fli\u003E\n\u003Cli\u003Eæ ¹æ®å¯è§†åŒºåŸŸè®¡ç®—æ€»æŒ‚è½½å…ƒç´ æ•°é‡ï¼›\u003C\u002Fli\u003E\n\u003Cli\u003Eæ ¹æ®å¯è§†åŒºåŸŸå’Œæ€»æŒ‚è½½å…ƒç´ æ•°é‡è®¡ç®—å¤´æŒ‚è½½å…ƒç´ ï¼ˆåˆå§‹ä¸º 0ï¼‰å’Œå°¾æŒ‚è½½å…ƒç´ ï¼›\u003C\u002Fli\u003E\n\u003Cli\u003Eå½“å‘ç”Ÿæ»šåŠ¨æ—¶ï¼Œæ ¹æ®æ»šåŠ¨å·®å€¼å’Œæ»šåŠ¨æ–¹å‘ï¼Œé‡æ–°è®¡ç®—å¤´æŒ‚è½½å…ƒç´ å’Œå°¾æŒ‚è½½å…ƒç´ ã€‚\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003Eæ ¹æ®è¿™äº›æ­¥éª¤ï¼Œä¸‹é¢å¼€å§‹é€šè¿‡å®é™…ä»£ç å¯¹ã€Œè™šæ‹Ÿåˆ—è¡¨ã€è¿›è¡Œå®ç°ã€‚\u003C\u002Fp\u003E\n\u003Ch2 id=\"gudinggaodudexuniliebiao\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'gudinggaodudexuniliebiao')\"\u003EÂ¶\u003C\u002Fa\u003E å›ºå®šé«˜åº¦çš„è™šæ‹Ÿåˆ—è¡¨\u003C\u002Fh2\u003E\n\u003Ch3 id=\"zhunbeigongzuogudinggaodu\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'zhunbeigongzuogudinggaodu')\"\u003EÂ¶\u003C\u002Fa\u003E å‡†å¤‡å·¥ä½œ|å›ºå®šé«˜åº¦\u003C\u002Fh3\u003E\n\u003Cp\u003Eé¦–å…ˆï¼Œåˆ›å»ºåˆ—è¡¨å…ƒç´ ç»„ä»¶ï¼Œçº¦å®šå®ƒçš„é«˜åº¦å›ºå®šä¸º\u003Ccode\u003E180px\u003C\u002Fcode\u003Eï¼š\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-html\"\u003E\u003Ccode class=\"language-html\"\u003E&lt;template&gt;\n  &lt;li class=&quot;item&quot; ref=&quot;item&quot;&gt;\n    &lt;div class=&quot;item__wrapper&quot;&gt;\n      &lt;div class=&quot;item__info&quot;&gt;\n        &lt;img :src=&quot;data.avatar&quot; class=&quot;item__avatar&quot; \u002F&gt;\n        &lt;p class=&quot;item__name&quot;&gt;{{ index }}. {{ data.name }}&lt;\u002Fp&gt;\n        &lt;p class=&quot;item__date&quot;&gt;{{ data.dob }}&lt;\u002Fp&gt;\n      &lt;\u002Fdiv&gt;\n      &lt;p class=&quot;item__text&quot;&gt;E-mail: {{ data.email }}&lt;\u002Fp&gt;\n      &lt;p class=&quot;item__text&quot;&gt;Phone: {{ data.phone }}&lt;\u002Fp&gt;\n      &lt;p class=&quot;item__text&quot;&gt;City: {{ data.address.city }}&lt;\u002Fp&gt;\n      &lt;p class=&quot;item__text&quot;&gt;Street: {{ data.address.street }}&lt;\u002Fp&gt;\n    &lt;\u002Fdiv&gt;\n  &lt;\u002Fli&gt;\n&lt;\u002Ftemplate&gt;\n&lt;script&gt;\n  export default {\n    name: 'item',\n    props: {\n      index: {\n        type: Number, \u002F\u002F å…ƒç´ ä¸‹æ ‡\n        default: 0,\n      },\n      data: {\n        type: Object,\n        default: () =&gt; ({}),\n      },\n    },\n  };\n&lt;\u002Fscript&gt;\n&lt;style scoped lang=&quot;scss&quot;&gt;\n  .item {\n    height: 180px;\n    \u002F* ... *\u002F\n  }\n&lt;\u002Fstyle&gt;\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eé€šè¿‡\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fmarak\u002FFaker.js\u002F\" target=\"_blank\"\u003Efaker.js\u003C\u002Fa\u003Eæ¥ç”Ÿæˆä¸€äº›éšæœºæ•°æ®ï¼Œä»¥æ»¡è¶³åˆ†é¡µåŠ è½½çš„æµ‹è¯•æƒ…å†µï¼š\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003Eimport faker from 'faker';\n\nexport function fetchData(count = 30) {\n  const result = [];\n  for (let i = 0; i &lt; count; i++) {\n    const item = faker.helpers.contextualCard();\n    item.paragraph = faker.lorem.paragraph();\n    result.push(item);\n  }\n  return result;\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eæœ€åï¼Œåˆ›å»ºæ»šåŠ¨å®¹å™¨ç»„ä»¶ï¼Œå¼•å…¥\u003Ccode\u003Eitem\u003C\u002Fcode\u003Eç»„ä»¶å’Œéšæœºæ•°æ®ï¼Œæ¸²æŸ“åˆ—è¡¨ï¼š\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-html\"\u003E\u003Ccode class=\"language-html\"\u003E&lt;template&gt;\n  &lt;ul class=&quot;height-fixed&quot; ref=&quot;scroller&quot;&gt;\n    &lt;item class=&quot;height-fixed__item&quot; v-for=&quot;item in listData&quot; :data=&quot;item&quot; :index=&quot;item.index&quot; :key=&quot;item.username + item.phone&quot; \u002F&gt;\n  &lt;\u002Ful&gt;\n&lt;\u002Ftemplate&gt;\n&lt;script&gt;\n  import Item from '.\u002Fcomponents\u002Fitem';\n  import { fetchData } from '.\u002Fhelpers';\n\n  const FIXED_HEIGHT = 180;\n\n  export default {\n    name: 'height-fixed',\n    data() {\n      return {\n        listData: [],\n      };\n    },\n    mounted() {\n      this.fetchData();\n    },\n    methods: {\n      fetchData() {\n        this.listData.push(...this.setItemIndex(fetchData()));\n      },\n      \u002F\u002F ç»™æ¯ä¸ªåˆ—è¡¨å…ƒç´ è®¾ç½®å›ºå®šçš„ä¸‹æ ‡\n      setItemIndex(list) {\n        let latestIndex = this.listData.length;\n        for (let i = 0; i &lt; list.length; i++) {\n          const item = list[i];\n          item.index = latestIndex + i;\n          Object.freeze(item);\n        }\n        return list;\n      },\n    },\n    components: { Item },\n  };\n&lt;\u002Fscript&gt;\n&lt;style scoped lang=&quot;scss&quot;&gt;\n  .height-fixed {\n    width: 100%;\n    height: 100%;\n    overflow-x: hidden;\n    overflow-y: scroll;\n    \u002F* ... *\u002F\n  }\n&lt;\u002Fstyle&gt;\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eé€šè¿‡è·¯ç”±æŒ‚è½½åï¼Œå®Œæˆä¸€ä¸ªå¸¸è§„åˆ—è¡¨çš„æ¸²æŸ“ï¼Œå¦‚ä¸‹å›¾ï¼š\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"_nuxt\u002Fimg\u002Fpic-1.92a1651.png\" alt=\"\"\u003E\u003C\u002Fp\u003E\n\u003Ch3 id=\"jisuankegundonggaodu\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'jisuankegundonggaodu')\"\u003EÂ¶\u003C\u002Fa\u003E è®¡ç®—ã€Œå¯æ»šåŠ¨é«˜åº¦ã€\u003C\u002Fh3\u003E\n\u003Cp\u003Eå› ä¸ºå…ƒç´ é«˜åº¦æ˜¯å›ºå®šï¼Œæ‰€ä»¥åœ¨æ‹¿åˆ°åˆ—è¡¨æ•°æ®æ—¶å°±å¯ä»¥é€šè¿‡ \u003Cstrong\u003Eåˆ—è¡¨é•¿åº¦\u003C\u002Fstrong\u003E * \u003Cstrong\u003Eå…ƒç´ é«˜åº¦\u003C\u002Fstrong\u003E è·å¾—ã€Œå¯æ»šåŠ¨é«˜åº¦ã€ï¼Œç„¶åä½¿ç”¨æ­¤é«˜åº¦æ’‘å¼€æ»šåŠ¨å®¹å™¨ã€‚é€šè¿‡ä¸Šæ–‡å›¾ä¸€å¯ä»¥å¾—çŸ¥ï¼Œå¯æ»šåŠ¨é«˜åº¦ç”±ã€Œå¯è§†åŒºåŸŸã€+ã€Œå·²æµè§ˆåŒºåŸŸã€+ã€Œå¾…æµè§ˆåŒºåŸŸã€ç»„æˆï¼Œå…³äºå¦‚ä½•æ’‘å¼€ã€Œå·²æµè§ˆåŒºåŸŸã€å’Œã€Œå¾…æµè§ˆåŒºåŸŸã€ï¼Œæœ‰ä¸¤ç§å¸¸è§„çš„åšæ³•ï¼š\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003Eç›´æ¥ä½¿ç”¨ padding æ’‘å¼€åˆ—è¡¨é«˜åº¦ï¼›\u003C\u002Fli\u003E\n\u003Cli\u003Eåœ¨åˆ—è¡¨å¯è§†åŒºåŸŸå¤–éƒ¨æ”¾ç½®å“¨å…µå…ƒç´ æ’‘å¼€é«˜åº¦ã€‚\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003Eä¸ºäº†æ›´å¥½åœ°ç†è§£åæ–‡ã€ŒåŠ¨æ€é«˜åº¦çš„è™šæ‹Ÿåˆ—è¡¨ã€çš„å†…å®¹ï¼Œè¿™é‡Œé€‰ç”¨ç¬¬äºŒç§æ–¹æ³•ã€‚\u003C\u002Fp\u003E\n\u003Cp\u003Eæ–°å¢\u003Ccode\u003EscrollRunwayEnd\u003C\u002Fcode\u003Eå±æ€§ï¼Œåœ¨åˆ—è¡¨è·å–åè®¡ç®—æ€»é«˜åº¦ï¼š\u003C\u002Fp\u003E\n\u003Cpre  data-line=\"6,12\" class=\"language-js\"\u003E\u003Ccode data-line=\"6,12\" class=\"language-js\"\u003Eexport default {\n  \u002F\u002F ...\n  data() {\n    return {\n      \u002F\u002F ...\n      scrollRunwayEnd: 0,\n    };\n  },\n  methods: {\n    fetchData() {\n      this.listData.push(...this.setItemIndex(fetchData()));\n      this.scrollRunwayEnd = this.listData.length * FIXED_HEIGHT;\n    },\n  },\n  \u002F\u002F ...\n};\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eåœ¨æ¨¡æ¿å†…å¢åŠ \u003Ccode\u003Escroll-runway\u003C\u002Fcode\u003Eå…ƒç´ ï¼Œæ ¹æ®\u003Ccode\u003EscrollRunwayEnd\u003C\u002Fcode\u003Eï¼Œä½¿ç”¨\u003Ccode\u003Etransform: translateY\u003C\u002Fcode\u003Eçš„æ–¹å¼æ’‘å¼€ã€Œæ»šåŠ¨å®¹å™¨ã€é«˜åº¦ï¼š\u003C\u002Fp\u003E\n\u003Cpre  data-line=\"3\" class=\"language-html\"\u003E\u003Ccode data-line=\"3\" class=\"language-html\"\u003E&lt;template&gt;\n  &lt;ul class=&quot;height-fixed&quot; ref=&quot;scroller&quot; @scroll=&quot;handleScroll&quot;&gt;\n    &lt;li class=&quot;height-fixed__scroll-runway&quot; :style=&quot;`transform: translate(0, ${scrollRunwayEnd}px)`&quot;&gt;&lt;\u002Fli&gt;\n    &lt;item class=&quot;height-fixed__item&quot; v-for=&quot;item in listData&quot; :data=&quot;item&quot; :index=&quot;item.index&quot; :key=&quot;item.username + item.phone&quot; \u002F&gt;\n  &lt;\u002Ful&gt;\n&lt;\u002Ftemplate&gt;\n&lt;!-- ... --&gt;\n&lt;style scoped lang=&quot;scss&quot;&gt;\n  .height-fixed {\n    \u002F* ... *\u002F\n    &amp;__scroll-runway {\n      position: absolute;\n      width: 1px;\n      height: 1px;\n      transition: transform 0.2s;\n    }\n  }\n&lt;\u002Fstyle&gt;\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 id=\"jisuanchushikeshiyuansu\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'jisuanchushikeshiyuansu')\"\u003EÂ¶\u003C\u002Fa\u003E è®¡ç®—åˆå§‹ã€Œå¯è§†å…ƒç´ ã€\u003C\u002Fh3\u003E\n\u003Cp\u003Eã€Œå¯è§†å…ƒç´ ã€ä½¿ç”¨\u003Ccode\u003EvisibleData\u003C\u002Fcode\u003Eè¡¨ç¤ºï¼Œ\u003Ccode\u003EvisibleData\u003C\u002Fcode\u003Eå¯ä½¿ç”¨ã€Œå¤´æŒ‚è½½å…ƒç´ ã€å’Œã€Œå°¾æŒ‚è½½å…ƒç´ ã€åˆ†åˆ«ä»£è¡¨çš„å…ƒç´ ä¸‹æ ‡åœ¨åŸå§‹çš„\u003Ccode\u003ElistData\u003C\u002Fcode\u003Eè¿›è¡ŒåŠ¨æ€æˆªå–ã€‚\u003C\u002Fp\u003E\n\u003Cp\u003Eæ ¹æ®å›ºå®šçš„å…ƒç´ é«˜åº¦å’Œã€Œæ»šåŠ¨å®¹å™¨ã€çš„é«˜åº¦ï¼Œå¯ä»¥è½»æ¾å¾—å‡ºã€Œå¯è§†å…ƒç´ ã€çš„ä¸ªæ•°ä¸º \u003Cstrong\u003Eæ»šåŠ¨å®¹å™¨é«˜åº¦\u003C\u002Fstrong\u003E \u002F \u003Cstrong\u003Eå•ä¸ªå…ƒç´ é«˜åº¦\u003C\u002Fstrong\u003Eï¼Œä½¿ç”¨\u003Ccode\u003EVISIBLE_COUNT\u003C\u002Fcode\u003Eè¡¨ç¤ºã€‚åŒæ—¶ï¼Œä¸ºäº†åœ¨å¿«é€Ÿæ»šåŠ¨çš„æƒ…å†µä¸‹ä¹Ÿèƒ½è·å¾—è¾ƒä¸ºè‰¯å¥½çš„æ•°æ®ç°å®ä½“éªŒï¼Œå¯ä»¥é€‚å½“è®¾ç½®ã€Œç¼“å†²åŒºå…ƒç´ ã€ï¼Œä½¿ç”¨\u003Ccode\u003EBUFFER_SIZE\u003C\u002Fcode\u003Eè¡¨ç¤ºã€‚\u003C\u002Fp\u003E\n\u003Cp\u003Eæ–°å¢\u003Ccode\u003EvisibleData\u003C\u002Fcode\u003Eæ•°ç»„ï¼Œç”¨äºã€Œå¯è§†å…ƒç´ ã€çš„è£…è½½ã€‚é¡µé¢åˆæ¬¡æŒ‚è½½æ—¶ï¼Œã€Œå¤´æŒ‚è½½å…ƒç´ ã€\u003Ccode\u003EfirstAttachedItem\u003C\u002Fcode\u003Eå¿…å®šä¸º 0ï¼Œå†æ ¹æ®\u003Ccode\u003EVISIBLE_COUNT\u003C\u002Fcode\u003Eå’Œ\u003Ccode\u003EBUFFER_SIZE\u003C\u002Fcode\u003Eå¯å¾—ã€Œå°¾æŒ‚è½½å…ƒç´ ã€\u003Ccode\u003ElastAttachedItem\u003C\u002Fcode\u003Eï¼š\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003E\u002F\u002F ...\nconst BUFFER_SIZE = 3; \u002F\u002F ã€Œç¼“å†²åŒºå…ƒç´ ã€ä¸ªæ•°\nlet VISIBLE_COUNT = 0;\n\nexport default {\n  name: 'height-fixed',\n  data() {\n    return {\n      \u002F\u002F ...\n      visibleData: [],\n      firstAttachedItem: 0, \u002F\u002F ã€Œå¤´æŒ‚è½½å…ƒç´ ã€\n      lastAttachedItem: 0, \u002F\u002F ã€Œå°¾æŒ‚è½½å…ƒç´ ã€\n    };\n  },\n  mounted() {\n    VISIBLE_COUNT = Math.ceil(this.$refs.scroller.offsetHeight \u002F FIXED_HEIGHT);\n    this.lastAttachedItem = VISIBLE_COUNT + BUFFER_SIZE;\n    this.visibleData = this.listData.slice(this.firstAttachedItem, this.lastAttachedItem);\n  },\n};\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eå°†\u003Ccode\u003ElistData\u003C\u002Fcode\u003Eæ›´æ”¹ä¸º\u003Ccode\u003EvisibleData\u003C\u002Fcode\u003Eï¼š\u003C\u002Fp\u003E\n\u003Cpre  data-line=\"4\" class=\"language-html\"\u003E\u003Ccode data-line=\"4\" class=\"language-html\"\u003E&lt;template&gt;\n  &lt;ul class=&quot;height-fixed&quot; ref=&quot;scroller&quot;&gt;\n    &lt;li class=&quot;height-fixed__scroll-runway&quot; :style=&quot;`transform: translate(0, ${scrollRunwayEnd}px)`&quot;&gt;&lt;\u002Fli&gt;\n    &lt;item class=&quot;height-fixed__item&quot; v-for=&quot;item in visibleData&quot; :data=&quot;item&quot; :index=&quot;item.index&quot; :key=&quot;item.username + item.phone&quot; \u002F&gt;\n  &lt;\u002Ful&gt;\n&lt;\u002Ftemplate&gt;\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eåœ¨è·å¾—äº†\u003Ccode\u003EvisibleData\u003C\u002Fcode\u003Eåï¼Œä¸‹ä¸€æ­¥éœ€è¦æ”¹å˜åˆ—è¡¨å…ƒç´ çš„æ˜¾ç¤ºæ–¹å¼ã€‚å¯¹æ¯ä¸ªåˆ—è¡¨å…ƒç´ ä½¿ç”¨ç»å¯¹å®šä½ï¼Œä½¿å…¶è„±ç¦»æ–‡æ¡£æµï¼Œç„¶åä½¿ç”¨\u003Ccode\u003Etransform: translateY\u003C\u002Fcode\u003Eçš„æ–¹å¼æ¥å¯¹å…ƒç´ è¿›è¡Œå®šä½ã€‚\u003C\u002Fp\u003E\n\u003Cp\u003Eå°†\u003Ccode\u003EsetItemIndex\u003C\u002Fcode\u003Eæ–¹æ³•æ›´æ”¹ä¸º\u003Ccode\u003EcalItemScrollY\u003C\u002Fcode\u003Eï¼Œå¹¶æ ¹æ®ä¸‹æ ‡ï¼Œèµ‹å€¼ç»™æ¯ä¸ªå…ƒç´ å›ºå®šçš„\u003Ccode\u003EscrollY\u003C\u002Fcode\u003Eï¼š\u003C\u002Fp\u003E\n\u003Cpre  data-line=\"15\" class=\"language-js\"\u003E\u003Ccode data-line=\"15\" class=\"language-js\"\u003E\u002F\u002F setItemIndex(list) {\n\u002F\u002F   let latestIndex = this.listData.length;\n\u002F\u002F   for (let i = 0; i &lt; list.length; i++) {\n\u002F\u002F     const item = list[i];\n\u002F\u002F     item.index = latestIndex + i;\n\u002F\u002F     Object.freeze(item);\n\u002F\u002F   }\n\u002F\u002F   return list;\n\u002F\u002F }\ncalItemScrollY(list) {\n  let latestIndex = this.listData.length;\n  for (let i = 0; i &lt; list.length; i++) {\n    const item = list[i];\n    item.index = latestIndex + i;\n    item.scrollY = this.scrollRunwayEnd + i * FIXED_HEIGHT;\n    Object.freeze(item);\n  }\n  return list;\n},\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cpre  data-line=\"9,17\" class=\"language-html\"\u003E\u003Ccode data-line=\"9,17\" class=\"language-html\"\u003E&lt;template&gt;\n  &lt;!-- ... --&gt;\n  &lt;item\n    class=&quot;height-fixed__item&quot;\n    v-for=&quot;item in visibleData&quot;\n    :data=&quot;item&quot;\n    :index=&quot;item.index&quot;\n    :key=&quot;item.username + item.phone&quot;\n    :style=&quot;`transform: translate(0, ${item.scrollY}px)`&quot;\n  \u002F&gt;\n  &lt;!-- ... --&gt;\n&lt;\u002Ftemplate&gt;\n&lt;!-- ... --&gt;\n&lt;style scoped lang=&quot;scss&quot;&gt;\n  .height-fixed {\n    \u002F* ... *\u002F\n    &amp;__item {\n      position: absolute;\n      contain: layout;\n      will-change: transform;\n    }\n  }\n&lt;\u002Fstyle&gt;\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 id=\"gundonggengxinkeshiyuansugudinggaodu\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'gundonggengxinkeshiyuansugudinggaodu')\"\u003EÂ¶\u003C\u002Fa\u003E æ»šåŠ¨æ›´æ–°ã€Œå¯è§†å…ƒç´ ã€|å›ºå®šé«˜åº¦\u003C\u002Fh3\u003E\n\u003Cp\u003Eåœ¨å¤„ç†æ»šåŠ¨é€»è¾‘ä¹‹å‰ï¼Œå…ˆå¼•å…¥ä¸€ä¸ªæ¦‚å¿µï¼š\u003Cstrong\u003Eã€Œé”šç‚¹å…ƒç´ ã€\u003C\u002Fstrong\u003Eï¼Œå³å¤„äºã€Œæ»šåŠ¨å®¹å™¨ã€çš„ã€Œå¯è§†åŒºåŸŸã€å†…çš„\u003Cstrong\u003Eç¬¬ä¸€ä¸ªå…ƒç´ \u003C\u002Fstrong\u003Eã€‚æˆ‘ä»¬éœ€è¦åœ¨æ»šåŠ¨æ—¶å€™ï¼Œæ ¹æ®æ¯ä¸€æ¬¡æ»šåŠ¨äº‹ä»¶çš„æ»šåŠ¨å·®å€¼å’Œæ–¹å‘æ¥æ›´æ–°ã€Œé”šç‚¹å…ƒç´ ã€ï¼Œè®¡ç®—å‡ºã€Œé”šç‚¹å…ƒç´ ã€åï¼Œå°±å¯ä»¥æ ¹æ®æ–°çš„ã€Œé”šç‚¹å…ƒç´ ã€ä¸‹æ ‡å’Œç¼“å†²åŒºå€¼\u003Ccode\u003EBUFFER_SIZE\u003C\u002Fcode\u003Eã€\u003Ccode\u003EVISIBLE_COUNT\u003C\u002Fcode\u003Eæ¥è®¡ç®—ã€Œå¤´æŒ‚è½½å…ƒç´ ã€å’Œã€Œå°¾æŒ‚è½½å…ƒç´ ã€ã€‚\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003Eã€Œé”šç‚¹å…ƒç´ ã€= ã€Œå½“å‰æ»šåŠ¨é«˜åº¦ã€\u002F FIXED_HEIGHT \u002F\u002F å½“åç§»é‡ç»å¯¹å€¼å¤§äº FIXED_HEIGHT æ—¶éœ€è¦é‡æ–°è®¡ç®—ï¼›\nã€Œå¤´æŒ‚è½½å…ƒç´ ã€=ã€Œé”šç‚¹å…ƒç´ ã€- BUFFER_SIZE \u002F\u002F ä¸èƒ½å°äº 0ï¼Œå³ç¬¬ä¸€ä¸ªå…ƒç´ ï¼›\nã€Œå°¾æŒ‚è½½å…ƒç´ ã€= ã€Œå¤´æŒ‚è½½å…ƒç´ ã€+ VISIBLE_COUNT + BUFFER_SIZE \u002F\u002F ä¸èƒ½å¤§äºåˆ—è¡¨é•¿åº¦ï¼Œå³æœ€åä¸€ä¸ªå…ƒç´ ï¼›\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eã€Œé”šç‚¹å…ƒç´ ã€å¤§éƒ¨åˆ†æƒ…å†µä¸‹å¤„äºè¢«\u003Cstrong\u003Eéƒ¨åˆ†é®ç›–\u003C\u002Fstrong\u003Eçš„çŠ¶æ€ï¼Œè¢«é®ç›–çš„éƒ¨åˆ†ä¸ºå®ƒçš„åç§»é‡\u003Ccode\u003Eoffset\u003C\u002Fcode\u003Eï¼Œå…¶ä¸­åŒ…å«æŒ‡å‘å…·ä½“å…ƒç´ çš„ä¸‹æ ‡\u003Ccode\u003Eindex\u003C\u002Fcode\u003Eï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"_nuxt\u002Fimg\u002Fpic-3.9db10a7.png\" alt=\"\"\u003E\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Cp\u003Eäº†è§£äº†ã€Œé”šç‚¹å…ƒç´ ã€æ¦‚å¿µä¹‹åï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥å¤„ç†ã€Œæ»šåŠ¨å®¹å™¨ã€çš„æ»šåŠ¨è¡Œä¸ºäº†ï¼Œé¦–å…ˆç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼š\u003C\u002Fp\u003E\n\u003Cpre  data-line=\"2\" class=\"language-html\"\u003E\u003Ccode data-line=\"2\" class=\"language-html\"\u003E&lt;template&gt;\n  &lt;ul ref=&quot;scroller&quot; class=&quot;height-fixed&quot; @scroll=&quot;handleScroll&quot;&gt;\n    &lt;!-- ... --&gt;\n  &lt;\u002Ful&gt;\n&lt;\u002Ftemplate&gt;\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eæ ¹æ®æ»šåŠ¨æ–¹å‘å’Œåç§»é‡ï¼ŒæŒ‰é¡ºåºæ›´æ–°ã€Œé”šç‚¹å…ƒç´ ã€â†’ã€Œå¤´æŒ‚è½½å…ƒç´ ã€â†’ã€Œå°¾æŒ‚è½½å…ƒç´ ã€â†’ã€Œå¯è§†å…ƒç´ ã€ï¼š\u003C\u002Fp\u003E\n\u003Cpre  data-line=\"52\" class=\"language-js\"\u003E\u003Ccode data-line=\"52\" class=\"language-js\"\u003E\u002F\u002F ...\nexport default {\n  \u002F\u002F ...\n  data() {\n    return {\n      \u002F\u002F ...\n      anchorItem: { index: 0, offset: 0 }, \u002F\u002F ã€Œé”šç‚¹å…ƒç´ ã€åˆå§‹å€¼\n      lastScrollTop: 0, \u002F\u002F è®°å½•ä¸Šæ¬¡æ»šåŠ¨äº‹ä»¶æ—¶ã€Œæ»šåŠ¨å®¹å™¨ã€çš„ã€Œæ»šåŠ¨é«˜åº¦ã€\n    };\n  },\n  methods: {\n    \u002F\u002F ã€Œé”šç‚¹å…ƒç´ ã€æ›´æ–°æ–¹æ³•\n    updateAnchorItem() {\n      const index = Math.floor(this.$refs.scroller.scrollTop \u002F FIXED_HEIGHT);\n      const offset = this.$refs.scroller.scrollTop - index * FIXED_HEIGHT;\n      this.anchorItem = { index, offset };\n    },\n    handleScroll() {\n      \u002F\u002F æ»šåŠ¨å·®å€¼\n      const delta = this.$refs.scroller.scrollTop - this.lastScrollTop;\n      this.lastScrollTop = this.$refs.scroller.scrollTop;\n\n      \u002F\u002F æ›´æ–°ã€Œé”šç‚¹å…ƒç´ ã€åç§»é‡\n      this.anchorItem.offset += delta;\n      const isPositive = delta &gt;= 0;\n      \u002F\u002F åˆ¤æ–­æ»šåŠ¨æ–¹å‘\n      if (isPositive) {\n        \u002F\u002F 1.å½“ã€Œé”šç‚¹å…ƒç´ ã€åç§»é‡å¤§äºç­‰äºå›ºå®šé«˜åº¦æ—¶ï¼Œè¯´æ˜è§†å›¾æ»šåŠ¨æ¡å‘ä¸‹ï¼Œå¹¶è¶…è¿‡ä¸€ä¸ªå…ƒç´ ï¼Œéœ€è¦æ›´æ–°ã€Œé”šç‚¹å…ƒç´ ã€\n        if (this.anchorItem.offset &gt;= FIXED_HEIGHT) {\n          this.updateAnchorItem();\n        }\n        \u002F\u002F 2.è®¡ç®—ã€Œå¤´æŒ‚è½½å…ƒç´ ã€\n        if (this.anchorItem.index - this.firstAttachedItem &gt;= BUFFER_SIZE) {\n          this.firstAttachedItem = Math.min(this.listData.length - VISIBLE_COUNT, this.anchorItem.index - BUFFER_SIZE);\n        }\n      } else {\n        if (this.$refs.scroller.scrollTop &lt;= 0) {\n          \u002F\u002F ç‰¹æ®Šæƒ…å†µï¼šå¤„ç†æ»šåŠ¨åˆ°é¡¶éƒ¨ï¼Œæ›´æ–°ã€Œé”šç‚¹å…ƒç´ ã€ä¸ºåˆå§‹å€¼\n          this.anchorItem = { index: 0, offset: 0 };\n        } else if (this.anchorItem.offset &lt; 0) {\n          \u002F\u002F 1.å½“ã€Œé”šç‚¹å…ƒç´ ã€åç§»é‡å°äºé›¶æ—¶ï¼Œè¯´æ˜è§†å›¾æ»šåŠ¨æ¡å‘ä¸Šï¼Œå¹¶è¶…è¿‡ä¸€ä¸ªå…ƒç´ ï¼Œéœ€è¦æ›´æ–°ã€Œé”šç‚¹å…ƒç´ ã€\n          this.updateAnchorItem();\n        }\n        \u002F\u002F 2.è®¡ç®—ã€Œå¤´æŒ‚è½½å…ƒç´ ã€\n        if (this.anchorItem.index - this.firstAttachedItem &lt; BUFFER_SIZE) {\n          this.firstAttachedItem = Math.max(0, this.anchorItem.index - BUFFER_SIZE);\n        }\n      }\n      \u002F\u002F 3.æ›´æ–°ã€Œå°¾æŒ‚è½½å…ƒç´ ã€\n      this.lastAttachedItem = Math.min(this.firstAttachedItem + VISIBLE_COUNT + BUFFER_SIZE * 2, this.listData.length);\n      \u002F\u002F 4.æ›´æ–°ã€Œå¯è§†å…ƒç´ ã€\n      this.visibleData = this.listData.slice(this.firstAttachedItem, this.lastAttachedItem);\n    },\n  },\n};\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eè‡³æ­¤ï¼Œä¸€ä¸ªç®€å•çš„ã€Œå›ºå®šé«˜åº¦è™šæ‹Ÿæ»šåŠ¨ã€å°±å®ç°äº†ï¼Œæ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œå¯ä»¥è§‚å¯Ÿåˆ°å°±ç®—æ»šåŠ¨æ¡ä¸€ç›´å‘ä¸‹ï¼Œåˆ—è¡¨å…ƒç´ çš„ä¸ªæ•°æ˜¯æ’å®šçš„ï¼š\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"_nuxt\u002Fimg\u002Fpic-8.a90bd13.gif\" alt=\"\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Eä½ å¯ä»¥ç‚¹å‡»\u003Ca href=\"https:\u002F\u002Flkangd.github.io\u002Finfinite-scroll-sample\u002F#\u002Fheight-fixed\" target=\"_blank\"\u003Eæ­¤å¤„\u003C\u002Fa\u003Eè¿›è¡Œä½“éªŒã€‚\u003C\u002Fp\u003E\n\u003Ch2 id=\"dongtaigaodudexuniliebiao\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'dongtaigaodudexuniliebiao')\"\u003EÂ¶\u003C\u002Fa\u003E åŠ¨æ€é«˜åº¦çš„è™šæ‹Ÿåˆ—è¡¨\u003C\u002Fh2\u003E\n\u003Cp\u003Eå› ä¸ºä¸å†å…·æœ‰å›ºå®šçš„å…ƒç´ é«˜åº¦ï¼Œæ‰€ä»¥ã€Œå¯æ»šåŠ¨é«˜åº¦ã€å’Œã€Œå¯è§†å…ƒç´ ã€å¾ˆéš¾åƒå®ç°å›ºå®šé«˜åº¦çš„è™šæ‹Ÿåˆ—è¡¨é‚£æ ·ï¼Œå¯ä»¥åœ¨è·å–æ•°æ®åè¿›è¡Œä¸€æ¬¡æ€§è®¡ç®—å°±å®Œäº‹ã€‚ä¸‹é¢æ¥è¯´è¯´åŠ¨æ€é«˜åº¦è™šæ‹Ÿåˆ—è¡¨çš„å…³é”®éš¾ç‚¹ï¼š\u003C\u002Fp\u003E\n\u003Ch3 id=\"guanjiandianyiruhehuodeyuansudedongtaigaodu\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'guanjiandianyiruhehuodeyuansudedongtaigaodu')\"\u003EÂ¶\u003C\u002Fa\u003E å…³é”®ç‚¹ä¸€ï¼šå¦‚ä½•è·å¾—å…ƒç´ çš„åŠ¨æ€é«˜åº¦ï¼Ÿ\u003C\u002Fh3\u003E\n\u003Cp\u003EæŒ‰å¸¸è§„æƒ…å†µï¼Œä¸€ä¸ªåˆ—è¡¨å…ƒç´ é«˜åº¦ä¸ºåŠ¨æ€çš„æƒ…å†µå¤§è‡´åˆ†ä¸ºä¸‰ç§ï¼š\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003Eåˆ—è¡¨å…ƒç´ å†…åˆå§‹æ¸²æŸ“æ—¶é«˜åº¦å°±ä¸ç¡®å®šã€‚æ¯”å¦‚\u003Cstrong\u003Eä¸å®šè¡Œæ•°\u003C\u002Fstrong\u003Eçš„å¤šè¡Œæ–‡æœ¬ã€åˆ—è¡¨å…ƒç´ å†…åŒ…å«\u003Cstrong\u003Eä¸å®šé•¿åº¦\u003C\u002Fstrong\u003Eçš„å†…åµŒåˆ—è¡¨ç­‰ï¼›\u003C\u002Fli\u003E\n\u003Cli\u003Eåˆ—è¡¨å…ƒç´ å†…åˆå§‹æ¸²æŸ“åå› ç”¨æˆ·æ“ä½œè€Œé«˜åº¦å‘ç”Ÿå˜åŒ–ã€‚æ¯”å¦‚å±•å¼€ä¸€ä¸ª\u003Cstrong\u003Eæ”¶ç¼©é¡¹ç›®\u003C\u002Fstrong\u003Eã€\u003Cstrong\u003Eåˆ é™¤æˆ–å¢åŠ \u003C\u002Fstrong\u003Eå­å…ƒç´ ç­‰ï¼›\u003C\u002Fli\u003E\n\u003Cli\u003Eåˆ—è¡¨å…ƒç´ å†…åŒ…å«å¼‚æ­¥æ¸²æŸ“å…ƒç´ ã€‚æ¯”å¦‚æœªç¼“å­˜è¿‡çš„\u003Cstrong\u003Eå›¾ç‰‡\u003C\u002Fstrong\u003Eã€\u003Cstrong\u003Eå¼‚æ­¥ç»„ä»¶\u003C\u002Fstrong\u003Eç­‰ã€‚\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003Eç”±äºè¿™äº›å¤æ‚çš„æƒ…å†µå¯èƒ½åŒæ—¶å­˜åœ¨ä¸€ä¸ªåˆ—è¡¨å…ƒç´ å†…ï¼Œæ‰€ä»¥åªèƒ½å¤Ÿå®æ—¶ç›‘å¬æ¯ä¸€ä¸ª\u003Cstrong\u003Eå¤„äºå¯è§†åŒºåŸŸ\u003C\u002Fstrong\u003Eå†…çš„å…ƒç´ çš„é«˜åº¦ã€‚ç°é˜¶æ®µ ECMA DOM è§„èŒƒä¸‹ï¼Œæœ‰ä¸¤ä¸ª API å¯ä»¥è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼š\u003Ca href=\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fzh-CN\u002Fdocs\u002FWeb\u002FAPI\u002FMutationObserver\" target=\"_blank\"\u003EMutationObserver\u003C\u002Fa\u003Eå’Œ \u003Ca href=\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fzh-CN\u002Fdocs\u002FWeb\u002FAPI\u002FResizeObserver\" target=\"_blank\"\u003EResizeObserver\u003C\u002Fa\u003Eã€‚\u003C\u002Fp\u003E\n\u003Cp\u003Eè¿™ä¸¤ä¸ª API éƒ½å­˜åœ¨ä¸€å®šçš„å…¼å®¹æ€§é—®é¢˜ï¼Œ\u003Ca href=\"https:\u002F\u002Fcaniuse.com\u002F#feat=resizeobserver\" target=\"_blank\"\u003Ecaniuse#ResizeObserver\u003C\u002Fa\u003E | \u003Ca href=\"https:\u002F\u002Fcaniuse.com\u002F#search=MutationObserver\" target=\"_blank\"\u003Ecaniuse#MutationObserver\u003C\u002Fa\u003Eï¼Œå¯ä»¥ä½¿ç”¨å¯¹åº”çš„\u003Ccode\u003Epolyfill\u003C\u002Fcode\u003Eè¿›è¡Œè§£å†³ï¼Œå› ä¸º\u003Ccode\u003EResizeObserver\u003C\u002Fcode\u003Eå¯ä»¥æ›´ç›´è§‚åœ°è¾¾åˆ°ç›‘å¬å…ƒç´ é«˜åº¦å˜åŠ¨çš„ç›®çš„ï¼Œæ‰€ä»¥è¿™é‡Œé€‰æ‹©ä½¿ç”¨\u003Ccode\u003EResizeObserver\u003C\u002Fcode\u003Eã€‚\u003Ccode\u003EResizeObserver\u003C\u002Fcode\u003Eçš„ \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fque-etc\u002Fresize-observer-polyfill\" target=\"_blank\"\u003Epolyfill\u003C\u002Fa\u003Eã€‚\u003C\u002Fp\u003E\n\u003Ch3 id=\"guanjiandianerruhemonikegundonggaodu\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'guanjiandianerruhemonikegundonggaodu')\"\u003EÂ¶\u003C\u002Fa\u003E å…³é”®ç‚¹äºŒï¼šå¦‚ä½•æ¨¡æ‹Ÿã€Œå¯æ»šåŠ¨é«˜åº¦ã€ï¼Ÿ\u003C\u002Fh3\u003E\n\u003Cp\u003Eå› ä¸ºåˆ—è¡¨å…ƒç´ çš„é«˜åº¦ä¸å†æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥ã€Œå¯æ»šåŠ¨é«˜åº¦ã€ä¸èƒ½å†é€šè¿‡ã€Œåˆ—è¡¨å…ƒç´ ä¸ªæ•°ã€*ã€Œå›ºå®šå…ƒç´ é«˜åº¦ã€ç®€å•é€»è¾‘å…³ç³»æ¥è·å¾—ã€‚æ­¤æ—¶ï¼Œåªèƒ½åŸºäºä¸šåŠ¡çš„å®é™…æƒ…å†µï¼Œç»™æ¯ä¸ªåˆ—è¡¨å…ƒç´ å®šä¸€ä¸ªã€Œä¼°ç®—é«˜åº¦ã€ï¼š\u003Ccode\u003EESTIMATED_HEIGHT\u003C\u002Fcode\u003Eã€‚\u003C\u002Fp\u003E\n\u003Cp\u003EåŒæ—¶ï¼Œè¿˜éœ€è¦æ–°å¢ä¸€ä¸ª\u003Ccode\u003EcachedHeight\u003C\u002Fcode\u003Eæ•°ç»„ï¼Œæ ¹æ®ä¸Šä¸€å…³é”®ç‚¹æåˆ°çš„å…ƒç´ é«˜åº¦å˜åŒ–äº‹ä»¶ï¼Œä»¥æ¯ä¸€ä¸ªåˆ—è¡¨å…ƒç´ å¯¹åº”çš„ä¸‹æ ‡è®°å½•æœ€åä¸€æ¬¡å˜åŒ–çš„é«˜åº¦ã€‚å¦‚æœå…ƒç´ æœªæ¸²æŸ“æˆ–è€…è¢«ç•¥è¿‡æ¸²æŸ“æ—¶ï¼Œç”¨\u003Ccode\u003EESTIMATED_HEIGHT\u003C\u002Fcode\u003Eè¿›è¡Œæš‚æ—¶ä»£æ›¿ã€‚\u003C\u002Fp\u003E\n\u003Cp\u003Eç”±æ­¤å¯å¾—çŸ¥ï¼Œã€Œå¯æ»šåŠ¨é«˜åº¦ã€\u003Ccode\u003EscrollRunwayEnd\u003C\u002Fcode\u003Eåªèƒ½æ˜¯ã€ŒåŠ¨æ€ã€ä¸”ã€Œå¤§è‡´å‡†ç¡®ã€çš„ã€‚åœ¨ vue é‡Œï¼Œå¯ä»¥ç”¨ä¸€ä¸ªã€Œè®¡ç®—å±æ€§ã€è¿›è¡Œå®æ—¶ä¼°å€¼ï¼š\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003E  \u002F\u002F ...\n  data() {\n    return {\n      \u002F\u002F ...\n      \u002F\u002F scrollRunwayEnd: 0,\n    };\n  },\n  computed: {\n    scrollRunwayEnd() {\n      \u002F\u002F æ ¹æ®å½“å‰å·²æ¸²æŸ“çš„å…ƒç´ é«˜åº¦ï¼Œæ±‚å¾—å½“å‰æ‰€æœ‰å…ƒç´ æ€»é«˜åº¦\n      const maxScrollY = this.cachedHeight.reduce((sum, h) =&gt; (sum += h || ESTIMATED_HEIGHT), 0);\n      \u002F\u002F æ ¹æ®å½“å‰æ‰€æœ‰å…ƒç´ æ€»é«˜åº¦ï¼Œæ±‚å¾—å…ƒç´ å¹³å‡é«˜åº¦\n      const currentAverageH = maxScrollY \u002F this.cachedHeight.length;\n      \u002F\u002F è¿”å›ä¼°ç®—é«˜åº¦\n      return maxScrollY + (this.listData.length - this.cachedHeight.length) * currentAverageH;\n    },\n  },\n  \u002F\u002F ...\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 id=\"guanjiandiansanruhejisuanmeiyigeyuansudescrollY\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'guanjiandiansanruhejisuanmeiyigeyuansudescrollY')\"\u003EÂ¶\u003C\u002Fa\u003E å…³é”®ç‚¹ä¸‰ï¼šå¦‚ä½•è®¡ç®—æ¯ä¸€ä¸ªå…ƒç´ çš„ã€ŒscrollYã€ï¼Ÿ\u003C\u002Fh3\u003E\n\u003Cp\u003Eè¿™ä¸€æ­¥æ˜¯æœ€éš¾çš„ï¼Œå› ä¸ºé™¤äº†ç¬¬ä¸€ä¸ªå…ƒç´ å¤–çš„æ¯ä¸€ä¸ªå…ƒç´ çš„ã€ŒscrollYã€å¯èƒ½éƒ½ä¼šå› ä¸ºä¸‹é¢å‡ ç§æƒ…å†µè€Œå¤±æ•ˆï¼š\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E\u003Cstrong\u003Eå½“å‰å…ƒç´ çš„ä¸Šä¸€ä¸ªå…ƒç´ é«˜åº¦å‘ç”Ÿäº†å˜åŒ–ã€‚\u003C\u002Fstrong\u003E è¿™ç§æƒ…å†µæ„å‘³ç€ä»\u003Cstrong\u003Eå½“å‰å…ƒç´ \u003C\u002Fstrong\u003Eå¼€å§‹ï¼Œæ¯ä¸€ä¸ªåç»­å…ƒç´ éƒ½éœ€è¦æŒ‰\u003Cstrong\u003Eä¸Šä¸€ä¸ªå…ƒç´ \u003C\u002Fstrong\u003Eçš„é«˜åº¦å·®å€¼è¿›è¡Œã€ŒscrollYã€è®¡ç®—ã€‚\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cstrong\u003Eç”¨æˆ·å¿«é€Ÿæ‹–åŠ¨æ»šåŠ¨æ¡è‡³åº•éƒ¨æˆ–é¡¶éƒ¨ã€‚\u003C\u002Fstrong\u003E ç”±äºç•¥è¿‡äº†ä¸­é—´å…ƒç´ çš„æ¸²æŸ“ï¼Œ\u003Ccode\u003EcachedHeight\u003C\u002Fcode\u003Eä¼šç¼ºå°‘ç•¥è¿‡å…ƒç´ çš„çœŸå®é«˜åº¦ï¼Œæ‰€ä»¥åªèƒ½ç”¨ä¸Šæ–‡çš„\u003Ccode\u003EESTIMATED_HEIGHT\u003C\u002Fcode\u003Eè¿›è¡Œä»£æ›¿ã€‚è¿™ç§æƒ…å†µä¸‹ç”¨æˆ·å†ç¼“æ…¢æ»šåŠ¨åˆ°é¡¶éƒ¨æ—¶ï¼Œç•¥è¿‡å…ƒç´ çš„åˆæ¬¡æ¸²æŸ“ä¼šæ›´æ–°\u003Ccode\u003EcachedHeight\u003C\u002Fcode\u003Eä¸­å¯¹åº”çš„è®°å½•ã€‚æ­¤æ—¶æ›´æ–°çš„é«˜åº¦è‚¯å®šæ˜¯å¤§äºæˆ–è€…å°äº\u003Ccode\u003EESTIMATED_HEIGHT\u003C\u002Fcode\u003Eçš„ï¼Œæ‰€ä»¥å½“ç”¨æˆ·æŒç»­æ»šåŠ¨ç¼“æ…¢æ»šåŠ¨åˆ°\u003Ccode\u003EscrollTop\u003C\u002Fcode\u003Eä¸º 0 æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç° \u003Cstrong\u003E\u003Cem\u003Eä¸Šéƒ¨æ»šåŠ¨åŒºåŸŸ\u003C\u002Fem\u003E\u003C\u002Fstrong\u003Eã€Œä¸è¶³ã€æˆ–è€…ã€Œå¤šä½™ã€çš„æƒ…å†µã€‚å› æ­¤ï¼Œå¿…é¡»åœ¨\u003Cstrong\u003Eä¿è¯å½“å‰é¡µé¢æ»šåŠ¨æƒ…å†µä¸å˜\u003C\u002Fstrong\u003Eçš„å‰æä¸‹ï¼Œæå‰å¯¹è¿™ä¸¤ç§æƒ…å†µè¿›è¡Œå®æ—¶ä¿®æ­£ï¼Œä¹Ÿå³ä¿®æ­£\u003Ccode\u003EscrollTop\u003C\u002Fcode\u003Eçš„åŒæ—¶é‡æ–°è®¡ç®—ã€Œé”šç‚¹å…ƒç´ ã€ã€‚\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cstrong\u003Eå±å¹•å®½åº¦å‘ç”Ÿæ”¹å˜ã€‚\u003C\u002Fstrong\u003E æ‰‹æœºå±å¹•æ¨ªç«–æ–¹å‘æ”¹å˜å’Œæ‰‹åŠ¨æ”¹å˜æµè§ˆå™¨çª—å£å¤§å°éƒ½å¯èƒ½å¯¼è‡´ã€Œæ»šåŠ¨å®¹å™¨ã€çš„å®½åº¦å‘ç”Ÿå˜åŒ–ï¼Œã€Œæ»šåŠ¨å®¹å™¨ã€çš„å®½åº¦å†³å®šäº†åˆ—è¡¨å…ƒç´ çš„é«˜åº¦ï¼Œè¿™ç§æƒ…å†µä¸‹æ¯ä¸€ä¸ªå…ƒç´ çš„ã€ŒscrollYã€éƒ½å°†å¤±æ•ˆï¼Œéœ€è¦é‡æ–°è®¡ç®—ã€‚åŒæ—¶ï¼Œä¸ºäº†æ›´å¥½åœ°çš„ç”¨æˆ·ä½“éªŒï¼Œæˆ‘ä»¬åº”è¯¥åœ¨å®½åº¦å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¿æŒã€Œé”šå®šå…ƒç´ ã€çš„\u003Ccode\u003Eoffset\u003C\u002Fcode\u003Eä¸å˜ï¼Œä¸¾ä¸€ä¸ª twitter ä¾‹å­ï¼š\u003Cbr\u003E\n\u003Cimg src=\"_nuxt\u002Fimg\u002Fpic-4.194b7ea.gif\" alt=\"\"\u003E\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003Eå› æ­¤ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸å†å°†ã€ŒscrollYã€ç›´æ¥èµ‹äºˆæ¯ä¸€ä¸ªåˆ—è¡¨å…ƒç´ ï¼Œè€Œæ˜¯æ–°å¢ä¸€ä¸ª\u003Ccode\u003EcachedScrollY\u003C\u002Fcode\u003Eæ•°ç»„ç”¨äºå­˜å‚¨æ‰€æœ‰åˆ—è¡¨å…ƒç´ çš„ä¸´æ—¶ã€ŒscrollYã€ã€‚åœ¨æ¯ä¸€æ¬¡æ»šåŠ¨äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œæ ¹æ®æ»šåŠ¨å·®å€¼æ˜¯å¦è¶…è¿‡ã€Œé”šç‚¹å…ƒç´ ã€å¯¹åº”çš„\u003Ccode\u003EcachedHeight\u003C\u002Fcode\u003Eå»åˆ¤æ–­æ˜¯å¦éœ€è¦æ›´æ–°ã€Œé”šç‚¹å…ƒç´ ã€ã€‚å¦‚æœã€Œé”šç‚¹å…ƒç´ ã€å‘ç”Ÿæ”¹å˜ï¼Œä»¥ã€Œé”šç‚¹å…ƒç´ ã€ä¸ºåŸºç‚¹ï¼Œç”¨æ¯ä¸€ä¸ªã€Œå¯è§†å…ƒç´ ã€å¯¹åº”çš„\u003Ccode\u003EcachedHeight\u003C\u002Fcode\u003Eå åŠ ã€Œé”šç‚¹å…ƒç´ ã€çš„ã€ŒscrollYã€å»è®¡ç®—è‡ªèº«çš„ã€ŒscrollYã€ï¼Œç„¶åæ›´æ–°æ¯ä¸ªåˆ—è¡¨å…ƒç´ å¯¹åº”\u003Ccode\u003EcachedScrollY\u003C\u002Fcode\u003Eï¼Œæœ€åæ¸²æŸ“åˆ°ã€Œå¯è§†åŒºåŸŸã€ã€‚\u003C\u002Fp\u003E\n\u003Ch3 id=\"zhunbeigongzuodongtaigaodu\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'zhunbeigongzuodongtaigaodu')\"\u003EÂ¶\u003C\u002Fa\u003E å‡†å¤‡å·¥ä½œ|åŠ¨æ€é«˜åº¦\u003C\u002Fh3\u003E\n\u003Cp\u003Eä¿®æ”¹éšæœºæ•°æ®å‡½æ•°ï¼Œç»™æ¯ä¸ªå…ƒç´ å¢åŠ \u003Cstrong\u003Eéšæœºå›¾ç‰‡\u003C\u002Fstrong\u003Eå’Œè¯¥å›¾ç‰‡çš„\u003Cstrong\u003Eéšæœºå®½åº¦\u003C\u002Fstrong\u003Eï¼š\u003C\u002Fp\u003E\n\u003Cpre  data-line=\"7,8\" class=\"language-js\"\u003E\u003Ccode data-line=\"7,8\" class=\"language-js\"\u003Eexport function fetchData(count = 30) {\n  const result = [];\n  for (let i = 0; i &lt; count; i++) {\n    const item = faker.helpers.contextualCard();\n    item.paragraph = faker.lorem.paragraph();\n    item.img = {\n      src: `\u002Fimages\u002F${faker.random.number({ min: 1, max: 20 })}.jpeg`, \u002F\u002F ä»ç»™å®šçš„ 20 å¼ å›¾ç‰‡å†…éšæœº\n      width: `${faker.random.number({ min: 100, max: 700 })}px`, \u002F\u002F ä» 100px - 700px èŒƒå›´å†…éšæœº\n    };\n    result.push(item);\n  }\n  return result;\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eä¿®æ”¹\u003Ccode\u003Eitem\u003C\u002Fcode\u003Eç»„ä»¶ï¼Œæ³¨æ„åŠ è½½çš„ä¸¤å¼ å›¾ç‰‡ï¼šä¸€å¼ ä¸ºæ­£å¸¸åŠ è½½çš„å›¾ç‰‡ï¼Œä¸€å¼ ä¸º\u003Cstrong\u003Eäººå·¥å»¶æ—¶\u003C\u002Fstrong\u003EåŠ è½½çš„å›¾ç‰‡ï¼š\u003C\u002Fp\u003E\n\u003Cpre  data-line=\"8-14\" class=\"language-html\"\u003E\u003Ccode data-line=\"8-14\" class=\"language-html\"\u003E&lt;template&gt;\n  &lt;li class=&quot;item&quot; ref=&quot;item&quot;&gt;\n    &lt;div class=&quot;item__wrapper&quot; :class=&quot;{ 'is-fixed': fixedHeight }&quot;&gt;\n      &lt;!-- ... --&gt;\n      &lt;template v-if=&quot;fixedHeight&quot;&gt;\n        &lt;!-- ... --&gt;\n      &lt;\u002Ftemplate&gt;\n      &lt;template v-else&gt;\n        &lt;p class=&quot;item__paragraph&quot;&gt;{{ data.paragraph }}&lt;\u002Fp&gt;\n        &lt;!-- æ¨¡æ‹Ÿå»¶æ—¶åŠ è½½å›¾ç‰‡ --&gt;\n        &lt;img class=&quot;item__img&quot; :src=&quot;defferImgSrc&quot; :style=&quot;{width: data.img.width}&quot; \u002F&gt;\n        &lt;!-- æ­£å¸¸åŠ è½½å›¾ç‰‡ --&gt;\n        &lt;img class=&quot;item__img&quot; :src=&quot;data.img.src&quot; :style=&quot;{width: data.img.width}&quot; \u002F&gt;\n      &lt;\u002Ftemplate&gt;\n    &lt;\u002Fdiv&gt;\n  &lt;\u002Fli&gt;\n&lt;\u002Ftemplate&gt;\n&lt;script&gt;\n  \u002F\u002F ...\n  export default {\n    \u002F\u002F ...\n    props: {\n      \u002F\u002F ...\n      fixedHeight: {\n        type: Boolean,\n        default: true,\n      },\n    },\n    data() {\n      return {\n        defferImgSrc: '',\n      };\n    },\n    created() {\n      \u002F\u002F æ¨¡æ‹Ÿå›¾ç‰‡åŠ è½½æ—¶é—´\n      if (this.data.img.isDeffer) {\n        this.defferImgSrc = this.data.img.src;\n      } else {\n        setTimeout(() =&gt; {\n          this.defferImgSrc = this.data.img.src;\n          this.data.img.isDeffer = true;\n        }, faker.random.number({ min: 300, max: 5000 }));\n      }\n    },\n  };\n&lt;\u002Fscript&gt;\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eæœ€åï¼Œåœ¨\u003Ccode\u003Emounted\u003C\u002Fcode\u003Eé’©å­å†…ä½¿ç”¨ \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fque-etc\u002Fresize-observer-polyfill\" target=\"_blank\"\u003Eresize-observer-polyfill\u003C\u002Fa\u003E ç›‘å¬å…ƒç´ é«˜åº¦å˜åŒ–ï¼š\u003C\u002Fp\u003E\n\u003Cpre  data-line=\"10\" class=\"language-js\"\u003E\u003Ccode data-line=\"10\" class=\"language-js\"\u003Eimport ResizeObserver from 'resize-observer-polyfill';\n\nexport default {\n  \u002F\u002F ...\n  mounted() {\n    if (this.fixedHeight) return;\n\n    const ro = new ResizeObserver((entries, observer) =&gt; {\n      \u002F\u002F é«˜åº¦å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°† 'size-change' äº‹ä»¶ emit åˆ°çˆ¶ç»„ä»¶\n      this.$emit('size-change', this.index);\n    });\n    ro.observe(this.$refs.item);\n    this.$once('hook:beforeDestroy', ro.disconnect.bind(ro));\n  },\n  \u002F\u002F ...\n};\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eé€šè¿‡è·¯ç”±æŒ‚è½½åï¼Œå®Œæˆä¸€ä¸ªåŠ¨æ€é«˜åº¦å…ƒç´ åˆ—è¡¨çš„æ¸²æŸ“ï¼Œå¦‚ä¸‹å›¾ï¼š\u003Cbr\u003E\n\u003Cimg src=\"_nuxt\u002Fimg\u002Fpic-2.42bae0b.png\" alt=\"\"\u003E\u003C\u002Fp\u003E\n\u003Ch3 id=\"jiantingyuansugaodubianhua\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'jiantingyuansugaodubianhua')\"\u003EÂ¶\u003C\u002Fa\u003E ç›‘å¬å…ƒç´ é«˜åº¦å˜åŒ–\u003C\u002Fh3\u003E\n\u003Cp\u003Eåœ¨æ¯ä¸€æ¬¡ã€Œå¯è§†å…ƒç´ ã€çš„é«˜åº¦å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä»¥ã€Œé”šç‚¹å…ƒç´ ã€ä¸ºåŸºç‚¹ï¼Œè®¡ç®—å‡ºã€Œé”šç‚¹å…ƒç´ ã€çš„\u003Ccode\u003EscrollY\u003C\u002Fcode\u003Eï¼Œç„¶åæŒ‰ã€Œé”šç‚¹å…ƒç´ ã€ä¹‹å‰å’Œä¹‹åçš„å…ƒç´ è¿›è¡ŒåŒºåˆ«è®¡ç®—ï¼Œå¾—å‡ºæ‰€æœ‰ã€Œå¯è§†å…ƒç´ ã€çš„æœ€æ–°\u003Ccode\u003EscrollY\u003C\u002Fcode\u003Eã€‚\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cem\u003Eæ³¨æ„ï¼šåˆ—è¡¨å…ƒç´ çš„åˆæ¬¡æ¸²æŸ“å’Œåç»­çš„é«˜åº¦å˜åŒ–éƒ½ä¼šè§¦å‘\u003Ccode\u003EResizeObserver\u003C\u002Fcode\u003Eäº‹ä»¶\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cpre  data-line=\"13\" class=\"language-html\"\u003E\u003Ccode data-line=\"13\" class=\"language-html\"\u003E&lt;template&gt;\n  &lt;ul ref=&quot;scroller&quot; class=&quot;height-dynamic&quot; @scroll=&quot;handleScroll&quot;&gt;\n    &lt;!-- ... --&gt;\n    &lt;item\n      class=&quot;height-dynamic__item&quot;\n      v-for=&quot;item in visibleData&quot;\n      ref=&quot;items&quot;\n      :data=&quot;item&quot;\n      :fixed-height=&quot;false&quot;\n      :key=&quot;item.username + item.phone&quot;\n      :index=&quot;item.index&quot;\n      :style=&quot;`transform: translate(0, ${cachedScrollY[item.index]}px)`&quot;\n      @size-change=&quot;handleSizeChange&quot;\n    \u002F&gt;\n  &lt;\u002Ful&gt;\n&lt;\u002Ftemplate&gt;\n&lt;script&gt;\n  export default {\n    \u002F\u002F ...\n    methods: {\n      handleSizeChange(index) {\n        this.calItemScrollY();\n      },\n      \u002F\u002F è®¡ç®—æ¯ä¸€ä¸ªã€Œå¯è§†å…ƒç´ ã€çš„ scrollY\n      async calItemScrollY() {\n        await this.$nextTick();\n        \u002F\u002F ä¿®æ­£ vue diff ç®—æ³•å¯¼è‡´ã€Œå¯è§†å…ƒç´ ã€é¡ºåºä¸æ­£ç¡®çš„é—®é¢˜\n        this.$refs.items.sort((a, b) =&gt; a.index - b.index);\n\n        \u002F\u002F è·å–ã€Œé”šç‚¹å…ƒç´ ã€åœ¨ã€Œå¯è§†å…ƒç´ ã€ä¸­çš„åºå·\n        const anchorDomIndex = this.$refs.items.findIndex(item =&gt; item.index === this.anchorItem.index);\n        const anchorDom = this.$refs.items[anchorDomIndex];\n        const anchorDomHeight = anchorDom.$el.getBoundingClientRect().height;\n\n        \u002F\u002F é€šè¿‡ã€Œæ»šåŠ¨å®¹å™¨ã€çš„ã€Œå½“å‰æ»šåŠ¨é«˜åº¦ã€å’Œã€Œé”šç‚¹å…ƒç´ ã€çš„ offset ç®—å‡ºå…¶ scrollY\n        this.$set(this.cachedScrollY, this.anchorItem.index, this.$refs.scroller.scrollTop - this.anchorItem.offset);\n        this.$set(this.cachedHeight, this.anchorItem.index, anchorDomHeight);\n\n        \u002F\u002F è®¡ç®— anchorItem åé¢çš„åˆ—è¡¨å…ƒç´  scrollY\n        for (let i = anchorDomIndex + 1; i &lt; this.$refs.items.length; i++) {\n          const item = this.$refs.items[i];\n          const { height } = item.$el.getBoundingClientRect();\n          this.$set(this.cachedHeight, item.index, height);\n          \u002F\u002F å½“å‰å…ƒç´ çš„ scrollY æ˜¯ä¸Šä¸€ä¸ªå…ƒç´ çš„ scrollY + ä¸Šä¸€ä¸ªå…ƒç´ çš„é«˜åº¦\n          const scrollY = this.cachedScrollY[item.index - 1] + this.cachedHeight[item.index - 1];\n          this.$set(this.cachedScrollY, item.index, scrollY);\n        }\n        \u002F\u002F è®¡ç®— anchorItem å‰é¢çš„åˆ—è¡¨å…ƒç´  scrollY\n        for (let i = anchorDomIndex - 1; i &gt;= 0; i--) {\n          const item = this.$refs.items[i];\n          const { height } = item.$el.getBoundingClientRect();\n          this.$set(this.cachedHeight, item.index, height);\n          \u002F\u002F å½“å‰å…ƒç´ çš„ scrollY æ˜¯ä¸‹ä¸€ä¸ªå…ƒç´ çš„ scrollY - å½“å‰å…ƒç´ çš„é«˜åº¦\n          const scrollY = this.cachedScrollY[item.index + 1] - this.cachedHeight[item.index];\n          this.$set(this.cachedScrollY, item.index, scrollY);\n        }\n      },\n      \u002F\u002F ...\n    },\n    \u002F\u002F ...\n  };\n&lt;\u002Fscript&gt;\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 id=\"gundonggengxinkeshiyuansudongtaigaodu\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'gundonggengxinkeshiyuansudongtaigaodu')\"\u003EÂ¶\u003C\u002Fa\u003E æ»šåŠ¨æ›´æ–°ã€Œå¯è§†å…ƒç´ ã€|åŠ¨æ€é«˜åº¦\u003C\u002Fh3\u003E\n\u003Cp\u003Eã€Œå¯æ»šåŠ¨é«˜åº¦ã€çš„è®¡ç®—å·²ç»åœ¨ä¸Šé¢æè¿‡ï¼Œè€Œåˆå§‹ã€Œå¯è§†å…ƒç´ ã€å’Œå›ºå®šé«˜åº¦çš„è™šæ‹Ÿåˆ—è¡¨çš„è®¡ç®—æ˜¯ç±»ä¼¼çš„ï¼Œæ‰€ä»¥è¿™é‡Œè·³è¿‡è¿™ä¸¤ç‚¹ï¼Œåªæè¿°å¦‚ä½•å¤„ç†æ»šåŠ¨æ›´æ–°ã€Œå¯è§†å…ƒç´ ã€ã€‚\u003C\u002Fp\u003E\n\u003Cp\u003Eæ ¹æ®æ»šåŠ¨æ–¹å‘å’Œåç§»é‡ï¼ŒæŒ‰é¡ºåºæ›´æ–°ã€Œé”šç‚¹å…ƒç´ ã€â†’ã€Œå¤´æŒ‚è½½å…ƒç´ ã€â†’ã€Œå°¾æŒ‚è½½å…ƒç´ ã€â†’ã€Œå¯è§†å…ƒç´ ã€ï¼š\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003E\u002F\u002F ...\nexport default {\n  \u002F\u002F ...\n  methods: {\n    \u002F\u002F ...\n    handleScroll() {\n      const delta = this.$refs.scroller.scrollTop - this.lastScrollTop;\n      this.lastScrollTop = this.$refs.scroller.scrollTop;\n      \u002F\u002F 1.æ›´æ–°ã€Œé”šç‚¹å…ƒç´ ã€\n      this.updateAnchorItem(delta);\n      \u002F\u002F æ›´æ–°ã€Œå¤´æŒ‚è½½å…ƒç´ ã€â†’ã€Œå°¾æŒ‚è½½å…ƒç´ ã€â†’ã€Œå¯è§†å…ƒç´ ã€\n      this.updateVisibleData();\n    },\n    async updateAnchorItem(delta) {\n      const lastIndex = this.anchorItem.index;\n      const lastOffset = this.anchorItem.offset;\n      delta += lastOffset;\n\n      let index = lastIndex;\n      const isPositive = delta &gt;= 0;\n      \u002F\u002F åˆ¤æ–­æ»šåŠ¨æ–¹å‘\n      if (isPositive) {\n        \u002F\u002F ç”¨ delta ä¸€ç›´å‡å»ä»ã€Œé”šç‚¹å…ƒç´ ã€å¼€å§‹å‘ä¸‹æ–¹å‘çš„ã€Œå¯è§†å…ƒç´ ã€é«˜åº¦ï¼Œæ¯å‡ä¸€æ¬¡ index å‰è¿›ä¸€ä½\n        while (index &lt; this.listData.length &amp;&amp; delta &gt; (this.cachedHeight[index] || ESTIMATED_HEIGHT)) {\n          \u002F\u002F å½“ this.cachedHeight[index] ä¸å­˜åœ¨æ—¶ï¼Œè¯´æ˜å¯èƒ½è¢«å¿«é€Ÿæ‹–åŠ¨æ»šåŠ¨æ¡è€Œç•¥è¿‡æ¸²æŸ“ï¼Œæ­¤æ—¶éœ€è¦å¡«å……ä¼°è®¡é«˜åº¦\n          if (!this.cachedHeight[index]) {\n            this.$set(this.cachedHeight, index, ESTIMATED_HEIGHT);\n          }\n          delta -= this.cachedHeight[index];\n          index++;\n        }\n        if (index &gt;= this.listData.length) {\n          this.anchorItem = { index: this.listData.length - 1, offset: 0 };\n        } else {\n          this.anchorItem = { index, offset: delta };\n        }\n      } else {\n        \u002F\u002F ç”¨ delta ä¸€ç›´å åŠ ä»ã€Œé”šç‚¹å…ƒç´ ã€å¼€å§‹å‘ä¸Šæ–¹å‘çš„ã€Œå¯è§†å…ƒç´ ã€é«˜åº¦ï¼Œæ¯åŠ ä¸€æ¬¡ index åé€€ä¸€ä½\n        while (delta &lt; 0) {\n          \u002F\u002F å½“ this.cachedHeight[index] ä¸å­˜åœ¨æ—¶ï¼Œè¯´æ˜å¯èƒ½è¢«å¿«é€Ÿæ‹–åŠ¨æ»šåŠ¨æ¡è€Œç•¥è¿‡æ¸²æŸ“ï¼Œæ­¤æ—¶éœ€è¦å¡«å……ä¼°è®¡é«˜åº¦\n          if (!this.cachedHeight[index - 1]) {\n            this.$set(this.cachedHeight, index - 1, ESTIMATED_HEIGHT);\n          }\n          delta += this.cachedHeight[index - 1];\n          index--;\n        }\n        if (index &lt; 0) {\n          this.anchorItem = { index: 0, offset: 0 };\n        } else {\n          this.anchorItem = { index, offset: delta };\n        }\n      }\n    },\n    updateVisibleData() {\n      \u002F\u002F 2.æ›´æ–°ã€Œå¤´æŒ‚è½½å…ƒç´ ã€ï¼Œæ³¨æ„ä¸èƒ½å°äº 0\n      const start = (this.firstAttachedItem = Math.max(0, this.anchorItem.index - BUFFER_SIZE));\n      \u002F\u002F 3.æ›´æ–°ã€Œå°¾æŒ‚è½½å…ƒç´ ã€\n      this.lastAttachedItem = this.firstAttachedItem + VISIBLE_COUNT + BUFFER_SIZE * 2;\n      const end = Math.min(this.lastAttachedItem, this.listData.length);\n      \u002F\u002F 4.æ›´æ–°ã€Œå¯è§†å…ƒç´ ã€\n      this.visibleData = this.listData.slice(start, end);\n    },\n    \u002F\u002F ...\n  },\n  \u002F\u002F ...\n};\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 id=\"xiuzhenggundongtiao\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'xiuzhenggundongtiao')\"\u003EÂ¶\u003C\u002Fa\u003E ä¿®æ­£æ»šåŠ¨æ¡\u003C\u002Fh3\u003E\n\u003Cp\u003Eåˆ°è¿™ä¸€æ­¥ï¼Œè¿™ä¸ªã€ŒåŠ¨æ€é«˜åº¦è™šæ‹Ÿåˆ—è¡¨ã€å·²ç»å¤§è‡´å¯ç”¨äº†ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å½“ç”¨æˆ·å¿«é€Ÿæ‹–åŠ¨æ»šåŠ¨æ¡ï¼Œå› ä¸ºã€Œæ»šåŠ¨å·®å€¼ã€å¾ˆå¤§ï¼Œæ‰€ä»¥ä¼šç•¥è¿‡ä¸­é—´å…ƒç´ çš„æ¸²æŸ“ï¼Œæ­¤æ—¶è¿™äº›ç•¥è¿‡çš„å…ƒç´ åœ¨\u003Ccode\u003EcachedHeight\u003C\u002Fcode\u003Eä¸­ç”¨\u003Ccode\u003EESTIMATED_HEIGHT\u003C\u002Fcode\u003Eè¿›è¡Œå­˜å‚¨ï¼Œå› æ­¤ä¼šå‡ºç°ä¸¤ç§æƒ…å†µï¼š\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E\u003Cstrong\u003Eä¼°ç®—çš„ã€Œå¯æ»šåŠ¨é«˜åº¦ã€å°äºå®é™…çš„ã€Œå¯æ»šåŠ¨é«˜åº¦ã€\u003C\u002Fstrong\u003Eã€‚æ¯”å¦‚ç•¥è¿‡äº†ä¸­é—´ 20 ä¸ªå…ƒç´ ï¼Œè¿™äº›ç•¥è¿‡å…ƒç´ çš„ä¼°ç®—é«˜åº¦æ€»å€¼ä¸º ESTIMATED_HEIGHT(180) * 20 = 3600ï¼Œè€Œå‡è®¾å®é™…å…ƒç´ çœŸæ­£æ¸²æŸ“æ—¶çš„å¹³å‡é«˜åº¦ä¸º 300ï¼Œå³ç•¥è¿‡å…ƒç´ çš„å®é™…é«˜åº¦æ€»å€¼ä¸º 300 * 20 = 6000ã€‚å¯ä»¥å¾—çŸ¥å·®å€¼ä¸º 3600 - 6000 = -2400ï¼Œæ»šåŠ¨åˆ°é¡¶éƒ¨æ—¶ï¼Œæ— æ³•æ»šåŠ¨åˆ°ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cstrong\u003Eä¼°ç®—çš„ã€Œå¯æ»šåŠ¨é«˜åº¦ã€å¤§äºå®é™…çš„ã€Œå¯æ»šåŠ¨é«˜åº¦ã€\u003C\u002Fstrong\u003Eã€‚æ¯”å¦‚ç•¥è¿‡äº†ä¸­é—´ 20 ä¸ªå…ƒç´ ï¼Œè¿™äº›ç•¥è¿‡å…ƒç´ çš„ä¼°ç®—é«˜åº¦æ€»å€¼ä¸º ESTIMATED_HEIGHT(180) * 20 = 3600ï¼Œè€Œå‡è®¾å®é™…å…ƒç´ çœŸæ­£æ¸²æŸ“æ—¶çš„å¹³å‡é«˜åº¦ä¸º 100ï¼Œå³ç•¥è¿‡å…ƒç´ çš„å®é™…é«˜åº¦æ€»å€¼ä¸º 100 * 20 = 2000ã€‚å¯ä»¥å¾—çŸ¥å·®å€¼ä¸º 3600 - 2000 = 1600ï¼Œæ»šåŠ¨åˆ°é¡¶éƒ¨æ—¶ä¼šæœ‰ç©ºç™½éƒ¨åˆ†ã€‚\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003Eè€ƒè™‘åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šæœ‰å¾€å›æ»šåŠ¨çš„åœºæ™¯ï¼Œæ‰€ä»¥å¿…é¡»åœ¨å‘ç°ã€Œå¯æ»šåŠ¨é«˜åº¦ã€è¿‡å°æˆ–è¿‡å¤§çš„æ—¶å€™ï¼Œå¿…é¡»è¿›è¡ŒåŠæ—¶ä¿®æ­£ã€‚ä¿®æ”¹åŸæ¥çš„\u003Ccode\u003EhandleScroll\u003C\u002Fcode\u003Eã€\u003Ccode\u003EupdateAnchorItem\u003C\u002Fcode\u003Eå’Œ\u003Ccode\u003EcalItemScrollY\u003C\u002Fcode\u003Eæ–¹æ³•ï¼Œæ·»åŠ ç›¸å…³é€»è¾‘ã€‚\u003C\u002Fp\u003E\n\u003Cpre  class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003Eexport default {\n  data() {\n    return {\n      \u002F\u002F ...\n      revising: false,\n    };\n  },\n  \u002F\u002F ...\n  methods: {\n    \u002F\u002F ...\n    handleScroll() {\n      if (this.revising) return; \u002F\u002F ä¿®æ­£æ»šåŠ¨æ¡æ—¶ï¼Œå±è”½æ»šåŠ¨é€»è¾‘\n      \u002F\u002F ...\n    },\n    async updateAnchorItem(delta) {\n      \u002F\u002F ...\n      \u002F\u002F ä¿®æ­£æ‹–åŠ¨è¿‡å¿«å¯¼è‡´çš„æ»šåŠ¨åˆ°é¡¶ç«¯æ»šåŠ¨æ¡ä¸è¶³çš„åå·®\n      if (this.cachedScrollY[this.firstAttachedItem] &lt;= -1) {\n        console.log('revising insufficient');\n        this.revising = true;\n        \u002F\u002F éœ€è¦çš„ä¿®æ­£çš„æ»šåŠ¨é«˜åº¦ä¸ºã€Œé”šç‚¹å…ƒç´ ã€ä¹‹å‰çš„å…ƒç´ æ€»é«˜åº¦ + ã€Œé”šç‚¹å…ƒç´ ã€çš„ offset\n        const actualScrollTop =\n          this.cachedHeight.slice(0, Math.max(0, this.anchorItem.index)).reduce((sum, h) =&gt; (sum += h), 0) + this.anchorItem.offset;\n        this.$refs.scroller.scrollTop = actualScrollTop;\n        this.lastScrollTop = this.$refs.scroller.scrollTop;\n        if (this.$refs.scroller.scrollTop === 0) {\n          this.anchorItem = { index: 0, offset: 0 };\n        }\n        \u002F\u002F æ›´æ”¹äº† lastScrollTop åï¼Œéœ€è¦é‡æ–°è®¡ç®—ã€Œå¯è§†å…ƒç´ ã€çš„ scrollY\n        this.calItemScrollY();\n        this.revising = false;\n      }\n    },\n    \u002F\u002F è®¡ç®—æ¯ä¸€ä¸ªã€Œå¯è§†å…ƒç´ ã€çš„ scrollY\n    async calItemScrollY() {\n      \u002F\u002F ...\n      \u002F\u002F ä¿®æ­£æ‹–åŠ¨è¿‡å¿«å¯¼è‡´çš„æ»šåŠ¨åˆ°é¡¶ç«¯æœ‰ç©ºä½™çš„åå·®\n      if (this.cachedScrollY[0] &gt; 0) {\n        console.log('revising redundant');\n        this.revising = true;\n        \u002F\u002F ç¬¬ä¸€ä¸ªåˆ—è¡¨å…ƒç´ çš„ cachedScrollY å³ä¸ºå¤šå‡ºçš„é‡\n        const delta = this.cachedScrollY[0];\n        const last = Math.min(this.lastAttachedItem, this.listData.length);\n        for (let i = 0; i &lt; last; i++) {\n          this.$set(this.cachedScrollY, i, this.cachedScrollY[i] - delta);\n        }\n        const scrollTop = this.cachedScrollY[this.anchorItem.index - 1]\n          ? this.cachedScrollY[this.anchorItem.index - 1] + this.anchorItem.offset\n          : this.anchorItem.offset;\n        this.$refs.scroller.scrollTop = scrollTop;\n        this.lastScrollTop = this.$refs.scroller.scrollTop;\n        this.revising = false;\n      }\n    },\n    \u002F\u002F ...\n  },\n  \u002F\u002F ...\n};\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eæ‰“å®Œæ”¶å·¥ï¼Œã€ŒåŠ¨æ€é«˜åº¦è™šæ‹Ÿåˆ—è¡¨ã€å®ç°å®Œæˆï¼Œæ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œå¯ä»¥è§‚å¯Ÿåˆ°å°±ç®—æ»šåŠ¨æ¡ä¸€ç›´å‘ä¸‹ï¼Œåˆ—è¡¨å…ƒç´ çš„ä¸ªæ•°éƒ½æ˜¯æ’å®šçš„ï¼Œè€Œä¸”æ— è®ºæ˜¯å¿«é€Ÿæ‹–åŠ¨æ»šåŠ¨æ¡è¿˜æ˜¯å®æ—¶æ”¹å˜çª—å£å®½åº¦ï¼Œæ•´ä¸ªåˆ—è¡¨éƒ½èƒ½æ­£ç¡®åœ°æ¸²æŸ“ï¼š\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"_nuxt\u002Fimg\u002Fpic-9.8431154.gif\" alt=\"\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Eä½ å¯ä»¥ç‚¹å‡»\u003Ca href=\"https:\u002F\u002Flkangd.github.io\u002Finfinite-scroll-sample\u002F#\u002Fheight-dynamic\" target=\"_blank\"\u003Eæ­¤å¤„\u003C\u002Fa\u003Eè¿›è¡Œä½“éªŒã€‚\u003C\u002Fp\u003E\n\u003Ch2 id=\"zongjie\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'zongjie')\"\u003EÂ¶\u003C\u002Fa\u003E æ€»ç»“\u003C\u002Fh2\u003E\n\u003Cp\u003Eæœ¬æ–‡ä»‹ç»äº†å‰ç«¯ä¸šåŠ¡å¼€å‘ä¸­é•¿åˆ—è¡¨çš„å¸¸è§„ä¼˜åŒ–æ‰‹æ®µã€Œè™šæ‹Ÿåˆ—è¡¨ã€çš„å®šä¹‰å’Œå®ƒåœ¨ Vue ç¯å¢ƒä¸­çš„å®ç°ï¼Œå°±ã€Œå›ºå®šé«˜åº¦è™šæ‹Ÿåˆ—è¡¨ã€å’Œã€ŒåŠ¨æ€é«˜åº¦è™šæ‹Ÿåˆ—è¡¨ã€ä¸¤ä¸ªåœºæ™¯ä¸‹ä»¥ä¸€ä¸ªç®€å•çš„ demo è¯¦ç»†è®²è¿°äº†è™šæ‹Ÿåˆ—è¡¨çš„å®ç°æ€è·¯ã€‚\u003C\u002Fp\u003E\n\u003Cp\u003Eé˜…è¯»å®Œæœ¬æ–‡åå¯ä»¥å‘ç°ï¼Œä»¥æœ¬æ–‡çš„æ€è·¯å®ç°ã€Œè™šæ‹Ÿåˆ—è¡¨ã€çš„å…³é”®åœ¨äºã€Œé”šç‚¹å…ƒç´ ã€çš„è®¡ç®—å’Œæ›´æ–°ï¼Œç†è§£äº†è¿™ä¸€ç‚¹ä¹‹åå°±å¯ä»¥å‘ç°åç»­çš„å®ç°éƒ½æ˜¯æŒ‰éƒ¨å°±ç­çš„ã€‚\u003C\u002Fp\u003E\n\u003Cp\u003Eæ–‡å­—è¡¨è¾¾å¯èƒ½ä¼šæœ‰ç–æ¼ï¼Œå»ºè®®é€šè¿‡ä¸‹è½½æœ¬æ–‡çš„\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flkangd\u002Finfinite-scroll-sample\" target=\"_blank\"\u003Eä»£ç åº“\u003C\u002Fa\u003Eï¼ˆåŸºäº Vue 2.xï¼‰è¿è¡Œè°ƒè¯•ï¼ŒåŠ æ·±ç†è§£ã€‚\u003C\u002Fp\u003E\n\u003Cp\u003Eå¦‚æœæœ‰ä¸æ­£ç¡®æˆ–éš¾ä»¥ç†è§£çš„åœ°æ–¹ï¼Œæ¬¢è¿é€šè¿‡é‚®ä»¶å’Œç•™è¨€è¿›è¡ŒæŒ‡æ­£è®¨è®ºã€‚\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003E\u003Cstrong\u003Eé‡è¦æç¤ºï¼š\u003C\u002Fstrong\u003E æœ¬æ–‡æ‰€æœ‰ä»£ç åŠç¤ºä¾‹é¡¹ç›®åªç”¨äºæ¢è®¨è™šæ‹Ÿåˆ—è¡¨çš„å®ç°åŸç†ï¼Œè¯·å‹¿ç›´æ¥ä½¿ç”¨äºç”Ÿäº§ã€‚\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Ch4 id=\"cankao\"\u003E\u003Ca class=\"cs-header-anchor\" href=\"\" onclick=\"!this.getAttribute('href') &amp;&amp; this.setAttribute('href', window.location.origin+window.location.pathname+'#'+'cankao')\"\u003EÂ¶\u003C\u002Fa\u003E å‚è€ƒ\u003C\u002Fh4\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Fupdates\u002F2016\u002F07\u002Finfinite-scroller#scroll_anchoring\" target=\"_blank\"\u003EComplexities of an Infinite Scroller\u003C\u002Fa\u003E\u003Cbr\u003E\n\u003Ca href=\"https:\u002F\u002Fitsze.ro\u002Fblog\u002F2017\u002F04\u002F09\u002Finfinite-list-and-react.html\" target=\"_blank\"\u003EInfinite List and React\u003C\u002Fa\u003E\u003Cbr\u003E\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fdwqs\u002Fblog\u002Fissues\u002F70\" target=\"_blank\"\u003Eæµ…è¯´è™šæ‹Ÿåˆ—è¡¨çš„å®ç°åŸç†\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n",bodyBegin:8,frontmatter:"title: å‰–ææ— é™æ»šåŠ¨è™šæ‹Ÿåˆ—è¡¨çš„å®ç°åŸç†\ndate: '2020-08-26'\nspoiler: é•¿åˆ—è¡¨æ¸²æŸ“çš„ç»ˆæä¼˜åŒ–æ‰‹æ®µ\nfeatured: true",link:a,next:{title:"SCSS ç¯å¢ƒä¸‹çš„ BEM ä¼˜é›…å®è·µ",date:"2020-04-12",spoiler:"å¦‚ä½•ä¼˜é›…åœ°ç¼–å†™æ˜“ç»´æŠ¤å’Œå…·è¯­ä¹‰åŒ–çš„æ ·å¼ä»£ç ï¼Ÿ",link:"\u002Fpost\u002Fwrite-bem-with-scss\u002F",min2read:b,wordcount:"3k"},prev:{title:"æ§åˆ¶å‰ç«¯ä¸šåŠ¡é‡å¤è¯·æ±‚çš„ä¸€ä¸ªæ–°æ€è·¯",date:"2020-09-13",spoiler:"å°‘ä¸€ä¸ªè¯·æ±‚ï¼Œå°‘ä¸€åˆ†è´Ÿæ‹…",link:"\u002Fpost\u002Fprevent-duplicate-requests\u002F",min2read:b,wordcount:"3.3k"}}}],fetch:[],mutations:void 0}}("\u002Fpost\u002Fvirtual-infinite-scroll\u002F","â˜•ï¸â˜•ï¸â˜•ï¸ 13 min read")));